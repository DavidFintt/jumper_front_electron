"use strict";const De=require("electron"),et=require("node:path"),ql=require("node:os"),Gr=require("node:fs"),Gt=require("child_process"),Nt=require("crypto"),Fo=require("node:child_process"),Et=require("fs"),wc=require("constants"),wr=require("stream"),oo=require("util"),Ml=require("assert"),Ne=require("path"),Bl=require("events"),jl=require("tty"),Yr=require("os"),wt=require("url"),_c=require("string_decoder"),Hl=require("zlib"),Rc=require("http");var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wr={exports:{}},Sc=Wr.exports,Lo;function Ac(){return Lo||(Lo=1,(function(s,p){(function(g,d){s.exports=d(Gt,Nt)})(Sc,function(g,d){return(function(l){function c(o){if(e[o])return e[o].exports;var t=e[o]={exports:{},id:o,loaded:!1};return l[o].call(t.exports,t,t.exports,c),t.loaded=!0,t.exports}var e={};return c.m=l,c.c=e,c.p="",c(0)})([function(l,c,e){l.exports=e(34)},function(l,c,e){var o=e(29)("wks"),t=e(33),a=e(2).Symbol,i=typeof a=="function",r=l.exports=function(n){return o[n]||(o[n]=i&&a[n]||(i?a:t)("Symbol."+n))};r.store=o},function(l,c){var e=l.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(l,c,e){var o=e(9);l.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(l,c,e){l.exports=!e(24)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(l,c,e){var o=e(12),t=e(17);l.exports=e(4)?function(a,i,r){return o.f(a,i,t(1,r))}:function(a,i,r){return a[i]=r,a}},function(l,c){var e=l.exports={version:"2.4.0"};typeof __e=="number"&&(__e=e)},function(l,c,e){var o=e(14);l.exports=function(t,a,i){if(o(t),a===void 0)return t;switch(i){case 1:return function(r){return t.call(a,r)};case 2:return function(r,n){return t.call(a,r,n)};case 3:return function(r,n,f){return t.call(a,r,n,f)}}return function(){return t.apply(a,arguments)}}},function(l,c){var e={}.hasOwnProperty;l.exports=function(o,t){return e.call(o,t)}},function(l,c){l.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(l,c){l.exports={}},function(l,c){var e={}.toString;l.exports=function(o){return e.call(o).slice(8,-1)}},function(l,c,e){var o=e(3),t=e(26),a=e(32),i=Object.defineProperty;c.f=e(4)?Object.defineProperty:function(r,n,f){if(o(r),n=a(n,!0),o(f),t)try{return i(r,n,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported!");return"value"in f&&(r[n]=f.value),r}},function(l,c,e){var o=e(42),t=e(15);l.exports=function(a){return o(t(a))}},function(l,c){l.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(l,c){l.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(l,c,e){var o=e(9),t=e(2).document,a=o(t)&&o(t.createElement);l.exports=function(i){return a?t.createElement(i):{}}},function(l,c){l.exports=function(e,o){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:o}}},function(l,c,e){var o=e(12).f,t=e(8),a=e(1)("toStringTag");l.exports=function(i,r,n){i&&!t(i=n?i:i.prototype,a)&&o(i,a,{configurable:!0,value:r})}},function(l,c,e){var o=e(29)("keys"),t=e(33);l.exports=function(a){return o[a]||(o[a]=t(a))}},function(l,c){var e=Math.ceil,o=Math.floor;l.exports=function(t){return isNaN(t=+t)?0:(t>0?o:e)(t)}},function(l,c,e){var o=e(11),t=e(1)("toStringTag"),a=o((function(){return arguments})())=="Arguments",i=function(r,n){try{return r[n]}catch{}};l.exports=function(r){var n,f,m;return r===void 0?"Undefined":r===null?"Null":typeof(f=i(n=Object(r),t))=="string"?f:a?o(n):(m=o(n))=="Object"&&typeof n.callee=="function"?"Arguments":m}},function(l,c){l.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(l,c,e){var o=e(2),t=e(6),a=e(7),i=e(5),r="prototype",n=function(f,m,v){var h,_,A,C=f&n.F,O=f&n.G,T=f&n.S,D=f&n.P,b=f&n.B,w=f&n.W,y=O?t:t[m]||(t[m]={}),L=y[r],$=O?o:T?o[m]:(o[m]||{})[r];O&&(v=m);for(h in v)_=!C&&$&&$[h]!==void 0,_&&h in y||(A=_?$[h]:v[h],y[h]=O&&typeof $[h]!="function"?v[h]:b&&_?a(A,o):w&&$[h]==A?(function(N){var k=function(F,I,U){if(this instanceof N){switch(arguments.length){case 0:return new N;case 1:return new N(F);case 2:return new N(F,I)}return new N(F,I,U)}return N.apply(this,arguments)};return k[r]=N[r],k})(A):D&&typeof A=="function"?a(Function.call,A):A,D&&((y.virtual||(y.virtual={}))[h]=A,f&n.R&&L&&!L[h]&&i(L,h,A)))};n.F=1,n.G=2,n.S=4,n.P=8,n.B=16,n.W=32,n.U=64,n.R=128,l.exports=n},function(l,c){l.exports=function(e){try{return!!e()}catch{return!0}}},function(l,c,e){l.exports=e(2).document&&document.documentElement},function(l,c,e){l.exports=!e(4)&&!e(24)(function(){return Object.defineProperty(e(16)("div"),"a",{get:function(){return 7}}).a!=7})},function(l,c,e){var o=e(28),t=e(23),a=e(57),i=e(5),r=e(8),n=e(10),f=e(45),m=e(18),v=e(52),h=e(1)("iterator"),_=!([].keys&&"next"in[].keys()),A="@@iterator",C="keys",O="values",T=function(){return this};l.exports=function(D,b,w,y,L,$,N){f(w,b,y);var k,F,I,U=function(M){if(!_&&M in Z)return Z[M];switch(M){case C:return function(){return new w(this,M)};case O:return function(){return new w(this,M)}}return function(){return new w(this,M)}},B=b+" Iterator",V=L==O,W=!1,Z=D.prototype,ue=Z[h]||Z[A]||L&&Z[L],ie=ue||U(L),de=L?V?U("entries"):ie:void 0,z=b=="Array"&&Z.entries||ue;if(z&&(I=v(z.call(new D)),I!==Object.prototype&&(m(I,B,!0),o||r(I,h)||i(I,h,T))),V&&ue&&ue.name!==O&&(W=!0,ie=function(){return ue.call(this)}),o&&!N||!_&&!W&&Z[h]||i(Z,h,ie),n[b]=ie,n[B]=T,L)if(k={values:V?ie:U(O),keys:$?ie:U(C),entries:de},N)for(F in k)F in Z||a(Z,F,k[F]);else t(t.P+t.F*(_||W),b,k);return k}},function(l,c){l.exports=!0},function(l,c,e){var o=e(2),t="__core-js_shared__",a=o[t]||(o[t]={});l.exports=function(i){return a[i]||(a[i]={})}},function(l,c,e){var o,t,a,i=e(7),r=e(41),n=e(25),f=e(16),m=e(2),v=m.process,h=m.setImmediate,_=m.clearImmediate,A=m.MessageChannel,C=0,O={},T="onreadystatechange",D=function(){var w=+this;if(O.hasOwnProperty(w)){var y=O[w];delete O[w],y()}},b=function(w){D.call(w.data)};h&&_||(h=function(w){for(var y=[],L=1;arguments.length>L;)y.push(arguments[L++]);return O[++C]=function(){r(typeof w=="function"?w:Function(w),y)},o(C),C},_=function(w){delete O[w]},e(11)(v)=="process"?o=function(w){v.nextTick(i(D,w,1))}:A?(t=new A,a=t.port2,t.port1.onmessage=b,o=i(a.postMessage,a,1)):m.addEventListener&&typeof postMessage=="function"&&!m.importScripts?(o=function(w){m.postMessage(w+"","*")},m.addEventListener("message",b,!1)):o=T in f("script")?function(w){n.appendChild(f("script"))[T]=function(){n.removeChild(this),D.call(w)}}:function(w){setTimeout(i(D,w,1),0)}),l.exports={set:h,clear:_}},function(l,c,e){var o=e(20),t=Math.min;l.exports=function(a){return a>0?t(o(a),9007199254740991):0}},function(l,c,e){var o=e(9);l.exports=function(t,a){if(!o(t))return t;var i,r;if(a&&typeof(i=t.toString)=="function"&&!o(r=i.call(t))||typeof(i=t.valueOf)=="function"&&!o(r=i.call(t))||!a&&typeof(i=t.toString)=="function"&&!o(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(l,c){var e=0,o=Math.random();l.exports=function(t){return"Symbol(".concat(t===void 0?"":t,")_",(++e+o).toString(36))}},function(l,c,e){function o(T){return T&&T.__esModule?T:{default:T}}function t(){return process.platform!=="win32"?"":process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"mixed":"native"}function a(T){return(0,h.createHash)("sha256").update(T).digest("hex")}function i(T){switch(A){case"darwin":return T.split("IOPlatformUUID")[1].split(`
`)[0].replace(/\=|\s+|\"/gi,"").toLowerCase();case"win32":return T.toString().split("REG_SZ")[1].replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"linux":return T.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();case"freebsd":return T.toString().replace(/\r+|\n+|\s+/gi,"").toLowerCase();default:throw new Error("Unsupported platform: "+process.platform)}}function r(T){var D=i((0,v.execSync)(O[A]).toString());return T?D:a(D)}function n(T){return new m.default(function(D,b){return(0,v.exec)(O[A],{},function(w,y,L){if(w)return b(new Error("Error while obtaining machine id: "+w.stack));var $=i(y.toString());return D(T?$:a($))})})}Object.defineProperty(c,"__esModule",{value:!0});var f=e(35),m=o(f);c.machineIdSync=r,c.machineId=n;var v=e(70),h=e(71),_=process,A=_.platform,C={native:"%windir%\\System32",mixed:"%windir%\\sysnative\\cmd.exe /c %windir%\\System32"},O={darwin:"ioreg -rd1 -c IOPlatformExpertDevice",win32:C[t()]+"\\REG.exe QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid",linux:"( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :",freebsd:"kenv -q smbios.system.uuid || sysctl -n kern.hostuuid"}},function(l,c,e){l.exports={default:e(36),__esModule:!0}},function(l,c,e){e(66),e(68),e(69),e(67),l.exports=e(6).Promise},function(l,c){l.exports=function(){}},function(l,c){l.exports=function(e,o,t,a){if(!(e instanceof o)||a!==void 0&&a in e)throw TypeError(t+": incorrect invocation!");return e}},function(l,c,e){var o=e(13),t=e(31),a=e(62);l.exports=function(i){return function(r,n,f){var m,v=o(r),h=t(v.length),_=a(f,h);if(i&&n!=n){for(;h>_;)if(m=v[_++],m!=m)return!0}else for(;h>_;_++)if((i||_ in v)&&v[_]===n)return i||_||0;return!i&&-1}}},function(l,v,e){var o=e(7),t=e(44),a=e(43),i=e(3),r=e(31),n=e(64),f={},m={},v=l.exports=function(h,_,A,C,O){var T,D,b,w,y=O?function(){return h}:n(h),L=o(A,C,_?2:1),$=0;if(typeof y!="function")throw TypeError(h+" is not iterable!");if(a(y)){for(T=r(h.length);T>$;$++)if(w=_?L(i(D=h[$])[0],D[1]):L(h[$]),w===f||w===m)return w}else for(b=y.call(h);!(D=b.next()).done;)if(w=t(b,L,D.value,_),w===f||w===m)return w};v.BREAK=f,v.RETURN=m},function(l,c){l.exports=function(e,o,t){var a=t===void 0;switch(o.length){case 0:return a?e():e.call(t);case 1:return a?e(o[0]):e.call(t,o[0]);case 2:return a?e(o[0],o[1]):e.call(t,o[0],o[1]);case 3:return a?e(o[0],o[1],o[2]):e.call(t,o[0],o[1],o[2]);case 4:return a?e(o[0],o[1],o[2],o[3]):e.call(t,o[0],o[1],o[2],o[3])}return e.apply(t,o)}},function(l,c,e){var o=e(11);l.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return o(t)=="String"?t.split(""):Object(t)}},function(l,c,e){var o=e(10),t=e(1)("iterator"),a=Array.prototype;l.exports=function(i){return i!==void 0&&(o.Array===i||a[t]===i)}},function(l,c,e){var o=e(3);l.exports=function(t,a,i,r){try{return r?a(o(i)[0],i[1]):a(i)}catch(f){var n=t.return;throw n!==void 0&&o(n.call(t)),f}}},function(l,c,e){var o=e(49),t=e(17),a=e(18),i={};e(5)(i,e(1)("iterator"),function(){return this}),l.exports=function(r,n,f){r.prototype=o(i,{next:t(1,f)}),a(r,n+" Iterator")}},function(l,c,e){var o=e(1)("iterator"),t=!1;try{var a=[7][o]();a.return=function(){t=!0},Array.from(a,function(){throw 2})}catch{}l.exports=function(i,r){if(!r&&!t)return!1;var n=!1;try{var f=[7],m=f[o]();m.next=function(){return{done:n=!0}},f[o]=function(){return m},i(f)}catch{}return n}},function(l,c){l.exports=function(e,o){return{value:o,done:!!e}}},function(l,c,e){var o=e(2),t=e(30).set,a=o.MutationObserver||o.WebKitMutationObserver,i=o.process,r=o.Promise,n=e(11)(i)=="process";l.exports=function(){var f,m,v,h=function(){var O,T;for(n&&(O=i.domain)&&O.exit();f;){T=f.fn,f=f.next;try{T()}catch(D){throw f?v():m=void 0,D}}m=void 0,O&&O.enter()};if(n)v=function(){i.nextTick(h)};else if(a){var _=!0,A=document.createTextNode("");new a(h).observe(A,{characterData:!0}),v=function(){A.data=_=!_}}else if(r&&r.resolve){var C=r.resolve();v=function(){C.then(h)}}else v=function(){t.call(o,h)};return function(O){var T={fn:O,next:void 0};m&&(m.next=T),f||(f=T,v()),m=T}}},function(l,c,e){var o=e(3),t=e(50),a=e(22),i=e(19)("IE_PROTO"),r=function(){},n="prototype",f=function(){var m,v=e(16)("iframe"),h=a.length,_=">";for(v.style.display="none",e(25).appendChild(v),v.src="javascript:",m=v.contentWindow.document,m.open(),m.write("<script>document.F=Object<\/script"+_),m.close(),f=m.F;h--;)delete f[n][a[h]];return f()};l.exports=Object.create||function(m,v){var h;return m!==null?(r[n]=o(m),h=new r,r[n]=null,h[i]=m):h=f(),v===void 0?h:t(h,v)}},function(l,c,e){var o=e(12),t=e(3),a=e(54);l.exports=e(4)?Object.defineProperties:function(i,r){t(i);for(var n,f=a(r),m=f.length,v=0;m>v;)o.f(i,n=f[v++],r[n]);return i}},function(l,c,e){var o=e(55),t=e(17),a=e(13),i=e(32),r=e(8),n=e(26),f=Object.getOwnPropertyDescriptor;c.f=e(4)?f:function(m,v){if(m=a(m),v=i(v,!0),n)try{return f(m,v)}catch{}if(r(m,v))return t(!o.f.call(m,v),m[v])}},function(l,c,e){var o=e(8),t=e(63),a=e(19)("IE_PROTO"),i=Object.prototype;l.exports=Object.getPrototypeOf||function(r){return r=t(r),o(r,a)?r[a]:typeof r.constructor=="function"&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?i:null}},function(l,c,e){var o=e(8),t=e(13),a=e(39)(!1),i=e(19)("IE_PROTO");l.exports=function(r,n){var f,m=t(r),v=0,h=[];for(f in m)f!=i&&o(m,f)&&h.push(f);for(;n.length>v;)o(m,f=n[v++])&&(~a(h,f)||h.push(f));return h}},function(l,c,e){var o=e(53),t=e(22);l.exports=Object.keys||function(a){return o(a,t)}},function(l,c){c.f={}.propertyIsEnumerable},function(l,c,e){var o=e(5);l.exports=function(t,a,i){for(var r in a)i&&t[r]?t[r]=a[r]:o(t,r,a[r]);return t}},function(l,c,e){l.exports=e(5)},function(l,c,e){var o=e(9),t=e(3),a=function(i,r){if(t(i),!o(r)&&r!==null)throw TypeError(r+": can't set as prototype!")};l.exports={set:Object.setPrototypeOf||("__proto__"in{}?(function(i,r,n){try{n=e(7)(Function.call,e(51).f(Object.prototype,"__proto__").set,2),n(i,[]),r=!(i instanceof Array)}catch{r=!0}return function(f,m){return a(f,m),r?f.__proto__=m:n(f,m),f}})({},!1):void 0),check:a}},function(l,c,e){var o=e(2),t=e(6),a=e(12),i=e(4),r=e(1)("species");l.exports=function(n){var f=typeof t[n]=="function"?t[n]:o[n];i&&f&&!f[r]&&a.f(f,r,{configurable:!0,get:function(){return this}})}},function(l,c,e){var o=e(3),t=e(14),a=e(1)("species");l.exports=function(i,r){var n,f=o(i).constructor;return f===void 0||(n=o(f)[a])==null?r:t(n)}},function(l,c,e){var o=e(20),t=e(15);l.exports=function(a){return function(i,r){var n,f,m=String(t(i)),v=o(r),h=m.length;return v<0||v>=h?a?"":void 0:(n=m.charCodeAt(v),n<55296||n>56319||v+1===h||(f=m.charCodeAt(v+1))<56320||f>57343?a?m.charAt(v):n:a?m.slice(v,v+2):(n-55296<<10)+(f-56320)+65536)}}},function(l,c,e){var o=e(20),t=Math.max,a=Math.min;l.exports=function(i,r){return i=o(i),i<0?t(i+r,0):a(i,r)}},function(l,c,e){var o=e(15);l.exports=function(t){return Object(o(t))}},function(l,c,e){var o=e(21),t=e(1)("iterator"),a=e(10);l.exports=e(6).getIteratorMethod=function(i){if(i!=null)return i[t]||i["@@iterator"]||a[o(i)]}},function(l,c,e){var o=e(37),t=e(47),a=e(10),i=e(13);l.exports=e(27)(Array,"Array",function(r,n){this._t=i(r),this._i=0,this._k=n},function(){var r=this._t,n=this._k,f=this._i++;return!r||f>=r.length?(this._t=void 0,t(1)):n=="keys"?t(0,f):n=="values"?t(0,r[f]):t(0,[f,r[f]])},"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(l,c){},function(l,c,e){var o,t,a,i=e(28),r=e(2),n=e(7),f=e(21),m=e(23),v=e(9),h=(e(3),e(14)),_=e(38),A=e(40),C=(e(58).set,e(60)),O=e(30).set,T=e(48)(),D="Promise",b=r.TypeError,y=r.process,w=r[D],y=r.process,L=f(y)=="process",$=function(){},N=!!(function(){try{var z=w.resolve(1),M=(z.constructor={})[e(1)("species")]=function(te){te($,$)};return(L||typeof PromiseRejectionEvent=="function")&&z.then($)instanceof M}catch{}})(),k=function(z,M){return z===M||z===w&&M===a},F=function(z){var M;return!(!v(z)||typeof(M=z.then)!="function")&&M},I=function(z){return k(w,z)?new U(z):new t(z)},U=t=function(z){var M,te;this.promise=new z(function(R,E){if(M!==void 0||te!==void 0)throw b("Bad Promise constructor");M=R,te=E}),this.resolve=h(M),this.reject=h(te)},B=function(z){try{z()}catch(M){return{error:M}}},V=function(z,M){if(!z._n){z._n=!0;var te=z._c;T(function(){for(var R=z._v,E=z._s==1,j=0,x=function(se){var he,pe,_e=E?se.ok:se.fail,ye=se.resolve,Ce=se.reject,Ae=se.domain;try{_e?(E||(z._h==2&&ue(z),z._h=1),_e===!0?he=R:(Ae&&Ae.enter(),he=_e(R),Ae&&Ae.exit()),he===se.promise?Ce(b("Promise-chain cycle")):(pe=F(he))?pe.call(he,ye,Ce):ye(he)):Ce(R)}catch(Ue){Ce(Ue)}};te.length>j;)x(te[j++]);z._c=[],z._n=!1,M&&!z._h&&W(z)})}},W=function(z){O.call(r,function(){var M,te,R,E=z._v;if(Z(z)&&(M=B(function(){L?y.emit("unhandledRejection",E,z):(te=r.onunhandledrejection)?te({promise:z,reason:E}):(R=r.console)&&R.error&&R.error("Unhandled promise rejection",E)}),z._h=L||Z(z)?2:1),z._a=void 0,M)throw M.error})},Z=function(z){if(z._h==1)return!1;for(var M,te=z._a||z._c,R=0;te.length>R;)if(M=te[R++],M.fail||!Z(M.promise))return!1;return!0},ue=function(z){O.call(r,function(){var M;L?y.emit("rejectionHandled",z):(M=r.onrejectionhandled)&&M({promise:z,reason:z._v})})},ie=function(z){var M=this;M._d||(M._d=!0,M=M._w||M,M._v=z,M._s=2,M._a||(M._a=M._c.slice()),V(M,!0))},de=function(z){var M,te=this;if(!te._d){te._d=!0,te=te._w||te;try{if(te===z)throw b("Promise can't be resolved itself");(M=F(z))?T(function(){var R={_w:te,_d:!1};try{M.call(z,n(de,R,1),n(ie,R,1))}catch(E){ie.call(R,E)}}):(te._v=z,te._s=1,V(te,!1))}catch(R){ie.call({_w:te,_d:!1},R)}}};N||(w=function(z){_(this,w,D,"_h"),h(z),o.call(this);try{z(n(de,this,1),n(ie,this,1))}catch(M){ie.call(this,M)}},o=function(z){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},o.prototype=e(56)(w.prototype,{then:function(z,M){var te=I(C(this,w));return te.ok=typeof z!="function"||z,te.fail=typeof M=="function"&&M,te.domain=L?y.domain:void 0,this._c.push(te),this._a&&this._a.push(te),this._s&&V(this,!1),te.promise},catch:function(z){return this.then(void 0,z)}}),U=function(){var z=new o;this.promise=z,this.resolve=n(de,z,1),this.reject=n(ie,z,1)}),m(m.G+m.W+m.F*!N,{Promise:w}),e(18)(w,D),e(59)(D),a=e(6)[D],m(m.S+m.F*!N,D,{reject:function(z){var M=I(this),te=M.reject;return te(z),M.promise}}),m(m.S+m.F*(i||!N),D,{resolve:function(z){if(z instanceof w&&k(z.constructor,this))return z;var M=I(this),te=M.resolve;return te(z),M.promise}}),m(m.S+m.F*!(N&&e(46)(function(z){w.all(z).catch($)})),D,{all:function(z){var M=this,te=I(M),R=te.resolve,E=te.reject,j=B(function(){var x=[],se=0,he=1;A(z,!1,function(pe){var _e=se++,ye=!1;x.push(void 0),he++,M.resolve(pe).then(function(Ce){ye||(ye=!0,x[_e]=Ce,--he||R(x))},E)}),--he||R(x)});return j&&E(j.error),te.promise},race:function(z){var M=this,te=I(M),R=te.reject,E=B(function(){A(z,!1,function(j){M.resolve(j).then(te.resolve,R)})});return E&&R(E.error),te.promise}})},function(l,c,e){var o=e(61)(!0);e(27)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,a=this._t,i=this._i;return i>=a.length?{value:void 0,done:!0}:(t=o(a,i),this._i+=t.length,{value:t,done:!1})})},function(l,c,e){e(65);for(var o=e(2),t=e(5),a=e(10),i=e(1)("toStringTag"),r=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],n=0;n<5;n++){var f=r[n],m=o[f],v=m&&m.prototype;v&&!v[i]&&t(v,i,f),a[f]=a.Array}},function(l,c){l.exports=Gt},function(l,c){l.exports=Nt}])})})(Wr)),Wr.exports}var Tc=Ac(),Pt={},on={},Dr={},Uo;function Xe(){return Uo||(Uo=1,Dr.fromCallback=function(s){return Object.defineProperty(function(...p){if(typeof p[p.length-1]=="function")s.apply(this,p);else return new Promise((g,d)=>{p.push((l,c)=>l!=null?d(l):g(c)),s.apply(this,p)})},"name",{value:s.name})},Dr.fromPromise=function(s){return Object.defineProperty(function(...p){const g=p[p.length-1];if(typeof g!="function")return s.apply(this,p);p.pop(),s.apply(this,p).then(d=>g(null,d),g)},"name",{value:s.name})}),Dr}var an,$o;function bc(){if($o)return an;$o=1;var s=wc,p=process.cwd,g=null,d=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return g||(g=p.call(process)),g};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var l=process.chdir;process.chdir=function(e){g=null,l.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,l)}an=c;function c(e){s.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&o(e),e.lutimes||t(e),e.chown=r(e.chown),e.fchown=r(e.fchown),e.lchown=r(e.lchown),e.chmod=a(e.chmod),e.fchmod=a(e.fchmod),e.lchmod=a(e.lchmod),e.chownSync=n(e.chownSync),e.fchownSync=n(e.fchownSync),e.lchownSync=n(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=f(e.stat),e.fstat=f(e.fstat),e.lstat=f(e.lstat),e.statSync=m(e.statSync),e.fstatSync=m(e.fstatSync),e.lstatSync=m(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(h,_,A){A&&process.nextTick(A)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(h,_,A,C){C&&process.nextTick(C)},e.lchownSync=function(){}),d==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:(function(h){function _(A,C,O){var T=Date.now(),D=0;h(A,C,function b(w){if(w&&(w.code==="EACCES"||w.code==="EPERM"||w.code==="EBUSY")&&Date.now()-T<6e4){setTimeout(function(){e.stat(C,function(y,L){y&&y.code==="ENOENT"?h(A,C,b):O(w)})},D),D<100&&(D+=10);return}O&&O(w)})}return Object.setPrototypeOf&&Object.setPrototypeOf(_,h),_})(e.rename)),e.read=typeof e.read!="function"?e.read:(function(h){function _(A,C,O,T,D,b){var w;if(b&&typeof b=="function"){var y=0;w=function(L,$,N){if(L&&L.code==="EAGAIN"&&y<10)return y++,h.call(e,A,C,O,T,D,w);b.apply(this,arguments)}}return h.call(e,A,C,O,T,D,w)}return Object.setPrototypeOf&&Object.setPrototypeOf(_,h),_})(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:(function(h){return function(_,A,C,O,T){for(var D=0;;)try{return h.call(e,_,A,C,O,T)}catch(b){if(b.code==="EAGAIN"&&D<10){D++;continue}throw b}}})(e.readSync);function o(h){h.lchmod=function(_,A,C){h.open(_,s.O_WRONLY|s.O_SYMLINK,A,function(O,T){if(O){C&&C(O);return}h.fchmod(T,A,function(D){h.close(T,function(b){C&&C(D||b)})})})},h.lchmodSync=function(_,A){var C=h.openSync(_,s.O_WRONLY|s.O_SYMLINK,A),O=!0,T;try{T=h.fchmodSync(C,A),O=!1}finally{if(O)try{h.closeSync(C)}catch{}else h.closeSync(C)}return T}}function t(h){s.hasOwnProperty("O_SYMLINK")&&h.futimes?(h.lutimes=function(_,A,C,O){h.open(_,s.O_SYMLINK,function(T,D){if(T){O&&O(T);return}h.futimes(D,A,C,function(b){h.close(D,function(w){O&&O(b||w)})})})},h.lutimesSync=function(_,A,C){var O=h.openSync(_,s.O_SYMLINK),T,D=!0;try{T=h.futimesSync(O,A,C),D=!1}finally{if(D)try{h.closeSync(O)}catch{}else h.closeSync(O)}return T}):h.futimes&&(h.lutimes=function(_,A,C,O){O&&process.nextTick(O)},h.lutimesSync=function(){})}function a(h){return h&&function(_,A,C){return h.call(e,_,A,function(O){v(O)&&(O=null),C&&C.apply(this,arguments)})}}function i(h){return h&&function(_,A){try{return h.call(e,_,A)}catch(C){if(!v(C))throw C}}}function r(h){return h&&function(_,A,C,O){return h.call(e,_,A,C,function(T){v(T)&&(T=null),O&&O.apply(this,arguments)})}}function n(h){return h&&function(_,A,C){try{return h.call(e,_,A,C)}catch(O){if(!v(O))throw O}}}function f(h){return h&&function(_,A,C){typeof A=="function"&&(C=A,A=null);function O(T,D){D&&(D.uid<0&&(D.uid+=4294967296),D.gid<0&&(D.gid+=4294967296)),C&&C.apply(this,arguments)}return A?h.call(e,_,A,O):h.call(e,_,O)}}function m(h){return h&&function(_,A){var C=A?h.call(e,_,A):h.call(e,_);return C&&(C.uid<0&&(C.uid+=4294967296),C.gid<0&&(C.gid+=4294967296)),C}}function v(h){if(!h||h.code==="ENOSYS")return!0;var _=!process.getuid||process.getuid()!==0;return!!(_&&(h.code==="EINVAL"||h.code==="EPERM"))}}return an}var sn,ko;function Cc(){if(ko)return sn;ko=1;var s=wr.Stream;sn=p;function p(g){return{ReadStream:d,WriteStream:l};function d(c,e){if(!(this instanceof d))return new d(c,e);s.call(this);var o=this;this.path=c,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,e=e||{};for(var t=Object.keys(e),a=0,i=t.length;a<i;a++){var r=t[a];this[r]=e[r]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}g.open(this.path,this.flags,this.mode,function(n,f){if(n){o.emit("error",n),o.readable=!1;return}o.fd=f,o.emit("open",f),o._read()})}function l(c,e){if(!(this instanceof l))return new l(c,e);s.call(this),this.path=c,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,e=e||{};for(var o=Object.keys(e),t=0,a=o.length;t<a;t++){var i=o[t];this[i]=e[i]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=g.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return sn}var ln,qo;function Pc(){if(qo)return ln;qo=1,ln=p;var s=Object.getPrototypeOf||function(g){return g.__proto__};function p(g){if(g===null||typeof g!="object")return g;if(g instanceof Object)var d={__proto__:s(g)};else var d=Object.create(null);return Object.getOwnPropertyNames(g).forEach(function(l){Object.defineProperty(d,l,Object.getOwnPropertyDescriptor(g,l))}),d}return ln}var Ir,Mo;function Ye(){if(Mo)return Ir;Mo=1;var s=Et,p=bc(),g=Cc(),d=Pc(),l=oo,c,e;typeof Symbol=="function"&&typeof Symbol.for=="function"?(c=Symbol.for("graceful-fs.queue"),e=Symbol.for("graceful-fs.previous")):(c="___graceful-fs.queue",e="___graceful-fs.previous");function o(){}function t(h,_){Object.defineProperty(h,c,{get:function(){return _}})}var a=o;if(l.debuglog?a=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(a=function(){var h=l.format.apply(l,arguments);h="GFS4: "+h.split(/\n/).join(`
GFS4: `),console.error(h)}),!s[c]){var i=nt[c]||[];t(s,i),s.close=(function(h){function _(A,C){return h.call(s,A,function(O){O||m(),typeof C=="function"&&C.apply(this,arguments)})}return Object.defineProperty(_,e,{value:h}),_})(s.close),s.closeSync=(function(h){function _(A){h.apply(s,arguments),m()}return Object.defineProperty(_,e,{value:h}),_})(s.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){a(s[c]),Ml.equal(s[c].length,0)})}nt[c]||t(nt,s[c]),Ir=r(d(s)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!s.__patched&&(Ir=r(s),s.__patched=!0);function r(h){p(h),h.gracefulify=r,h.createReadStream=ue,h.createWriteStream=ie;var _=h.readFile;h.readFile=A;function A(M,te,R){return typeof te=="function"&&(R=te,te=null),E(M,te,R);function E(j,x,se,he){return _(j,x,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?n([E,[j,x,se],pe,he||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments)})}}var C=h.writeFile;h.writeFile=O;function O(M,te,R,E){return typeof R=="function"&&(E=R,R=null),j(M,te,R,E);function j(x,se,he,pe,_e){return C(x,se,he,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([j,[x,se,he,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var T=h.appendFile;T&&(h.appendFile=D);function D(M,te,R,E){return typeof R=="function"&&(E=R,R=null),j(M,te,R,E);function j(x,se,he,pe,_e){return T(x,se,he,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([j,[x,se,he,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var b=h.copyFile;b&&(h.copyFile=w);function w(M,te,R,E){return typeof R=="function"&&(E=R,R=0),j(M,te,R,E);function j(x,se,he,pe,_e){return b(x,se,he,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([j,[x,se,he,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var y=h.readdir;h.readdir=$;var L=/^v[0-5]\./;function $(M,te,R){typeof te=="function"&&(R=te,te=null);var E=L.test(process.version)?function(se,he,pe,_e){return y(se,j(se,he,pe,_e))}:function(se,he,pe,_e){return y(se,he,j(se,he,pe,_e))};return E(M,te,R);function j(x,se,he,pe){return function(_e,ye){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?n([E,[x,se,he],_e,pe||Date.now(),Date.now()]):(ye&&ye.sort&&ye.sort(),typeof he=="function"&&he.call(this,_e,ye))}}}if(process.version.substr(0,4)==="v0.8"){var N=g(h);B=N.ReadStream,W=N.WriteStream}var k=h.ReadStream;k&&(B.prototype=Object.create(k.prototype),B.prototype.open=V);var F=h.WriteStream;F&&(W.prototype=Object.create(F.prototype),W.prototype.open=Z),Object.defineProperty(h,"ReadStream",{get:function(){return B},set:function(M){B=M},enumerable:!0,configurable:!0}),Object.defineProperty(h,"WriteStream",{get:function(){return W},set:function(M){W=M},enumerable:!0,configurable:!0});var I=B;Object.defineProperty(h,"FileReadStream",{get:function(){return I},set:function(M){I=M},enumerable:!0,configurable:!0});var U=W;Object.defineProperty(h,"FileWriteStream",{get:function(){return U},set:function(M){U=M},enumerable:!0,configurable:!0});function B(M,te){return this instanceof B?(k.apply(this,arguments),this):B.apply(Object.create(B.prototype),arguments)}function V(){var M=this;z(M.path,M.flags,M.mode,function(te,R){te?(M.autoClose&&M.destroy(),M.emit("error",te)):(M.fd=R,M.emit("open",R),M.read())})}function W(M,te){return this instanceof W?(F.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function Z(){var M=this;z(M.path,M.flags,M.mode,function(te,R){te?(M.destroy(),M.emit("error",te)):(M.fd=R,M.emit("open",R))})}function ue(M,te){return new h.ReadStream(M,te)}function ie(M,te){return new h.WriteStream(M,te)}var de=h.open;h.open=z;function z(M,te,R,E){return typeof R=="function"&&(E=R,R=null),j(M,te,R,E);function j(x,se,he,pe,_e){return de(x,se,he,function(ye,Ce){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?n([j,[x,se,he,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return h}function n(h){a("ENQUEUE",h[0].name,h[1]),s[c].push(h),v()}var f;function m(){for(var h=Date.now(),_=0;_<s[c].length;++_)s[c][_].length>2&&(s[c][_][3]=h,s[c][_][4]=h);v()}function v(){if(clearTimeout(f),f=void 0,s[c].length!==0){var h=s[c].shift(),_=h[0],A=h[1],C=h[2],O=h[3],T=h[4];if(O===void 0)a("RETRY",_.name,A),_.apply(null,A);else if(Date.now()-O>=6e4){a("TIMEOUT",_.name,A);var D=A.pop();typeof D=="function"&&D.call(null,C)}else{var b=Date.now()-T,w=Math.max(T-O,1),y=Math.min(w*1.2,100);b>=y?(a("RETRY",_.name,A),_.apply(null,A.concat([O]))):s[c].push(h)}f===void 0&&(f=setTimeout(v,0))}}return Ir}var Bo;function Wt(){return Bo||(Bo=1,(function(s){const p=Xe().fromCallback,g=Ye(),d=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(l=>typeof g[l]=="function");Object.assign(s,g),d.forEach(l=>{s[l]=p(g[l])}),s.exists=function(l,c){return typeof c=="function"?g.exists(l,c):new Promise(e=>g.exists(l,e))},s.read=function(l,c,e,o,t,a){return typeof a=="function"?g.read(l,c,e,o,t,a):new Promise((i,r)=>{g.read(l,c,e,o,t,(n,f,m)=>{if(n)return r(n);i({bytesRead:f,buffer:m})})})},s.write=function(l,c,...e){return typeof e[e.length-1]=="function"?g.write(l,c,...e):new Promise((o,t)=>{g.write(l,c,...e,(a,i,r)=>{if(a)return t(a);o({bytesWritten:i,buffer:r})})})},typeof g.writev=="function"&&(s.writev=function(l,c,...e){return typeof e[e.length-1]=="function"?g.writev(l,c,...e):new Promise((o,t)=>{g.writev(l,c,...e,(a,i,r)=>{if(a)return t(a);o({bytesWritten:i,buffers:r})})})}),typeof g.realpath.native=="function"?s.realpath.native=p(g.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(on)),on}var Nr={},un={},jo;function Oc(){if(jo)return un;jo=1;const s=Ne;return un.checkPath=function(g){if(process.platform==="win32"&&/[<>:"|?*]/.test(g.replace(s.parse(g).root,""))){const l=new Error(`Path contains invalid characters: ${g}`);throw l.code="EINVAL",l}},un}var Ho;function Dc(){if(Ho)return Nr;Ho=1;const s=Wt(),{checkPath:p}=Oc(),g=d=>{const l={mode:511};return typeof d=="number"?d:{...l,...d}.mode};return Nr.makeDir=async(d,l)=>(p(d),s.mkdir(d,{mode:g(l),recursive:!0})),Nr.makeDirSync=(d,l)=>(p(d),s.mkdirSync(d,{mode:g(l),recursive:!0})),Nr}var cn,Go;function st(){if(Go)return cn;Go=1;const s=Xe().fromPromise,{makeDir:p,makeDirSync:g}=Dc(),d=s(p);return cn={mkdirs:d,mkdirsSync:g,mkdirp:d,mkdirpSync:g,ensureDir:d,ensureDirSync:g},cn}var fn,Wo;function xt(){if(Wo)return fn;Wo=1;const s=Xe().fromPromise,p=Wt();function g(d){return p.access(d).then(()=>!0).catch(()=>!1)}return fn={pathExists:s(g),pathExistsSync:p.existsSync},fn}var dn,Vo;function Gl(){if(Vo)return dn;Vo=1;const s=Ye();function p(d,l,c,e){s.open(d,"r+",(o,t)=>{if(o)return e(o);s.futimes(t,l,c,a=>{s.close(t,i=>{e&&e(a||i)})})})}function g(d,l,c){const e=s.openSync(d,"r+");return s.futimesSync(e,l,c),s.closeSync(e)}return dn={utimesMillis:p,utimesMillisSync:g},dn}var hn,Yo;function Vt(){if(Yo)return hn;Yo=1;const s=Wt(),p=Ne,g=oo;function d(n,f,m){const v=m.dereference?h=>s.stat(h,{bigint:!0}):h=>s.lstat(h,{bigint:!0});return Promise.all([v(n),v(f).catch(h=>{if(h.code==="ENOENT")return null;throw h})]).then(([h,_])=>({srcStat:h,destStat:_}))}function l(n,f,m){let v;const h=m.dereference?A=>s.statSync(A,{bigint:!0}):A=>s.lstatSync(A,{bigint:!0}),_=h(n);try{v=h(f)}catch(A){if(A.code==="ENOENT")return{srcStat:_,destStat:null};throw A}return{srcStat:_,destStat:v}}function c(n,f,m,v,h){g.callbackify(d)(n,f,v,(_,A)=>{if(_)return h(_);const{srcStat:C,destStat:O}=A;if(O){if(a(C,O)){const T=p.basename(n),D=p.basename(f);return m==="move"&&T!==D&&T.toLowerCase()===D.toLowerCase()?h(null,{srcStat:C,destStat:O,isChangingCase:!0}):h(new Error("Source and destination must not be the same."))}if(C.isDirectory()&&!O.isDirectory())return h(new Error(`Cannot overwrite non-directory '${f}' with directory '${n}'.`));if(!C.isDirectory()&&O.isDirectory())return h(new Error(`Cannot overwrite directory '${f}' with non-directory '${n}'.`))}return C.isDirectory()&&i(n,f)?h(new Error(r(n,f,m))):h(null,{srcStat:C,destStat:O})})}function e(n,f,m,v){const{srcStat:h,destStat:_}=l(n,f,v);if(_){if(a(h,_)){const A=p.basename(n),C=p.basename(f);if(m==="move"&&A!==C&&A.toLowerCase()===C.toLowerCase())return{srcStat:h,destStat:_,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(h.isDirectory()&&!_.isDirectory())throw new Error(`Cannot overwrite non-directory '${f}' with directory '${n}'.`);if(!h.isDirectory()&&_.isDirectory())throw new Error(`Cannot overwrite directory '${f}' with non-directory '${n}'.`)}if(h.isDirectory()&&i(n,f))throw new Error(r(n,f,m));return{srcStat:h,destStat:_}}function o(n,f,m,v,h){const _=p.resolve(p.dirname(n)),A=p.resolve(p.dirname(m));if(A===_||A===p.parse(A).root)return h();s.stat(A,{bigint:!0},(C,O)=>C?C.code==="ENOENT"?h():h(C):a(f,O)?h(new Error(r(n,m,v))):o(n,f,A,v,h))}function t(n,f,m,v){const h=p.resolve(p.dirname(n)),_=p.resolve(p.dirname(m));if(_===h||_===p.parse(_).root)return;let A;try{A=s.statSync(_,{bigint:!0})}catch(C){if(C.code==="ENOENT")return;throw C}if(a(f,A))throw new Error(r(n,m,v));return t(n,f,_,v)}function a(n,f){return f.ino&&f.dev&&f.ino===n.ino&&f.dev===n.dev}function i(n,f){const m=p.resolve(n).split(p.sep).filter(h=>h),v=p.resolve(f).split(p.sep).filter(h=>h);return m.reduce((h,_,A)=>h&&v[A]===_,!0)}function r(n,f,m){return`Cannot ${m} '${n}' to a subdirectory of itself, '${f}'.`}return hn={checkPaths:c,checkPathsSync:e,checkParentPaths:o,checkParentPathsSync:t,isSrcSubdir:i,areIdentical:a},hn}var pn,zo;function Ic(){if(zo)return pn;zo=1;const s=Ye(),p=Ne,g=st().mkdirs,d=xt().pathExists,l=Gl().utimesMillis,c=Vt();function e($,N,k,F){typeof k=="function"&&!F?(F=k,k={}):typeof k=="function"&&(k={filter:k}),F=F||function(){},k=k||{},k.clobber="clobber"in k?!!k.clobber:!0,k.overwrite="overwrite"in k?!!k.overwrite:k.clobber,k.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),c.checkPaths($,N,"copy",k,(I,U)=>{if(I)return F(I);const{srcStat:B,destStat:V}=U;c.checkParentPaths($,B,N,"copy",W=>W?F(W):k.filter?t(o,V,$,N,k,F):o(V,$,N,k,F))})}function o($,N,k,F,I){const U=p.dirname(k);d(U,(B,V)=>{if(B)return I(B);if(V)return i($,N,k,F,I);g(U,W=>W?I(W):i($,N,k,F,I))})}function t($,N,k,F,I,U){Promise.resolve(I.filter(k,F)).then(B=>B?$(N,k,F,I,U):U(),B=>U(B))}function a($,N,k,F,I){return F.filter?t(i,$,N,k,F,I):i($,N,k,F,I)}function i($,N,k,F,I){(F.dereference?s.stat:s.lstat)(N,(B,V)=>B?I(B):V.isDirectory()?O(V,$,N,k,F,I):V.isFile()||V.isCharacterDevice()||V.isBlockDevice()?r(V,$,N,k,F,I):V.isSymbolicLink()?y($,N,k,F,I):V.isSocket()?I(new Error(`Cannot copy a socket file: ${N}`)):V.isFIFO()?I(new Error(`Cannot copy a FIFO pipe: ${N}`)):I(new Error(`Unknown file: ${N}`)))}function r($,N,k,F,I,U){return N?n($,k,F,I,U):f($,k,F,I,U)}function n($,N,k,F,I){if(F.overwrite)s.unlink(k,U=>U?I(U):f($,N,k,F,I));else return F.errorOnExist?I(new Error(`'${k}' already exists`)):I()}function f($,N,k,F,I){s.copyFile(N,k,U=>U?I(U):F.preserveTimestamps?m($.mode,N,k,I):A(k,$.mode,I))}function m($,N,k,F){return v($)?h(k,$,I=>I?F(I):_($,N,k,F)):_($,N,k,F)}function v($){return($&128)===0}function h($,N,k){return A($,N|128,k)}function _($,N,k,F){C(N,k,I=>I?F(I):A(k,$,F))}function A($,N,k){return s.chmod($,N,k)}function C($,N,k){s.stat($,(F,I)=>F?k(F):l(N,I.atime,I.mtime,k))}function O($,N,k,F,I,U){return N?D(k,F,I,U):T($.mode,k,F,I,U)}function T($,N,k,F,I){s.mkdir(k,U=>{if(U)return I(U);D(N,k,F,B=>B?I(B):A(k,$,I))})}function D($,N,k,F){s.readdir($,(I,U)=>I?F(I):b(U,$,N,k,F))}function b($,N,k,F,I){const U=$.pop();return U?w($,U,N,k,F,I):I()}function w($,N,k,F,I,U){const B=p.join(k,N),V=p.join(F,N);c.checkPaths(B,V,"copy",I,(W,Z)=>{if(W)return U(W);const{destStat:ue}=Z;a(ue,B,V,I,ie=>ie?U(ie):b($,k,F,I,U))})}function y($,N,k,F,I){s.readlink(N,(U,B)=>{if(U)return I(U);if(F.dereference&&(B=p.resolve(process.cwd(),B)),$)s.readlink(k,(V,W)=>V?V.code==="EINVAL"||V.code==="UNKNOWN"?s.symlink(B,k,I):I(V):(F.dereference&&(W=p.resolve(process.cwd(),W)),c.isSrcSubdir(B,W)?I(new Error(`Cannot copy '${B}' to a subdirectory of itself, '${W}'.`)):$.isDirectory()&&c.isSrcSubdir(W,B)?I(new Error(`Cannot overwrite '${W}' with '${B}'.`)):L(B,k,I)));else return s.symlink(B,k,I)})}function L($,N,k){s.unlink(N,F=>F?k(F):s.symlink($,N,k))}return pn=e,pn}var mn,Xo;function Nc(){if(Xo)return mn;Xo=1;const s=Ye(),p=Ne,g=st().mkdirsSync,d=Gl().utimesMillisSync,l=Vt();function c(b,w,y){typeof y=="function"&&(y={filter:y}),y=y||{},y.clobber="clobber"in y?!!y.clobber:!0,y.overwrite="overwrite"in y?!!y.overwrite:y.clobber,y.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:L,destStat:$}=l.checkPathsSync(b,w,"copy",y);return l.checkParentPathsSync(b,L,w,"copy"),e($,b,w,y)}function e(b,w,y,L){if(L.filter&&!L.filter(w,y))return;const $=p.dirname(y);return s.existsSync($)||g($),t(b,w,y,L)}function o(b,w,y,L){if(!(L.filter&&!L.filter(w,y)))return t(b,w,y,L)}function t(b,w,y,L){const N=(L.dereference?s.statSync:s.lstatSync)(w);if(N.isDirectory())return _(N,b,w,y,L);if(N.isFile()||N.isCharacterDevice()||N.isBlockDevice())return a(N,b,w,y,L);if(N.isSymbolicLink())return T(b,w,y,L);throw N.isSocket()?new Error(`Cannot copy a socket file: ${w}`):N.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${w}`):new Error(`Unknown file: ${w}`)}function a(b,w,y,L,$){return w?i(b,y,L,$):r(b,y,L,$)}function i(b,w,y,L){if(L.overwrite)return s.unlinkSync(y),r(b,w,y,L);if(L.errorOnExist)throw new Error(`'${y}' already exists`)}function r(b,w,y,L){return s.copyFileSync(w,y),L.preserveTimestamps&&n(b.mode,w,y),v(y,b.mode)}function n(b,w,y){return f(b)&&m(y,b),h(w,y)}function f(b){return(b&128)===0}function m(b,w){return v(b,w|128)}function v(b,w){return s.chmodSync(b,w)}function h(b,w){const y=s.statSync(b);return d(w,y.atime,y.mtime)}function _(b,w,y,L,$){return w?C(y,L,$):A(b.mode,y,L,$)}function A(b,w,y,L){return s.mkdirSync(y),C(w,y,L),v(y,b)}function C(b,w,y){s.readdirSync(b).forEach(L=>O(L,b,w,y))}function O(b,w,y,L){const $=p.join(w,b),N=p.join(y,b),{destStat:k}=l.checkPathsSync($,N,"copy",L);return o(k,$,N,L)}function T(b,w,y,L){let $=s.readlinkSync(w);if(L.dereference&&($=p.resolve(process.cwd(),$)),b){let N;try{N=s.readlinkSync(y)}catch(k){if(k.code==="EINVAL"||k.code==="UNKNOWN")return s.symlinkSync($,y);throw k}if(L.dereference&&(N=p.resolve(process.cwd(),N)),l.isSrcSubdir($,N))throw new Error(`Cannot copy '${$}' to a subdirectory of itself, '${N}'.`);if(s.statSync(y).isDirectory()&&l.isSrcSubdir(N,$))throw new Error(`Cannot overwrite '${N}' with '${$}'.`);return D($,y)}else return s.symlinkSync($,y)}function D(b,w){return s.unlinkSync(w),s.symlinkSync(b,w)}return mn=c,mn}var gn,Ko;function ao(){if(Ko)return gn;Ko=1;const s=Xe().fromCallback;return gn={copy:s(Ic()),copySync:Nc()},gn}var vn,Jo;function xc(){if(Jo)return vn;Jo=1;const s=Ye(),p=Ne,g=Ml,d=process.platform==="win32";function l(m){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(h=>{m[h]=m[h]||s[h],h=h+"Sync",m[h]=m[h]||s[h]}),m.maxBusyTries=m.maxBusyTries||3}function c(m,v,h){let _=0;typeof v=="function"&&(h=v,v={}),g(m,"rimraf: missing path"),g.strictEqual(typeof m,"string","rimraf: path should be a string"),g.strictEqual(typeof h,"function","rimraf: callback function required"),g(v,"rimraf: invalid options argument provided"),g.strictEqual(typeof v,"object","rimraf: options should be object"),l(v),e(m,v,function A(C){if(C){if((C.code==="EBUSY"||C.code==="ENOTEMPTY"||C.code==="EPERM")&&_<v.maxBusyTries){_++;const O=_*100;return setTimeout(()=>e(m,v,A),O)}C.code==="ENOENT"&&(C=null)}h(C)})}function e(m,v,h){g(m),g(v),g(typeof h=="function"),v.lstat(m,(_,A)=>{if(_&&_.code==="ENOENT")return h(null);if(_&&_.code==="EPERM"&&d)return o(m,v,_,h);if(A&&A.isDirectory())return a(m,v,_,h);v.unlink(m,C=>{if(C){if(C.code==="ENOENT")return h(null);if(C.code==="EPERM")return d?o(m,v,C,h):a(m,v,C,h);if(C.code==="EISDIR")return a(m,v,C,h)}return h(C)})})}function o(m,v,h,_){g(m),g(v),g(typeof _=="function"),v.chmod(m,438,A=>{A?_(A.code==="ENOENT"?null:h):v.stat(m,(C,O)=>{C?_(C.code==="ENOENT"?null:h):O.isDirectory()?a(m,v,h,_):v.unlink(m,_)})})}function t(m,v,h){let _;g(m),g(v);try{v.chmodSync(m,438)}catch(A){if(A.code==="ENOENT")return;throw h}try{_=v.statSync(m)}catch(A){if(A.code==="ENOENT")return;throw h}_.isDirectory()?n(m,v,h):v.unlinkSync(m)}function a(m,v,h,_){g(m),g(v),g(typeof _=="function"),v.rmdir(m,A=>{A&&(A.code==="ENOTEMPTY"||A.code==="EEXIST"||A.code==="EPERM")?i(m,v,_):A&&A.code==="ENOTDIR"?_(h):_(A)})}function i(m,v,h){g(m),g(v),g(typeof h=="function"),v.readdir(m,(_,A)=>{if(_)return h(_);let C=A.length,O;if(C===0)return v.rmdir(m,h);A.forEach(T=>{c(p.join(m,T),v,D=>{if(!O){if(D)return h(O=D);--C===0&&v.rmdir(m,h)}})})})}function r(m,v){let h;v=v||{},l(v),g(m,"rimraf: missing path"),g.strictEqual(typeof m,"string","rimraf: path should be a string"),g(v,"rimraf: missing options"),g.strictEqual(typeof v,"object","rimraf: options should be object");try{h=v.lstatSync(m)}catch(_){if(_.code==="ENOENT")return;_.code==="EPERM"&&d&&t(m,v,_)}try{h&&h.isDirectory()?n(m,v,null):v.unlinkSync(m)}catch(_){if(_.code==="ENOENT")return;if(_.code==="EPERM")return d?t(m,v,_):n(m,v,_);if(_.code!=="EISDIR")throw _;n(m,v,_)}}function n(m,v,h){g(m),g(v);try{v.rmdirSync(m)}catch(_){if(_.code==="ENOTDIR")throw h;if(_.code==="ENOTEMPTY"||_.code==="EEXIST"||_.code==="EPERM")f(m,v);else if(_.code!=="ENOENT")throw _}}function f(m,v){if(g(m),g(v),v.readdirSync(m).forEach(h=>r(p.join(m,h),v)),d){const h=Date.now();do try{return v.rmdirSync(m,v)}catch{}while(Date.now()-h<500)}else return v.rmdirSync(m,v)}return vn=c,c.sync=r,vn}var yn,Qo;function zr(){if(Qo)return yn;Qo=1;const s=Ye(),p=Xe().fromCallback,g=xc();function d(c,e){if(s.rm)return s.rm(c,{recursive:!0,force:!0},e);g(c,e)}function l(c){if(s.rmSync)return s.rmSync(c,{recursive:!0,force:!0});g.sync(c)}return yn={remove:p(d),removeSync:l},yn}var En,Zo;function Fc(){if(Zo)return En;Zo=1;const s=Xe().fromPromise,p=Wt(),g=Ne,d=st(),l=zr(),c=s(async function(t){let a;try{a=await p.readdir(t)}catch{return d.mkdirs(t)}return Promise.all(a.map(i=>l.remove(g.join(t,i))))});function e(o){let t;try{t=p.readdirSync(o)}catch{return d.mkdirsSync(o)}t.forEach(a=>{a=g.join(o,a),l.removeSync(a)})}return En={emptyDirSync:e,emptydirSync:e,emptyDir:c,emptydir:c},En}var wn,ea;function Lc(){if(ea)return wn;ea=1;const s=Xe().fromCallback,p=Ne,g=Ye(),d=st();function l(e,o){function t(){g.writeFile(e,"",a=>{if(a)return o(a);o()})}g.stat(e,(a,i)=>{if(!a&&i.isFile())return o();const r=p.dirname(e);g.stat(r,(n,f)=>{if(n)return n.code==="ENOENT"?d.mkdirs(r,m=>{if(m)return o(m);t()}):o(n);f.isDirectory()?t():g.readdir(r,m=>{if(m)return o(m)})})})}function c(e){let o;try{o=g.statSync(e)}catch{}if(o&&o.isFile())return;const t=p.dirname(e);try{g.statSync(t).isDirectory()||g.readdirSync(t)}catch(a){if(a&&a.code==="ENOENT")d.mkdirsSync(t);else throw a}g.writeFileSync(e,"")}return wn={createFile:s(l),createFileSync:c},wn}var _n,ta;function Uc(){if(ta)return _n;ta=1;const s=Xe().fromCallback,p=Ne,g=Ye(),d=st(),l=xt().pathExists,{areIdentical:c}=Vt();function e(t,a,i){function r(n,f){g.link(n,f,m=>{if(m)return i(m);i(null)})}g.lstat(a,(n,f)=>{g.lstat(t,(m,v)=>{if(m)return m.message=m.message.replace("lstat","ensureLink"),i(m);if(f&&c(v,f))return i(null);const h=p.dirname(a);l(h,(_,A)=>{if(_)return i(_);if(A)return r(t,a);d.mkdirs(h,C=>{if(C)return i(C);r(t,a)})})})})}function o(t,a){let i;try{i=g.lstatSync(a)}catch{}try{const f=g.lstatSync(t);if(i&&c(f,i))return}catch(f){throw f.message=f.message.replace("lstat","ensureLink"),f}const r=p.dirname(a);return g.existsSync(r)||d.mkdirsSync(r),g.linkSync(t,a)}return _n={createLink:s(e),createLinkSync:o},_n}var Rn,ra;function $c(){if(ra)return Rn;ra=1;const s=Ne,p=Ye(),g=xt().pathExists;function d(c,e,o){if(s.isAbsolute(c))return p.lstat(c,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),o(t)):o(null,{toCwd:c,toDst:c}));{const t=s.dirname(e),a=s.join(t,c);return g(a,(i,r)=>i?o(i):r?o(null,{toCwd:a,toDst:c}):p.lstat(c,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),o(n)):o(null,{toCwd:c,toDst:s.relative(t,c)})))}}function l(c,e){let o;if(s.isAbsolute(c)){if(o=p.existsSync(c),!o)throw new Error("absolute srcpath does not exist");return{toCwd:c,toDst:c}}else{const t=s.dirname(e),a=s.join(t,c);if(o=p.existsSync(a),o)return{toCwd:a,toDst:c};if(o=p.existsSync(c),!o)throw new Error("relative srcpath does not exist");return{toCwd:c,toDst:s.relative(t,c)}}}return Rn={symlinkPaths:d,symlinkPathsSync:l},Rn}var Sn,na;function kc(){if(na)return Sn;na=1;const s=Ye();function p(d,l,c){if(c=typeof l=="function"?l:c,l=typeof l=="function"?!1:l,l)return c(null,l);s.lstat(d,(e,o)=>{if(e)return c(null,"file");l=o&&o.isDirectory()?"dir":"file",c(null,l)})}function g(d,l){let c;if(l)return l;try{c=s.lstatSync(d)}catch{return"file"}return c&&c.isDirectory()?"dir":"file"}return Sn={symlinkType:p,symlinkTypeSync:g},Sn}var An,ia;function qc(){if(ia)return An;ia=1;const s=Xe().fromCallback,p=Ne,g=Wt(),d=st(),l=d.mkdirs,c=d.mkdirsSync,e=$c(),o=e.symlinkPaths,t=e.symlinkPathsSync,a=kc(),i=a.symlinkType,r=a.symlinkTypeSync,n=xt().pathExists,{areIdentical:f}=Vt();function m(_,A,C,O){O=typeof C=="function"?C:O,C=typeof C=="function"?!1:C,g.lstat(A,(T,D)=>{!T&&D.isSymbolicLink()?Promise.all([g.stat(_),g.stat(A)]).then(([b,w])=>{if(f(b,w))return O(null);v(_,A,C,O)}):v(_,A,C,O)})}function v(_,A,C,O){o(_,A,(T,D)=>{if(T)return O(T);_=D.toDst,i(D.toCwd,C,(b,w)=>{if(b)return O(b);const y=p.dirname(A);n(y,(L,$)=>{if(L)return O(L);if($)return g.symlink(_,A,w,O);l(y,N=>{if(N)return O(N);g.symlink(_,A,w,O)})})})})}function h(_,A,C){let O;try{O=g.lstatSync(A)}catch{}if(O&&O.isSymbolicLink()){const w=g.statSync(_),y=g.statSync(A);if(f(w,y))return}const T=t(_,A);_=T.toDst,C=r(T.toCwd,C);const D=p.dirname(A);return g.existsSync(D)||c(D),g.symlinkSync(_,A,C)}return An={createSymlink:s(m),createSymlinkSync:h},An}var Tn,oa;function Mc(){if(oa)return Tn;oa=1;const{createFile:s,createFileSync:p}=Lc(),{createLink:g,createLinkSync:d}=Uc(),{createSymlink:l,createSymlinkSync:c}=qc();return Tn={createFile:s,createFileSync:p,ensureFile:s,ensureFileSync:p,createLink:g,createLinkSync:d,ensureLink:g,ensureLinkSync:d,createSymlink:l,createSymlinkSync:c,ensureSymlink:l,ensureSymlinkSync:c},Tn}var bn,aa;function so(){if(aa)return bn;aa=1;function s(g,{EOL:d=`
`,finalEOL:l=!0,replacer:c=null,spaces:e}={}){const o=l?d:"";return JSON.stringify(g,c,e).replace(/\n/g,d)+o}function p(g){return Buffer.isBuffer(g)&&(g=g.toString("utf8")),g.replace(/^\uFEFF/,"")}return bn={stringify:s,stripBom:p},bn}var Cn,sa;function Bc(){if(sa)return Cn;sa=1;let s;try{s=Ye()}catch{s=Et}const p=Xe(),{stringify:g,stripBom:d}=so();async function l(i,r={}){typeof r=="string"&&(r={encoding:r});const n=r.fs||s,f="throws"in r?r.throws:!0;let m=await p.fromCallback(n.readFile)(i,r);m=d(m);let v;try{v=JSON.parse(m,r?r.reviver:null)}catch(h){if(f)throw h.message=`${i}: ${h.message}`,h;return null}return v}const c=p.fromPromise(l);function e(i,r={}){typeof r=="string"&&(r={encoding:r});const n=r.fs||s,f="throws"in r?r.throws:!0;try{let m=n.readFileSync(i,r);return m=d(m),JSON.parse(m,r.reviver)}catch(m){if(f)throw m.message=`${i}: ${m.message}`,m;return null}}async function o(i,r,n={}){const f=n.fs||s,m=g(r,n);await p.fromCallback(f.writeFile)(i,m,n)}const t=p.fromPromise(o);function a(i,r,n={}){const f=n.fs||s,m=g(r,n);return f.writeFileSync(i,m,n)}return Cn={readFile:c,readFileSync:e,writeFile:t,writeFileSync:a},Cn}var Pn,la;function jc(){if(la)return Pn;la=1;const s=Bc();return Pn={readJson:s.readFile,readJsonSync:s.readFileSync,writeJson:s.writeFile,writeJsonSync:s.writeFileSync},Pn}var On,ua;function lo(){if(ua)return On;ua=1;const s=Xe().fromCallback,p=Ye(),g=Ne,d=st(),l=xt().pathExists;function c(o,t,a,i){typeof a=="function"&&(i=a,a="utf8");const r=g.dirname(o);l(r,(n,f)=>{if(n)return i(n);if(f)return p.writeFile(o,t,a,i);d.mkdirs(r,m=>{if(m)return i(m);p.writeFile(o,t,a,i)})})}function e(o,...t){const a=g.dirname(o);if(p.existsSync(a))return p.writeFileSync(o,...t);d.mkdirsSync(a),p.writeFileSync(o,...t)}return On={outputFile:s(c),outputFileSync:e},On}var Dn,ca;function Hc(){if(ca)return Dn;ca=1;const{stringify:s}=so(),{outputFile:p}=lo();async function g(d,l,c={}){const e=s(l,c);await p(d,e,c)}return Dn=g,Dn}var In,fa;function Gc(){if(fa)return In;fa=1;const{stringify:s}=so(),{outputFileSync:p}=lo();function g(d,l,c){const e=s(l,c);p(d,e,c)}return In=g,In}var Nn,da;function Wc(){if(da)return Nn;da=1;const s=Xe().fromPromise,p=jc();return p.outputJson=s(Hc()),p.outputJsonSync=Gc(),p.outputJSON=p.outputJson,p.outputJSONSync=p.outputJsonSync,p.writeJSON=p.writeJson,p.writeJSONSync=p.writeJsonSync,p.readJSON=p.readJson,p.readJSONSync=p.readJsonSync,Nn=p,Nn}var xn,ha;function Vc(){if(ha)return xn;ha=1;const s=Ye(),p=Ne,g=ao().copy,d=zr().remove,l=st().mkdirp,c=xt().pathExists,e=Vt();function o(n,f,m,v){typeof m=="function"&&(v=m,m={}),m=m||{};const h=m.overwrite||m.clobber||!1;e.checkPaths(n,f,"move",m,(_,A)=>{if(_)return v(_);const{srcStat:C,isChangingCase:O=!1}=A;e.checkParentPaths(n,C,f,"move",T=>{if(T)return v(T);if(t(f))return a(n,f,h,O,v);l(p.dirname(f),D=>D?v(D):a(n,f,h,O,v))})})}function t(n){const f=p.dirname(n);return p.parse(f).root===f}function a(n,f,m,v,h){if(v)return i(n,f,m,h);if(m)return d(f,_=>_?h(_):i(n,f,m,h));c(f,(_,A)=>_?h(_):A?h(new Error("dest already exists.")):i(n,f,m,h))}function i(n,f,m,v){s.rename(n,f,h=>h?h.code!=="EXDEV"?v(h):r(n,f,m,v):v())}function r(n,f,m,v){g(n,f,{overwrite:m,errorOnExist:!0},_=>_?v(_):d(n,v))}return xn=o,xn}var Fn,pa;function Yc(){if(pa)return Fn;pa=1;const s=Ye(),p=Ne,g=ao().copySync,d=zr().removeSync,l=st().mkdirpSync,c=Vt();function e(r,n,f){f=f||{};const m=f.overwrite||f.clobber||!1,{srcStat:v,isChangingCase:h=!1}=c.checkPathsSync(r,n,"move",f);return c.checkParentPathsSync(r,v,n,"move"),o(n)||l(p.dirname(n)),t(r,n,m,h)}function o(r){const n=p.dirname(r);return p.parse(n).root===n}function t(r,n,f,m){if(m)return a(r,n,f);if(f)return d(n),a(r,n,f);if(s.existsSync(n))throw new Error("dest already exists.");return a(r,n,f)}function a(r,n,f){try{s.renameSync(r,n)}catch(m){if(m.code!=="EXDEV")throw m;return i(r,n,f)}}function i(r,n,f){return g(r,n,{overwrite:f,errorOnExist:!0}),d(r)}return Fn=e,Fn}var Ln,ma;function zc(){if(ma)return Ln;ma=1;const s=Xe().fromCallback;return Ln={move:s(Vc()),moveSync:Yc()},Ln}var Un,ga;function _t(){return ga||(ga=1,Un={...Wt(),...ao(),...Fc(),...Mc(),...Wc(),...st(),...zc(),...lo(),...xt(),...zr()}),Un}var Kt={},Ot={},$n={},Dt={},va;function uo(){if(va)return Dt;va=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.CancellationError=Dt.CancellationToken=void 0;const s=Bl;let p=class extends s.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(l){this.removeParentCancelHandler(),this._parent=l,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(l){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,l!=null&&(this.parent=l)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(l){this.cancelled?l():this.once("cancel",l)}createPromise(l){if(this.cancelled)return Promise.reject(new g);const c=()=>{if(e!=null)try{this.removeListener("cancel",e),e=null}catch{}};let e=null;return new Promise((o,t)=>{let a=null;if(e=()=>{try{a!=null&&(a(),a=null)}finally{t(new g)}},this.cancelled){e();return}this.onCancel(e),l(o,t,i=>{a=i})}).then(o=>(c(),o)).catch(o=>{throw c(),o})}removeParentCancelHandler(){const l=this._parent;l!=null&&this.parentCancelHandler!=null&&(l.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};Dt.CancellationToken=p;class g extends Error{constructor(){super("cancelled")}}return Dt.CancellationError=g,Dt}var xr={},ya;function Xr(){if(ya)return xr;ya=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.newError=s;function s(p,g){const d=new Error(p);return d.code=g,d}return xr}var He={},Fr={exports:{}},Lr={exports:{}},kn,Ea;function Xc(){if(Ea)return kn;Ea=1;var s=1e3,p=s*60,g=p*60,d=g*24,l=d*7,c=d*365.25;kn=function(i,r){r=r||{};var n=typeof i;if(n==="string"&&i.length>0)return e(i);if(n==="number"&&isFinite(i))return r.long?t(i):o(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function e(i){if(i=String(i),!(i.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(r){var n=parseFloat(r[1]),f=(r[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"weeks":case"week":case"w":return n*l;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*g;case"minutes":case"minute":case"mins":case"min":case"m":return n*p;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function o(i){var r=Math.abs(i);return r>=d?Math.round(i/d)+"d":r>=g?Math.round(i/g)+"h":r>=p?Math.round(i/p)+"m":r>=s?Math.round(i/s)+"s":i+"ms"}function t(i){var r=Math.abs(i);return r>=d?a(i,r,d,"day"):r>=g?a(i,r,g,"hour"):r>=p?a(i,r,p,"minute"):r>=s?a(i,r,s,"second"):i+" ms"}function a(i,r,n,f){var m=r>=n*1.5;return Math.round(i/n)+" "+f+(m?"s":"")}return kn}var qn,wa;function Wl(){if(wa)return qn;wa=1;function s(p){d.debug=d,d.default=d,d.coerce=a,d.disable=o,d.enable=c,d.enabled=t,d.humanize=Xc(),d.destroy=i,Object.keys(p).forEach(r=>{d[r]=p[r]}),d.names=[],d.skips=[],d.formatters={};function g(r){let n=0;for(let f=0;f<r.length;f++)n=(n<<5)-n+r.charCodeAt(f),n|=0;return d.colors[Math.abs(n)%d.colors.length]}d.selectColor=g;function d(r){let n,f=null,m,v;function h(..._){if(!h.enabled)return;const A=h,C=Number(new Date),O=C-(n||C);A.diff=O,A.prev=n,A.curr=C,n=C,_[0]=d.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let T=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(b,w)=>{if(b==="%%")return"%";T++;const y=d.formatters[w];if(typeof y=="function"){const L=_[T];b=y.call(A,L),_.splice(T,1),T--}return b}),d.formatArgs.call(A,_),(A.log||d.log).apply(A,_)}return h.namespace=r,h.useColors=d.useColors(),h.color=d.selectColor(r),h.extend=l,h.destroy=d.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(m!==d.namespaces&&(m=d.namespaces,v=d.enabled(r)),v),set:_=>{f=_}}),typeof d.init=="function"&&d.init(h),h}function l(r,n){const f=d(this.namespace+(typeof n>"u"?":":n)+r);return f.log=this.log,f}function c(r){d.save(r),d.namespaces=r,d.names=[],d.skips=[];const n=(typeof r=="string"?r:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of n)f[0]==="-"?d.skips.push(f.slice(1)):d.names.push(f)}function e(r,n){let f=0,m=0,v=-1,h=0;for(;f<r.length;)if(m<n.length&&(n[m]===r[f]||n[m]==="*"))n[m]==="*"?(v=m,h=f,m++):(f++,m++);else if(v!==-1)m=v+1,h++,f=h;else return!1;for(;m<n.length&&n[m]==="*";)m++;return m===n.length}function o(){const r=[...d.names,...d.skips.map(n=>"-"+n)].join(",");return d.enable(""),r}function t(r){for(const n of d.skips)if(e(r,n))return!1;for(const n of d.names)if(e(r,n))return!0;return!1}function a(r){return r instanceof Error?r.stack||r.message:r}function i(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return d.enable(d.load()),d}return qn=s,qn}var _a;function Kc(){return _a||(_a=1,(function(s,p){p.formatArgs=d,p.save=l,p.load=c,p.useColors=g,p.storage=e(),p.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),p.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function g(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function d(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;t.splice(1,0,a,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(i++,n==="%c"&&(r=i))}),t.splice(r,0,a)}p.log=console.debug||console.log||(()=>{});function l(t){try{t?p.storage.setItem("debug",t):p.storage.removeItem("debug")}catch{}}function c(){let t;try{t=p.storage.getItem("debug")||p.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function e(){try{return localStorage}catch{}}s.exports=Wl()(p);const{formatters:o}=s.exports;o.j=function(t){try{return JSON.stringify(t)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}})(Lr,Lr.exports)),Lr.exports}var Ur={exports:{}},Mn,Ra;function Jc(){return Ra||(Ra=1,Mn=(s,p=process.argv)=>{const g=s.startsWith("-")?"":s.length===1?"-":"--",d=p.indexOf(g+s),l=p.indexOf("--");return d!==-1&&(l===-1||d<l)}),Mn}var Bn,Sa;function Qc(){if(Sa)return Bn;Sa=1;const s=Yr,p=jl,g=Jc(),{env:d}=process;let l;g("no-color")||g("no-colors")||g("color=false")||g("color=never")?l=0:(g("color")||g("colors")||g("color=true")||g("color=always"))&&(l=1),"FORCE_COLOR"in d&&(d.FORCE_COLOR==="true"?l=1:d.FORCE_COLOR==="false"?l=0:l=d.FORCE_COLOR.length===0?1:Math.min(parseInt(d.FORCE_COLOR,10),3));function c(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function e(t,a){if(l===0)return 0;if(g("color=16m")||g("color=full")||g("color=truecolor"))return 3;if(g("color=256"))return 2;if(t&&!a&&l===void 0)return 0;const i=l||0;if(d.TERM==="dumb")return i;if(process.platform==="win32"){const r=s.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in d)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in d)||d.CI_NAME==="codeship"?1:i;if("TEAMCITY_VERSION"in d)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(d.TEAMCITY_VERSION)?1:0;if(d.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in d){const r=parseInt((d.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(d.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(d.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(d.TERM)||"COLORTERM"in d?1:i}function o(t){const a=e(t,t&&t.isTTY);return c(a)}return Bn={supportsColor:o,stdout:c(e(!0,p.isatty(1))),stderr:c(e(!0,p.isatty(2)))},Bn}var Aa;function Zc(){return Aa||(Aa=1,(function(s,p){const g=jl,d=oo;p.init=i,p.log=o,p.formatArgs=c,p.save=t,p.load=a,p.useColors=l,p.destroy=d.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),p.colors=[6,2,3,4,5,1];try{const n=Qc();n&&(n.stderr||n).level>=2&&(p.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}p.inspectOpts=Object.keys(process.env).filter(n=>/^debug_/i.test(n)).reduce((n,f)=>{const m=f.substring(6).toLowerCase().replace(/_([a-z])/g,(h,_)=>_.toUpperCase());let v=process.env[f];return/^(yes|on|true|enabled)$/i.test(v)?v=!0:/^(no|off|false|disabled)$/i.test(v)?v=!1:v==="null"?v=null:v=Number(v),n[m]=v,n},{});function l(){return"colors"in p.inspectOpts?!!p.inspectOpts.colors:g.isatty(process.stderr.fd)}function c(n){const{namespace:f,useColors:m}=this;if(m){const v=this.color,h="\x1B[3"+(v<8?v:"8;5;"+v),_=`  ${h};1m${f} \x1B[0m`;n[0]=_+n[0].split(`
`).join(`
`+_),n.push(h+"m+"+s.exports.humanize(this.diff)+"\x1B[0m")}else n[0]=e()+f+" "+n[0]}function e(){return p.inspectOpts.hideDate?"":new Date().toISOString()+" "}function o(...n){return process.stderr.write(d.formatWithOptions(p.inspectOpts,...n)+`
`)}function t(n){n?process.env.DEBUG=n:delete process.env.DEBUG}function a(){return process.env.DEBUG}function i(n){n.inspectOpts={};const f=Object.keys(p.inspectOpts);for(let m=0;m<f.length;m++)n.inspectOpts[f[m]]=p.inspectOpts[f[m]]}s.exports=Wl()(p);const{formatters:r}=s.exports;r.o=function(n){return this.inspectOpts.colors=this.useColors,d.inspect(n,this.inspectOpts).split(`
`).map(f=>f.trim()).join(" ")},r.O=function(n){return this.inspectOpts.colors=this.useColors,d.inspect(n,this.inspectOpts)}})(Ur,Ur.exports)),Ur.exports}var Ta;function ef(){return Ta||(Ta=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Fr.exports=Kc():Fr.exports=Zc()),Fr.exports}var Jt={},ba;function Vl(){if(ba)return Jt;ba=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.ProgressCallbackTransform=void 0;const s=wr;let p=class extends s.Transform{constructor(d,l,c){super(),this.total=d,this.cancellationToken=l,this.onProgress=c,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(d,l,c){if(this.cancellationToken.cancelled){c(new Error("cancelled"),null);return}this.transferred+=d.length,this.delta+=d.length;const e=Date.now();e>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=e+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((e-this.start)/1e3))}),this.delta=0),c(null,d)}_flush(d){if(this.cancellationToken.cancelled){d(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,d(null)}};return Jt.ProgressCallbackTransform=p,Jt}var Ca;function tf(){if(Ca)return He;Ca=1,Object.defineProperty(He,"__esModule",{value:!0}),He.DigestTransform=He.HttpExecutor=He.HttpError=void 0,He.createHttpError=a,He.parseJson=n,He.configureRequestOptionsFromUrl=v,He.configureRequestUrl=h,He.safeGetHeader=C,He.configureRequestOptions=T,He.safeStringifyJson=D;const s=Nt,p=ef(),g=Et,d=wr,l=wt,c=uo(),e=Xr(),o=Vl(),t=(0,p.default)("electron-builder");function a(b,w=null){return new r(b.statusCode||-1,`${b.statusCode} ${b.statusMessage}`+(w==null?"":`
`+JSON.stringify(w,null,"  "))+`
Headers: `+D(b.headers),w)}const i=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class r extends Error{constructor(w,y=`HTTP error: ${i.get(w)||w}`,L=null){super(y),this.statusCode=w,this.description=L,this.name="HttpError",this.code=`HTTP_ERROR_${w}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}He.HttpError=r;function n(b){return b.then(w=>w==null||w.length===0?null:JSON.parse(w))}class f{constructor(){this.maxRedirects=10}request(w,y=new c.CancellationToken,L){T(w);const $=L==null?void 0:JSON.stringify(L),N=$?Buffer.from($):void 0;if(N!=null){t($);const{headers:k,...F}=w;w={method:"post",headers:{"Content-Type":"application/json","Content-Length":N.length,...k},...F}}return this.doApiRequest(w,y,k=>k.end(N))}doApiRequest(w,y,L,$=0){return t.enabled&&t(`Request: ${D(w)}`),y.createPromise((N,k,F)=>{const I=this.createRequest(w,U=>{try{this.handleResponse(U,w,y,N,k,$,L)}catch(B){k(B)}});this.addErrorAndTimeoutHandlers(I,k,w.timeout),this.addRedirectHandlers(I,w,k,$,U=>{this.doApiRequest(U,y,L,$).then(N).catch(k)}),L(I,k),F(()=>I.abort())})}addRedirectHandlers(w,y,L,$,N){}addErrorAndTimeoutHandlers(w,y,L=60*1e3){this.addTimeOutHandler(w,y,L),w.on("error",y),w.on("aborted",()=>{y(new Error("Request has been aborted by the server"))})}handleResponse(w,y,L,$,N,k,F){var I;if(t.enabled&&t(`Response: ${w.statusCode} ${w.statusMessage}, request options: ${D(y)}`),w.statusCode===404){N(a(w,`method: ${y.method||"GET"} url: ${y.protocol||"https:"}//${y.hostname}${y.port?`:${y.port}`:""}${y.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(w.statusCode===204){$();return}const U=(I=w.statusCode)!==null&&I!==void 0?I:0,B=U>=300&&U<400,V=C(w,"location");if(B&&V!=null){if(k>this.maxRedirects){N(this.createMaxRedirectError());return}this.doApiRequest(f.prepareRedirectUrlOptions(V,y),L,F,k).then($).catch(N);return}w.setEncoding("utf8");let W="";w.on("error",N),w.on("data",Z=>W+=Z),w.on("end",()=>{try{if(w.statusCode!=null&&w.statusCode>=400){const Z=C(w,"content-type"),ue=Z!=null&&(Array.isArray(Z)?Z.find(ie=>ie.includes("json"))!=null:Z.includes("json"));N(a(w,`method: ${y.method||"GET"} url: ${y.protocol||"https:"}//${y.hostname}${y.port?`:${y.port}`:""}${y.path}

          Data:
          ${ue?JSON.stringify(JSON.parse(W)):W}
          `))}else $(W.length===0?null:W)}catch(Z){N(Z)}})}async downloadToBuffer(w,y){return await y.cancellationToken.createPromise((L,$,N)=>{const k=[],F={headers:y.headers||void 0,redirect:"manual"};h(w,F),T(F),this.doDownload(F,{destination:null,options:y,onCancel:N,callback:I=>{I==null?L(Buffer.concat(k)):$(I)},responseHandler:(I,U)=>{let B=0;I.on("data",V=>{if(B+=V.length,B>524288e3){U(new Error("Maximum allowed size is 500 MB"));return}k.push(V)}),I.on("end",()=>{U(null)})}},0)})}doDownload(w,y,L){const $=this.createRequest(w,N=>{if(N.statusCode>=400){y.callback(new Error(`Cannot download "${w.protocol||"https:"}//${w.hostname}${w.path}", status ${N.statusCode}: ${N.statusMessage}`));return}N.on("error",y.callback);const k=C(N,"location");if(k!=null){L<this.maxRedirects?this.doDownload(f.prepareRedirectUrlOptions(k,w),y,L++):y.callback(this.createMaxRedirectError());return}y.responseHandler==null?O(y,N):y.responseHandler(N,y.callback)});this.addErrorAndTimeoutHandlers($,y.callback,w.timeout),this.addRedirectHandlers($,w,y.callback,L,N=>{this.doDownload(N,y,L++)}),$.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(w,y,L){w.on("socket",$=>{$.setTimeout(L,()=>{w.abort(),y(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(w,y){const L=v(w,{...y}),$=L.headers;if($?.authorization){const N=f.reconstructOriginalUrl(y),k=m(w,y);f.isCrossOriginRedirect(N,k)&&(t.enabled&&t(`Given the cross-origin redirect (from ${N.host} to ${k.host}), the Authorization header will be stripped out.`),delete $.authorization)}return L}static reconstructOriginalUrl(w){const y=w.protocol||"https:";if(!w.hostname)throw new Error("Missing hostname in request options");const L=w.hostname,$=w.port?`:${w.port}`:"",N=w.path||"/";return new l.URL(`${y}//${L}${$}${N}`)}static isCrossOriginRedirect(w,y){if(w.hostname.toLowerCase()!==y.hostname.toLowerCase())return!0;if(w.protocol==="http:"&&["80",""].includes(w.port)&&y.protocol==="https:"&&["443",""].includes(y.port))return!1;if(w.protocol!==y.protocol)return!0;const L=w.port,$=y.port;return L!==$}static retryOnServerError(w,y=3){for(let L=0;;L++)try{return w()}catch($){if(L<y&&($ instanceof r&&$.isServerError()||$.code==="EPIPE"))continue;throw $}}}He.HttpExecutor=f;function m(b,w){try{return new l.URL(b)}catch{const y=w.hostname,L=w.protocol||"https:",$=w.port?`:${w.port}`:"",N=`${L}//${y}${$}`;return new l.URL(b,N)}}function v(b,w){const y=T(w),L=m(b,w);return h(L,y),y}function h(b,w){w.protocol=b.protocol,w.hostname=b.hostname,b.port?w.port=b.port:w.port&&delete w.port,w.path=b.pathname+b.search}class _ extends d.Transform{get actual(){return this._actual}constructor(w,y="sha512",L="base64"){super(),this.expected=w,this.algorithm=y,this.encoding=L,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,s.createHash)(y)}_transform(w,y,L){this.digester.update(w),L(null,w)}_flush(w){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(y){w(y);return}w(null)}validate(){if(this._actual==null)throw(0,e.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,e.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}He.DigestTransform=_;function A(b,w,y){return b!=null&&w!=null&&b!==w?(y(new Error(`checksum mismatch: expected ${w} but got ${b} (X-Checksum-Sha2 header)`)),!1):!0}function C(b,w){const y=b.headers[w];return y==null?null:Array.isArray(y)?y.length===0?null:y[y.length-1]:y}function O(b,w){if(!A(C(w,"X-Checksum-Sha2"),b.options.sha2,b.callback))return;const y=[];if(b.options.onProgress!=null){const k=C(w,"content-length");k!=null&&y.push(new o.ProgressCallbackTransform(parseInt(k,10),b.options.cancellationToken,b.options.onProgress))}const L=b.options.sha512;L!=null?y.push(new _(L,"sha512",L.length===128&&!L.includes("+")&&!L.includes("Z")&&!L.includes("=")?"hex":"base64")):b.options.sha2!=null&&y.push(new _(b.options.sha2,"sha256","hex"));const $=(0,g.createWriteStream)(b.destination);y.push($);let N=w;for(const k of y)k.on("error",F=>{$.close(),b.options.cancellationToken.cancelled||b.callback(F)}),N=N.pipe(k);$.on("finish",()=>{$.close(b.callback)})}function T(b,w,y){y!=null&&(b.method=y),b.headers={...b.headers};const L=b.headers;return w!=null&&(L.authorization=w.startsWith("Basic")||w.startsWith("Bearer")?w:`token ${w}`),L["User-Agent"]==null&&(L["User-Agent"]="electron-builder"),(y==null||y==="GET"||L["Cache-Control"]==null)&&(L["Cache-Control"]="no-cache"),b.protocol==null&&process.versions.electron!=null&&(b.protocol="https:"),b}function D(b,w){return JSON.stringify(b,(y,L)=>y.endsWith("Authorization")||y.endsWith("authorization")||y.endsWith("Password")||y.endsWith("PASSWORD")||y.endsWith("Token")||y.includes("password")||y.includes("token")||w!=null&&w.has(y)?"<stripped sensitive data>":L,2)}return He}var Qt={},Pa;function rf(){if(Pa)return Qt;Pa=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.MemoLazy=void 0;let s=class{constructor(d,l){this.selector=d,this.creator=l,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const d=this.selector();if(this._value!==void 0&&p(this.selected,d))return this._value;this.selected=d;const l=this.creator(d);return this.value=l,l}set value(d){this._value=d}};Qt.MemoLazy=s;function p(g,d){if(typeof g=="object"&&g!==null&&(typeof d=="object"&&d!==null)){const e=Object.keys(g),o=Object.keys(d);return e.length===o.length&&e.every(t=>p(g[t],d[t]))}return g===d}return Qt}var kt={},Oa;function nf(){if(Oa)return kt;Oa=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.githubUrl=s,kt.githubTagPrefix=p,kt.getS3LikeProviderBaseUrl=g;function s(e,o="github.com"){return`${e.protocol||"https"}://${e.host||o}`}function p(e){var o;return e.tagNamePrefix?e.tagNamePrefix:!((o=e.vPrefixedTagName)!==null&&o!==void 0)||o?"v":""}function g(e){const o=e.provider;if(o==="s3")return d(e);if(o==="spaces")return c(e);throw new Error(`Not supported provider: ${o}`)}function d(e){let o;if(e.accelerate==!0)o=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)o=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?o=`https://s3.amazonaws.com/${e.bucket}`:o=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?o=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:o=`https://${e.bucket}.s3.amazonaws.com`;return l(o,e.path)}function l(e,o){return o!=null&&o.length>0&&(o.startsWith("/")||(e+="/"),e+=o),e}function c(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return l(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}return kt}var $r={},Da;function of(){if(Da)return $r;Da=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.retry=p;const s=uo();async function p(g,d){var l;const{retries:c,interval:e,backoff:o=0,attempt:t=0,shouldRetry:a,cancellationToken:i=new s.CancellationToken}=d;try{return await g()}catch(r){if(await Promise.resolve((l=a?.(r))!==null&&l!==void 0?l:!0)&&c>0&&!i.cancelled)return await new Promise(n=>setTimeout(n,e+o*t)),await p(g,{...d,retries:c-1,attempt:t+1});throw r}}return $r}var kr={},Ia;function af(){if(Ia)return kr;Ia=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.parseDn=s;function s(p){let g=!1,d=null,l="",c=0;p=p.trim();const e=new Map;for(let o=0;o<=p.length;o++){if(o===p.length){d!==null&&e.set(d,l);break}const t=p[o];if(g){if(t==='"'){g=!1;continue}}else{if(t==='"'){g=!0;continue}if(t==="\\"){o++;const a=parseInt(p.slice(o,o+2),16);Number.isNaN(a)?l+=p[o]:(o++,l+=String.fromCharCode(a));continue}if(d===null&&t==="="){d=l,l="";continue}if(t===","||t===";"||t==="+"){d!==null&&e.set(d,l),d=null,l="";continue}}if(t===" "&&!g){if(l.length===0)continue;if(o>c){let a=o;for(;p[a]===" ";)a++;c=a}if(c>=p.length||p[c]===","||p[c]===";"||d===null&&p[c]==="="||d!==null&&p[c]==="+"){o=c-1;continue}}l+=t}return e}return kr}var It={},Na;function sf(){if(Na)return It;Na=1,Object.defineProperty(It,"__esModule",{value:!0}),It.nil=It.UUID=void 0;const s=Nt,p=Xr(),g="options.name must be either a string or a Buffer",d=(0,s.randomBytes)(16);d[0]=d[0]|1;const l={},c=[];for(let r=0;r<256;r++){const n=(r+256).toString(16).substr(1);l[n]=r,c[r]=n}class e{constructor(n){this.ascii=null,this.binary=null;const f=e.check(n);if(!f)throw new Error("not a UUID");this.version=f.version,f.format==="ascii"?this.ascii=n:this.binary=n}static v5(n,f){return a(n,"sha1",80,f)}toString(){return this.ascii==null&&(this.ascii=i(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(n,f=0){if(typeof n=="string")return n=n.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(n)?n==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(l[n[14]+n[15]]&240)>>4,variant:o((l[n[19]+n[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(n)){if(n.length<f+16)return!1;let m=0;for(;m<16&&n[f+m]===0;m++);return m===16?{version:void 0,variant:"nil",format:"binary"}:{version:(n[f+6]&240)>>4,variant:o((n[f+8]&224)>>5),format:"binary"}}throw(0,p.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(n){const f=Buffer.allocUnsafe(16);let m=0;for(let v=0;v<16;v++)f[v]=l[n[m++]+n[m++]],(v===3||v===5||v===7||v===9)&&(m+=1);return f}}It.UUID=e,e.OID=e.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function o(r){switch(r){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var t;(function(r){r[r.ASCII=0]="ASCII",r[r.BINARY=1]="BINARY",r[r.OBJECT=2]="OBJECT"})(t||(t={}));function a(r,n,f,m,v=t.ASCII){const h=(0,s.createHash)(n);if(typeof r!="string"&&!Buffer.isBuffer(r))throw(0,p.newError)(g,"ERR_INVALID_UUID_NAME");h.update(m),h.update(r);const A=h.digest();let C;switch(v){case t.BINARY:A[6]=A[6]&15|f,A[8]=A[8]&63|128,C=A;break;case t.OBJECT:A[6]=A[6]&15|f,A[8]=A[8]&63|128,C=new e(A);break;default:C=c[A[0]]+c[A[1]]+c[A[2]]+c[A[3]]+"-"+c[A[4]]+c[A[5]]+"-"+c[A[6]&15|f]+c[A[7]]+"-"+c[A[8]&63|128]+c[A[9]]+"-"+c[A[10]]+c[A[11]]+c[A[12]]+c[A[13]]+c[A[14]]+c[A[15]];break}return C}function i(r){return c[r[0]]+c[r[1]]+c[r[2]]+c[r[3]]+"-"+c[r[4]]+c[r[5]]+"-"+c[r[6]]+c[r[7]]+"-"+c[r[8]]+c[r[9]]+"-"+c[r[10]]+c[r[11]]+c[r[12]]+c[r[13]]+c[r[14]]+c[r[15]]}return It.nil=new e("00000000-0000-0000-0000-000000000000"),It}var qt={},jn={},xa;function lf(){return xa||(xa=1,(function(s){(function(p){p.parser=function(R,E){return new d(R,E)},p.SAXParser=d,p.SAXStream=i,p.createStream=a,p.MAX_BUFFER_LENGTH=64*1024;var g=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];p.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function d(R,E){if(!(this instanceof d))return new d(R,E);var j=this;c(j),j.q=j.c="",j.bufferCheckPosition=p.MAX_BUFFER_LENGTH,j.opt=E||{},j.opt.lowercase=j.opt.lowercase||j.opt.lowercasetags,j.looseCase=j.opt.lowercase?"toLowerCase":"toUpperCase",j.tags=[],j.closed=j.closedRoot=j.sawRoot=!1,j.tag=j.error=null,j.strict=!!R,j.noscript=!!(R||j.opt.noscript),j.state=y.BEGIN,j.strictEntities=j.opt.strictEntities,j.ENTITIES=j.strictEntities?Object.create(p.XML_ENTITIES):Object.create(p.ENTITIES),j.attribList=[],j.opt.xmlns&&(j.ns=Object.create(v)),j.opt.unquotedAttributeValues===void 0&&(j.opt.unquotedAttributeValues=!R),j.trackPosition=j.opt.position!==!1,j.trackPosition&&(j.position=j.line=j.column=0),$(j,"onready")}Object.create||(Object.create=function(R){function E(){}E.prototype=R;var j=new E;return j}),Object.keys||(Object.keys=function(R){var E=[];for(var j in R)R.hasOwnProperty(j)&&E.push(j);return E});function l(R){for(var E=Math.max(p.MAX_BUFFER_LENGTH,10),j=0,x=0,se=g.length;x<se;x++){var he=R[g[x]].length;if(he>E)switch(g[x]){case"textNode":k(R);break;case"cdata":N(R,"oncdata",R.cdata),R.cdata="";break;case"script":N(R,"onscript",R.script),R.script="";break;default:I(R,"Max buffer length exceeded: "+g[x])}j=Math.max(j,he)}var pe=p.MAX_BUFFER_LENGTH-j;R.bufferCheckPosition=pe+R.position}function c(R){for(var E=0,j=g.length;E<j;E++)R[g[E]]=""}function e(R){k(R),R.cdata!==""&&(N(R,"oncdata",R.cdata),R.cdata=""),R.script!==""&&(N(R,"onscript",R.script),R.script="")}d.prototype={end:function(){U(this)},write:te,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){e(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var t=p.EVENTS.filter(function(R){return R!=="error"&&R!=="end"});function a(R,E){return new i(R,E)}function i(R,E){if(!(this instanceof i))return new i(R,E);o.apply(this),this._parser=new d(R,E),this.writable=!0,this.readable=!0;var j=this;this._parser.onend=function(){j.emit("end")},this._parser.onerror=function(x){j.emit("error",x),j._parser.error=null},this._decoder=null,t.forEach(function(x){Object.defineProperty(j,"on"+x,{get:function(){return j._parser["on"+x]},set:function(se){if(!se)return j.removeAllListeners(x),j._parser["on"+x]=se,se;j.on(x,se)},enumerable:!0,configurable:!1})})}i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype.write=function(R){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(R)){if(!this._decoder){var E=_c.StringDecoder;this._decoder=new E("utf8")}R=this._decoder.write(R)}return this._parser.write(R.toString()),this.emit("data",R),!0},i.prototype.end=function(R){return R&&R.length&&this.write(R),this._parser.end(),!0},i.prototype.on=function(R,E){var j=this;return!j._parser["on"+R]&&t.indexOf(R)!==-1&&(j._parser["on"+R]=function(){var x=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);x.splice(0,0,R),j.emit.apply(j,x)}),o.prototype.on.call(j,R,E)};var r="[CDATA[",n="DOCTYPE",f="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",v={xml:f,xmlns:m},h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function O(R){return R===" "||R===`
`||R==="\r"||R==="	"}function T(R){return R==='"'||R==="'"}function D(R){return R===">"||O(R)}function b(R,E){return R.test(E)}function w(R,E){return!b(R,E)}var y=0;p.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},p.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},p.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(p.ENTITIES).forEach(function(R){var E=p.ENTITIES[R],j=typeof E=="number"?String.fromCharCode(E):E;p.ENTITIES[R]=j});for(var L in p.STATE)p.STATE[p.STATE[L]]=L;y=p.STATE;function $(R,E,j){R[E]&&R[E](j)}function N(R,E,j){R.textNode&&k(R),$(R,E,j)}function k(R){R.textNode=F(R.opt,R.textNode),R.textNode&&$(R,"ontext",R.textNode),R.textNode=""}function F(R,E){return R.trim&&(E=E.trim()),R.normalize&&(E=E.replace(/\s+/g," ")),E}function I(R,E){return k(R),R.trackPosition&&(E+=`
Line: `+R.line+`
Column: `+R.column+`
Char: `+R.c),E=new Error(E),R.error=E,$(R,"onerror",E),R}function U(R){return R.sawRoot&&!R.closedRoot&&B(R,"Unclosed root tag"),R.state!==y.BEGIN&&R.state!==y.BEGIN_WHITESPACE&&R.state!==y.TEXT&&I(R,"Unexpected end"),k(R),R.c="",R.closed=!0,$(R,"onend"),d.call(R,R.strict,R.opt),R}function B(R,E){if(typeof R!="object"||!(R instanceof d))throw new Error("bad call to strictFail");R.strict&&I(R,E)}function V(R){R.strict||(R.tagName=R.tagName[R.looseCase]());var E=R.tags[R.tags.length-1]||R,j=R.tag={name:R.tagName,attributes:{}};R.opt.xmlns&&(j.ns=E.ns),R.attribList.length=0,N(R,"onopentagstart",j)}function W(R,E){var j=R.indexOf(":"),x=j<0?["",R]:R.split(":"),se=x[0],he=x[1];return E&&R==="xmlns"&&(se="xmlns",he=""),{prefix:se,local:he}}function Z(R){if(R.strict||(R.attribName=R.attribName[R.looseCase]()),R.attribList.indexOf(R.attribName)!==-1||R.tag.attributes.hasOwnProperty(R.attribName)){R.attribName=R.attribValue="";return}if(R.opt.xmlns){var E=W(R.attribName,!0),j=E.prefix,x=E.local;if(j==="xmlns")if(x==="xml"&&R.attribValue!==f)B(R,"xml: prefix must be bound to "+f+`
Actual: `+R.attribValue);else if(x==="xmlns"&&R.attribValue!==m)B(R,"xmlns: prefix must be bound to "+m+`
Actual: `+R.attribValue);else{var se=R.tag,he=R.tags[R.tags.length-1]||R;se.ns===he.ns&&(se.ns=Object.create(he.ns)),se.ns[x]=R.attribValue}R.attribList.push([R.attribName,R.attribValue])}else R.tag.attributes[R.attribName]=R.attribValue,N(R,"onattribute",{name:R.attribName,value:R.attribValue});R.attribName=R.attribValue=""}function ue(R,E){if(R.opt.xmlns){var j=R.tag,x=W(R.tagName);j.prefix=x.prefix,j.local=x.local,j.uri=j.ns[x.prefix]||"",j.prefix&&!j.uri&&(B(R,"Unbound namespace prefix: "+JSON.stringify(R.tagName)),j.uri=x.prefix);var se=R.tags[R.tags.length-1]||R;j.ns&&se.ns!==j.ns&&Object.keys(j.ns).forEach(function(H){N(R,"onopennamespace",{prefix:H,uri:j.ns[H]})});for(var he=0,pe=R.attribList.length;he<pe;he++){var _e=R.attribList[he],ye=_e[0],Ce=_e[1],Ae=W(ye,!0),Ue=Ae.prefix,Rt=Ae.local,lt=Ue===""?"":j.ns[Ue]||"",u={name:ye,value:Ce,prefix:Ue,local:Rt,uri:lt};Ue&&Ue!=="xmlns"&&!lt&&(B(R,"Unbound namespace prefix: "+JSON.stringify(Ue)),u.uri=Ue),R.tag.attributes[ye]=u,N(R,"onattribute",u)}R.attribList.length=0}R.tag.isSelfClosing=!!E,R.sawRoot=!0,R.tags.push(R.tag),N(R,"onopentag",R.tag),E||(!R.noscript&&R.tagName.toLowerCase()==="script"?R.state=y.SCRIPT:R.state=y.TEXT,R.tag=null,R.tagName=""),R.attribName=R.attribValue="",R.attribList.length=0}function ie(R){if(!R.tagName){B(R,"Weird empty close tag."),R.textNode+="</>",R.state=y.TEXT;return}if(R.script){if(R.tagName!=="script"){R.script+="</"+R.tagName+">",R.tagName="",R.state=y.SCRIPT;return}N(R,"onscript",R.script),R.script=""}var E=R.tags.length,j=R.tagName;R.strict||(j=j[R.looseCase]());for(var x=j;E--;){var se=R.tags[E];if(se.name!==x)B(R,"Unexpected close tag");else break}if(E<0){B(R,"Unmatched closing tag: "+R.tagName),R.textNode+="</"+R.tagName+">",R.state=y.TEXT;return}R.tagName=j;for(var he=R.tags.length;he-- >E;){var pe=R.tag=R.tags.pop();R.tagName=R.tag.name,N(R,"onclosetag",R.tagName);var _e={};for(var ye in pe.ns)_e[ye]=pe.ns[ye];var Ce=R.tags[R.tags.length-1]||R;R.opt.xmlns&&pe.ns!==Ce.ns&&Object.keys(pe.ns).forEach(function(Ae){var Ue=pe.ns[Ae];N(R,"onclosenamespace",{prefix:Ae,uri:Ue})})}E===0&&(R.closedRoot=!0),R.tagName=R.attribValue=R.attribName="",R.attribList.length=0,R.state=y.TEXT}function de(R){var E=R.entity,j=E.toLowerCase(),x,se="";return R.ENTITIES[E]?R.ENTITIES[E]:R.ENTITIES[j]?R.ENTITIES[j]:(E=j,E.charAt(0)==="#"&&(E.charAt(1)==="x"?(E=E.slice(2),x=parseInt(E,16),se=x.toString(16)):(E=E.slice(1),x=parseInt(E,10),se=x.toString(10))),E=E.replace(/^0+/,""),isNaN(x)||se.toLowerCase()!==E||x<0||x>1114111?(B(R,"Invalid character entity"),"&"+R.entity+";"):String.fromCodePoint(x))}function z(R,E){E==="<"?(R.state=y.OPEN_WAKA,R.startTagPosition=R.position):O(E)||(B(R,"Non-whitespace before first tag."),R.textNode=E,R.state=y.TEXT)}function M(R,E){var j="";return E<R.length&&(j=R.charAt(E)),j}function te(R){var E=this;if(this.error)throw this.error;if(E.closed)return I(E,"Cannot write after close. Assign an onready handler.");if(R===null)return U(E);typeof R=="object"&&(R=R.toString());for(var j=0,x="";x=M(R,j++),E.c=x,!!x;)switch(E.trackPosition&&(E.position++,x===`
`?(E.line++,E.column=0):E.column++),E.state){case y.BEGIN:if(E.state=y.BEGIN_WHITESPACE,x==="\uFEFF")continue;z(E,x);continue;case y.BEGIN_WHITESPACE:z(E,x);continue;case y.TEXT:if(E.sawRoot&&!E.closedRoot){for(var he=j-1;x&&x!=="<"&&x!=="&";)x=M(R,j++),x&&E.trackPosition&&(E.position++,x===`
`?(E.line++,E.column=0):E.column++);E.textNode+=R.substring(he,j-1)}x==="<"&&!(E.sawRoot&&E.closedRoot&&!E.strict)?(E.state=y.OPEN_WAKA,E.startTagPosition=E.position):(!O(x)&&(!E.sawRoot||E.closedRoot)&&B(E,"Text data outside of root node."),x==="&"?E.state=y.TEXT_ENTITY:E.textNode+=x);continue;case y.SCRIPT:x==="<"?E.state=y.SCRIPT_ENDING:E.script+=x;continue;case y.SCRIPT_ENDING:x==="/"?E.state=y.CLOSE_TAG:(E.script+="<"+x,E.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(x==="!")E.state=y.SGML_DECL,E.sgmlDecl="";else if(!O(x))if(b(h,x))E.state=y.OPEN_TAG,E.tagName=x;else if(x==="/")E.state=y.CLOSE_TAG,E.tagName="";else if(x==="?")E.state=y.PROC_INST,E.procInstName=E.procInstBody="";else{if(B(E,"Unencoded <"),E.startTagPosition+1<E.position){var se=E.position-E.startTagPosition;x=new Array(se).join(" ")+x}E.textNode+="<"+x,E.state=y.TEXT}continue;case y.SGML_DECL:if(E.sgmlDecl+x==="--"){E.state=y.COMMENT,E.comment="",E.sgmlDecl="";continue}E.doctype&&E.doctype!==!0&&E.sgmlDecl?(E.state=y.DOCTYPE_DTD,E.doctype+="<!"+E.sgmlDecl+x,E.sgmlDecl=""):(E.sgmlDecl+x).toUpperCase()===r?(N(E,"onopencdata"),E.state=y.CDATA,E.sgmlDecl="",E.cdata=""):(E.sgmlDecl+x).toUpperCase()===n?(E.state=y.DOCTYPE,(E.doctype||E.sawRoot)&&B(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):x===">"?(N(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=y.TEXT):(T(x)&&(E.state=y.SGML_DECL_QUOTED),E.sgmlDecl+=x);continue;case y.SGML_DECL_QUOTED:x===E.q&&(E.state=y.SGML_DECL,E.q=""),E.sgmlDecl+=x;continue;case y.DOCTYPE:x===">"?(E.state=y.TEXT,N(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=x,x==="["?E.state=y.DOCTYPE_DTD:T(x)&&(E.state=y.DOCTYPE_QUOTED,E.q=x));continue;case y.DOCTYPE_QUOTED:E.doctype+=x,x===E.q&&(E.q="",E.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:x==="]"?(E.doctype+=x,E.state=y.DOCTYPE):x==="<"?(E.state=y.OPEN_WAKA,E.startTagPosition=E.position):T(x)?(E.doctype+=x,E.state=y.DOCTYPE_DTD_QUOTED,E.q=x):E.doctype+=x;continue;case y.DOCTYPE_DTD_QUOTED:E.doctype+=x,x===E.q&&(E.state=y.DOCTYPE_DTD,E.q="");continue;case y.COMMENT:x==="-"?E.state=y.COMMENT_ENDING:E.comment+=x;continue;case y.COMMENT_ENDING:x==="-"?(E.state=y.COMMENT_ENDED,E.comment=F(E.opt,E.comment),E.comment&&N(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+x,E.state=y.COMMENT);continue;case y.COMMENT_ENDED:x!==">"?(B(E,"Malformed comment"),E.comment+="--"+x,E.state=y.COMMENT):E.doctype&&E.doctype!==!0?E.state=y.DOCTYPE_DTD:E.state=y.TEXT;continue;case y.CDATA:for(var he=j-1;x&&x!=="]";)x=M(R,j++),x&&E.trackPosition&&(E.position++,x===`
`?(E.line++,E.column=0):E.column++);E.cdata+=R.substring(he,j-1),x==="]"&&(E.state=y.CDATA_ENDING);continue;case y.CDATA_ENDING:x==="]"?E.state=y.CDATA_ENDING_2:(E.cdata+="]"+x,E.state=y.CDATA);continue;case y.CDATA_ENDING_2:x===">"?(E.cdata&&N(E,"oncdata",E.cdata),N(E,"onclosecdata"),E.cdata="",E.state=y.TEXT):x==="]"?E.cdata+="]":(E.cdata+="]]"+x,E.state=y.CDATA);continue;case y.PROC_INST:x==="?"?E.state=y.PROC_INST_ENDING:O(x)?E.state=y.PROC_INST_BODY:E.procInstName+=x;continue;case y.PROC_INST_BODY:if(!E.procInstBody&&O(x))continue;x==="?"?E.state=y.PROC_INST_ENDING:E.procInstBody+=x;continue;case y.PROC_INST_ENDING:x===">"?(N(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=y.TEXT):(E.procInstBody+="?"+x,E.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:b(_,x)?E.tagName+=x:(V(E),x===">"?ue(E):x==="/"?E.state=y.OPEN_TAG_SLASH:(O(x)||B(E,"Invalid character in tag name"),E.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:x===">"?(ue(E,!0),ie(E)):(B(E,"Forward-slash in opening tag not followed by >"),E.state=y.ATTRIB);continue;case y.ATTRIB:if(O(x))continue;x===">"?ue(E):x==="/"?E.state=y.OPEN_TAG_SLASH:b(h,x)?(E.attribName=x,E.attribValue="",E.state=y.ATTRIB_NAME):B(E,"Invalid attribute name");continue;case y.ATTRIB_NAME:x==="="?E.state=y.ATTRIB_VALUE:x===">"?(B(E,"Attribute without value"),E.attribValue=E.attribName,Z(E),ue(E)):O(x)?E.state=y.ATTRIB_NAME_SAW_WHITE:b(_,x)?E.attribName+=x:B(E,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(x==="=")E.state=y.ATTRIB_VALUE;else{if(O(x))continue;B(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",N(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",x===">"?ue(E):b(h,x)?(E.attribName=x,E.state=y.ATTRIB_NAME):(B(E,"Invalid attribute name"),E.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(O(x))continue;T(x)?(E.q=x,E.state=y.ATTRIB_VALUE_QUOTED):(E.opt.unquotedAttributeValues||I(E,"Unquoted attribute value"),E.state=y.ATTRIB_VALUE_UNQUOTED,E.attribValue=x);continue;case y.ATTRIB_VALUE_QUOTED:if(x!==E.q){x==="&"?E.state=y.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=x;continue}Z(E),E.q="",E.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:O(x)?E.state=y.ATTRIB:x===">"?ue(E):x==="/"?E.state=y.OPEN_TAG_SLASH:b(h,x)?(B(E,"No whitespace between attributes"),E.attribName=x,E.attribValue="",E.state=y.ATTRIB_NAME):B(E,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!D(x)){x==="&"?E.state=y.ATTRIB_VALUE_ENTITY_U:E.attribValue+=x;continue}Z(E),x===">"?ue(E):E.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(E.tagName)x===">"?ie(E):b(_,x)?E.tagName+=x:E.script?(E.script+="</"+E.tagName,E.tagName="",E.state=y.SCRIPT):(O(x)||B(E,"Invalid tagname in closing tag"),E.state=y.CLOSE_TAG_SAW_WHITE);else{if(O(x))continue;w(h,x)?E.script?(E.script+="</"+x,E.state=y.SCRIPT):B(E,"Invalid tagname in closing tag."):E.tagName=x}continue;case y.CLOSE_TAG_SAW_WHITE:if(O(x))continue;x===">"?ie(E):B(E,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(E.state){case y.TEXT_ENTITY:pe=y.TEXT,_e="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:pe=y.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:pe=y.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(x===";"){var ye=de(E);E.opt.unparsedEntities&&!Object.values(p.XML_ENTITIES).includes(ye)?(E.entity="",E.state=pe,E.write(ye)):(E[_e]+=ye,E.entity="",E.state=pe)}else b(E.entity.length?C:A,x)?E.entity+=x:(B(E,"Invalid character in entity name"),E[_e]+="&"+E.entity+x,E.entity="",E.state=pe);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&l(E),E}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var R=String.fromCharCode,E=Math.floor,j=function(){var x=16384,se=[],he,pe,_e=-1,ye=arguments.length;if(!ye)return"";for(var Ce="";++_e<ye;){var Ae=Number(arguments[_e]);if(!isFinite(Ae)||Ae<0||Ae>1114111||E(Ae)!==Ae)throw RangeError("Invalid code point: "+Ae);Ae<=65535?se.push(Ae):(Ae-=65536,he=(Ae>>10)+55296,pe=Ae%1024+56320,se.push(he,pe)),(_e+1===ye||se.length>x)&&(Ce+=R.apply(null,se),se.length=0)}return Ce};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:j,configurable:!0,writable:!0}):String.fromCodePoint=j})()})(s)})(jn)),jn}var Fa;function uf(){if(Fa)return qt;Fa=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.XElement=void 0,qt.parseXml=e;const s=lf(),p=Xr();class g{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,p.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!l(t))throw(0,p.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const a=this.attributes===null?null:this.attributes[t];if(a==null)throw(0,p.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return a}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,a=!1,i=null){const r=this.elementOrNull(t,a);if(r===null)throw(0,p.newError)(i||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return r}elementOrNull(t,a=!1){if(this.elements===null)return null;for(const i of this.elements)if(c(i,t,a))return i;return null}getElements(t,a=!1){return this.elements===null?[]:this.elements.filter(i=>c(i,t,a))}elementValueOrEmpty(t,a=!1){const i=this.elementOrNull(t,a);return i===null?"":i.value}}qt.XElement=g;const d=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function l(o){return d.test(o)}function c(o,t,a){const i=o.name;return i===t||a===!0&&i.length===t.length&&i.toLowerCase()===t.toLowerCase()}function e(o){let t=null;const a=s.parser(!0,{}),i=[];return a.onopentag=r=>{const n=new g(r.name);if(n.attributes=r.attributes,t===null)t=n;else{const f=i[i.length-1];f.elements==null&&(f.elements=[]),f.elements.push(n)}i.push(n)},a.onclosetag=()=>{i.pop()},a.ontext=r=>{i.length>0&&(i[i.length-1].value=r)},a.oncdata=r=>{const n=i[i.length-1];n.value=r,n.isCData=!0},a.onerror=r=>{throw r},a.write(o),t}return qt}var La;function Me(){return La||(La=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.CURRENT_APP_PACKAGE_FILE_NAME=s.CURRENT_APP_INSTALLER_FILE_NAME=s.XElement=s.parseXml=s.UUID=s.parseDn=s.retry=s.githubTagPrefix=s.githubUrl=s.getS3LikeProviderBaseUrl=s.ProgressCallbackTransform=s.MemoLazy=s.safeStringifyJson=s.safeGetHeader=s.parseJson=s.HttpExecutor=s.HttpError=s.DigestTransform=s.createHttpError=s.configureRequestUrl=s.configureRequestOptionsFromUrl=s.configureRequestOptions=s.newError=s.CancellationToken=s.CancellationError=void 0,s.asArray=r;var p=uo();Object.defineProperty(s,"CancellationError",{enumerable:!0,get:function(){return p.CancellationError}}),Object.defineProperty(s,"CancellationToken",{enumerable:!0,get:function(){return p.CancellationToken}});var g=Xr();Object.defineProperty(s,"newError",{enumerable:!0,get:function(){return g.newError}});var d=tf();Object.defineProperty(s,"configureRequestOptions",{enumerable:!0,get:function(){return d.configureRequestOptions}}),Object.defineProperty(s,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return d.configureRequestOptionsFromUrl}}),Object.defineProperty(s,"configureRequestUrl",{enumerable:!0,get:function(){return d.configureRequestUrl}}),Object.defineProperty(s,"createHttpError",{enumerable:!0,get:function(){return d.createHttpError}}),Object.defineProperty(s,"DigestTransform",{enumerable:!0,get:function(){return d.DigestTransform}}),Object.defineProperty(s,"HttpError",{enumerable:!0,get:function(){return d.HttpError}}),Object.defineProperty(s,"HttpExecutor",{enumerable:!0,get:function(){return d.HttpExecutor}}),Object.defineProperty(s,"parseJson",{enumerable:!0,get:function(){return d.parseJson}}),Object.defineProperty(s,"safeGetHeader",{enumerable:!0,get:function(){return d.safeGetHeader}}),Object.defineProperty(s,"safeStringifyJson",{enumerable:!0,get:function(){return d.safeStringifyJson}});var l=rf();Object.defineProperty(s,"MemoLazy",{enumerable:!0,get:function(){return l.MemoLazy}});var c=Vl();Object.defineProperty(s,"ProgressCallbackTransform",{enumerable:!0,get:function(){return c.ProgressCallbackTransform}});var e=nf();Object.defineProperty(s,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return e.getS3LikeProviderBaseUrl}}),Object.defineProperty(s,"githubUrl",{enumerable:!0,get:function(){return e.githubUrl}}),Object.defineProperty(s,"githubTagPrefix",{enumerable:!0,get:function(){return e.githubTagPrefix}});var o=of();Object.defineProperty(s,"retry",{enumerable:!0,get:function(){return o.retry}});var t=af();Object.defineProperty(s,"parseDn",{enumerable:!0,get:function(){return t.parseDn}});var a=sf();Object.defineProperty(s,"UUID",{enumerable:!0,get:function(){return a.UUID}});var i=uf();Object.defineProperty(s,"parseXml",{enumerable:!0,get:function(){return i.parseXml}}),Object.defineProperty(s,"XElement",{enumerable:!0,get:function(){return i.XElement}}),s.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",s.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function r(n){return n==null?[]:Array.isArray(n)?n:[n]}})($n)),$n}var Ge={},qr={},mt={},Ua;function _r(){if(Ua)return mt;Ua=1;function s(e){return typeof e>"u"||e===null}function p(e){return typeof e=="object"&&e!==null}function g(e){return Array.isArray(e)?e:s(e)?[]:[e]}function d(e,o){var t,a,i,r;if(o)for(r=Object.keys(o),t=0,a=r.length;t<a;t+=1)i=r[t],e[i]=o[i];return e}function l(e,o){var t="",a;for(a=0;a<o;a+=1)t+=e;return t}function c(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}return mt.isNothing=s,mt.isObject=p,mt.toArray=g,mt.repeat=l,mt.isNegativeZero=c,mt.extend=d,mt}var Hn,$a;function Rr(){if($a)return Hn;$a=1;function s(g,d){var l="",c=g.reason||"(unknown reason)";return g.mark?(g.mark.name&&(l+='in "'+g.mark.name+'" '),l+="("+(g.mark.line+1)+":"+(g.mark.column+1)+")",!d&&g.mark.snippet&&(l+=`

`+g.mark.snippet),c+" "+l):c}function p(g,d){Error.call(this),this.name="YAMLException",this.reason=g,this.mark=d,this.message=s(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.toString=function(d){return this.name+": "+s(this,d)},Hn=p,Hn}var Gn,ka;function cf(){if(ka)return Gn;ka=1;var s=_r();function p(l,c,e,o,t){var a="",i="",r=Math.floor(t/2)-1;return o-c>r&&(a=" ... ",c=o-r+a.length),e-o>r&&(i=" ...",e=o+r-i.length),{str:a+l.slice(c,e).replace(/\t/g,"")+i,pos:o-c+a.length}}function g(l,c){return s.repeat(" ",c-l.length)+l}function d(l,c){if(c=Object.create(c||null),!l.buffer)return null;c.maxLength||(c.maxLength=79),typeof c.indent!="number"&&(c.indent=1),typeof c.linesBefore!="number"&&(c.linesBefore=3),typeof c.linesAfter!="number"&&(c.linesAfter=2);for(var e=/\r?\n|\r|\0/g,o=[0],t=[],a,i=-1;a=e.exec(l.buffer);)t.push(a.index),o.push(a.index+a[0].length),l.position<=a.index&&i<0&&(i=o.length-2);i<0&&(i=o.length-1);var r="",n,f,m=Math.min(l.line+c.linesAfter,t.length).toString().length,v=c.maxLength-(c.indent+m+3);for(n=1;n<=c.linesBefore&&!(i-n<0);n++)f=p(l.buffer,o[i-n],t[i-n],l.position-(o[i]-o[i-n]),v),r=s.repeat(" ",c.indent)+g((l.line-n+1).toString(),m)+" | "+f.str+`
`+r;for(f=p(l.buffer,o[i],t[i],l.position,v),r+=s.repeat(" ",c.indent)+g((l.line+1).toString(),m)+" | "+f.str+`
`,r+=s.repeat("-",c.indent+m+3+f.pos)+`^
`,n=1;n<=c.linesAfter&&!(i+n>=t.length);n++)f=p(l.buffer,o[i+n],t[i+n],l.position-(o[i]-o[i+n]),v),r+=s.repeat(" ",c.indent)+g((l.line+n+1).toString(),m)+" | "+f.str+`
`;return r.replace(/\n$/,"")}return Gn=d,Gn}var Wn,qa;function We(){if(qa)return Wn;qa=1;var s=Rr(),p=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],g=["scalar","sequence","mapping"];function d(c){var e={};return c!==null&&Object.keys(c).forEach(function(o){c[o].forEach(function(t){e[String(t)]=o})}),e}function l(c,e){if(e=e||{},Object.keys(e).forEach(function(o){if(p.indexOf(o)===-1)throw new s('Unknown option "'+o+'" is met in definition of "'+c+'" YAML type.')}),this.options=e,this.tag=c,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(o){return o},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=d(e.styleAliases||null),g.indexOf(this.kind)===-1)throw new s('Unknown kind "'+this.kind+'" is specified for "'+c+'" YAML type.')}return Wn=l,Wn}var Vn,Ma;function Yl(){if(Ma)return Vn;Ma=1;var s=Rr(),p=We();function g(c,e){var o=[];return c[e].forEach(function(t){var a=o.length;o.forEach(function(i,r){i.tag===t.tag&&i.kind===t.kind&&i.multi===t.multi&&(a=r)}),o[a]=t}),o}function d(){var c={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,o;function t(a){a.multi?(c.multi[a.kind].push(a),c.multi.fallback.push(a)):c[a.kind][a.tag]=c.fallback[a.tag]=a}for(e=0,o=arguments.length;e<o;e+=1)arguments[e].forEach(t);return c}function l(c){return this.extend(c)}return l.prototype.extend=function(e){var o=[],t=[];if(e instanceof p)t.push(e);else if(Array.isArray(e))t=t.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(o=o.concat(e.implicit)),e.explicit&&(t=t.concat(e.explicit));else throw new s("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");o.forEach(function(i){if(!(i instanceof p))throw new s("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new s("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new s("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),t.forEach(function(i){if(!(i instanceof p))throw new s("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(l.prototype);return a.implicit=(this.implicit||[]).concat(o),a.explicit=(this.explicit||[]).concat(t),a.compiledImplicit=g(a,"implicit"),a.compiledExplicit=g(a,"explicit"),a.compiledTypeMap=d(a.compiledImplicit,a.compiledExplicit),a},Vn=l,Vn}var Yn,Ba;function zl(){if(Ba)return Yn;Ba=1;var s=We();return Yn=new s("tag:yaml.org,2002:str",{kind:"scalar",construct:function(p){return p!==null?p:""}}),Yn}var zn,ja;function Xl(){if(ja)return zn;ja=1;var s=We();return zn=new s("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(p){return p!==null?p:[]}}),zn}var Xn,Ha;function Kl(){if(Ha)return Xn;Ha=1;var s=We();return Xn=new s("tag:yaml.org,2002:map",{kind:"mapping",construct:function(p){return p!==null?p:{}}}),Xn}var Kn,Ga;function Jl(){if(Ga)return Kn;Ga=1;var s=Yl();return Kn=new s({explicit:[zl(),Xl(),Kl()]}),Kn}var Jn,Wa;function Ql(){if(Wa)return Jn;Wa=1;var s=We();function p(l){if(l===null)return!0;var c=l.length;return c===1&&l==="~"||c===4&&(l==="null"||l==="Null"||l==="NULL")}function g(){return null}function d(l){return l===null}return Jn=new s("tag:yaml.org,2002:null",{kind:"scalar",resolve:p,construct:g,predicate:d,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Jn}var Qn,Va;function Zl(){if(Va)return Qn;Va=1;var s=We();function p(l){if(l===null)return!1;var c=l.length;return c===4&&(l==="true"||l==="True"||l==="TRUE")||c===5&&(l==="false"||l==="False"||l==="FALSE")}function g(l){return l==="true"||l==="True"||l==="TRUE"}function d(l){return Object.prototype.toString.call(l)==="[object Boolean]"}return Qn=new s("tag:yaml.org,2002:bool",{kind:"scalar",resolve:p,construct:g,predicate:d,represent:{lowercase:function(l){return l?"true":"false"},uppercase:function(l){return l?"TRUE":"FALSE"},camelcase:function(l){return l?"True":"False"}},defaultStyle:"lowercase"}),Qn}var Zn,Ya;function eu(){if(Ya)return Zn;Ya=1;var s=_r(),p=We();function g(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function d(t){return 48<=t&&t<=55}function l(t){return 48<=t&&t<=57}function c(t){if(t===null)return!1;var a=t.length,i=0,r=!1,n;if(!a)return!1;if(n=t[i],(n==="-"||n==="+")&&(n=t[++i]),n==="0"){if(i+1===a)return!0;if(n=t[++i],n==="b"){for(i++;i<a;i++)if(n=t[i],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(i++;i<a;i++)if(n=t[i],n!=="_"){if(!g(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(i++;i<a;i++)if(n=t[i],n!=="_"){if(!d(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;i<a;i++)if(n=t[i],n!=="_"){if(!l(t.charCodeAt(i)))return!1;r=!0}return!(!r||n==="_")}function e(t){var a=t,i=1,r;if(a.indexOf("_")!==-1&&(a=a.replace(/_/g,"")),r=a[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),a=a.slice(1),r=a[0]),a==="0")return 0;if(r==="0"){if(a[1]==="b")return i*parseInt(a.slice(2),2);if(a[1]==="x")return i*parseInt(a.slice(2),16);if(a[1]==="o")return i*parseInt(a.slice(2),8)}return i*parseInt(a,10)}function o(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!s.isNegativeZero(t)}return Zn=new p("tag:yaml.org,2002:int",{kind:"scalar",resolve:c,construct:e,predicate:o,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Zn}var ei,za;function tu(){if(za)return ei;za=1;var s=_r(),p=We(),g=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function d(t){return!(t===null||!g.test(t)||t[t.length-1]==="_")}function l(t){var a,i;return a=t.replace(/_/g,"").toLowerCase(),i=a[0]==="-"?-1:1,"+-".indexOf(a[0])>=0&&(a=a.slice(1)),a===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:a===".nan"?NaN:i*parseFloat(a,10)}var c=/^[-+]?[0-9]+e/;function e(t,a){var i;if(isNaN(t))switch(a){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(a){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(a){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(s.isNegativeZero(t))return"-0.0";return i=t.toString(10),c.test(i)?i.replace("e",".e"):i}function o(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||s.isNegativeZero(t))}return ei=new p("tag:yaml.org,2002:float",{kind:"scalar",resolve:d,construct:l,predicate:o,represent:e,defaultStyle:"lowercase"}),ei}var ti,Xa;function ru(){return Xa||(Xa=1,ti=Jl().extend({implicit:[Ql(),Zl(),eu(),tu()]})),ti}var ri,Ka;function nu(){return Ka||(Ka=1,ri=ru()),ri}var ni,Ja;function iu(){if(Ja)return ni;Ja=1;var s=We(),p=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),g=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function d(e){return e===null?!1:p.exec(e)!==null||g.exec(e)!==null}function l(e){var o,t,a,i,r,n,f,m=0,v=null,h,_,A;if(o=p.exec(e),o===null&&(o=g.exec(e)),o===null)throw new Error("Date resolve error");if(t=+o[1],a=+o[2]-1,i=+o[3],!o[4])return new Date(Date.UTC(t,a,i));if(r=+o[4],n=+o[5],f=+o[6],o[7]){for(m=o[7].slice(0,3);m.length<3;)m+="0";m=+m}return o[9]&&(h=+o[10],_=+(o[11]||0),v=(h*60+_)*6e4,o[9]==="-"&&(v=-v)),A=new Date(Date.UTC(t,a,i,r,n,f,m)),v&&A.setTime(A.getTime()-v),A}function c(e){return e.toISOString()}return ni=new s("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:d,construct:l,instanceOf:Date,represent:c}),ni}var ii,Qa;function ou(){if(Qa)return ii;Qa=1;var s=We();function p(g){return g==="<<"||g===null}return ii=new s("tag:yaml.org,2002:merge",{kind:"scalar",resolve:p}),ii}var oi,Za;function au(){if(Za)return oi;Za=1;var s=We(),p=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function g(e){if(e===null)return!1;var o,t,a=0,i=e.length,r=p;for(t=0;t<i;t++)if(o=r.indexOf(e.charAt(t)),!(o>64)){if(o<0)return!1;a+=6}return a%8===0}function d(e){var o,t,a=e.replace(/[\r\n=]/g,""),i=a.length,r=p,n=0,f=[];for(o=0;o<i;o++)o%4===0&&o&&(f.push(n>>16&255),f.push(n>>8&255),f.push(n&255)),n=n<<6|r.indexOf(a.charAt(o));return t=i%4*6,t===0?(f.push(n>>16&255),f.push(n>>8&255),f.push(n&255)):t===18?(f.push(n>>10&255),f.push(n>>2&255)):t===12&&f.push(n>>4&255),new Uint8Array(f)}function l(e){var o="",t=0,a,i,r=e.length,n=p;for(a=0;a<r;a++)a%3===0&&a&&(o+=n[t>>18&63],o+=n[t>>12&63],o+=n[t>>6&63],o+=n[t&63]),t=(t<<8)+e[a];return i=r%3,i===0?(o+=n[t>>18&63],o+=n[t>>12&63],o+=n[t>>6&63],o+=n[t&63]):i===2?(o+=n[t>>10&63],o+=n[t>>4&63],o+=n[t<<2&63],o+=n[64]):i===1&&(o+=n[t>>2&63],o+=n[t<<4&63],o+=n[64],o+=n[64]),o}function c(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}return oi=new s("tag:yaml.org,2002:binary",{kind:"scalar",resolve:g,construct:d,predicate:c,represent:l}),oi}var ai,es;function su(){if(es)return ai;es=1;var s=We(),p=Object.prototype.hasOwnProperty,g=Object.prototype.toString;function d(c){if(c===null)return!0;var e=[],o,t,a,i,r,n=c;for(o=0,t=n.length;o<t;o+=1){if(a=n[o],r=!1,g.call(a)!=="[object Object]")return!1;for(i in a)if(p.call(a,i))if(!r)r=!0;else return!1;if(!r)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function l(c){return c!==null?c:[]}return ai=new s("tag:yaml.org,2002:omap",{kind:"sequence",resolve:d,construct:l}),ai}var si,ts;function lu(){if(ts)return si;ts=1;var s=We(),p=Object.prototype.toString;function g(l){if(l===null)return!0;var c,e,o,t,a,i=l;for(a=new Array(i.length),c=0,e=i.length;c<e;c+=1){if(o=i[c],p.call(o)!=="[object Object]"||(t=Object.keys(o),t.length!==1))return!1;a[c]=[t[0],o[t[0]]]}return!0}function d(l){if(l===null)return[];var c,e,o,t,a,i=l;for(a=new Array(i.length),c=0,e=i.length;c<e;c+=1)o=i[c],t=Object.keys(o),a[c]=[t[0],o[t[0]]];return a}return si=new s("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:g,construct:d}),si}var li,rs;function uu(){if(rs)return li;rs=1;var s=We(),p=Object.prototype.hasOwnProperty;function g(l){if(l===null)return!0;var c,e=l;for(c in e)if(p.call(e,c)&&e[c]!==null)return!1;return!0}function d(l){return l!==null?l:{}}return li=new s("tag:yaml.org,2002:set",{kind:"mapping",resolve:g,construct:d}),li}var ui,ns;function co(){return ns||(ns=1,ui=nu().extend({implicit:[iu(),ou()],explicit:[au(),su(),lu(),uu()]})),ui}var is;function ff(){if(is)return qr;is=1;var s=_r(),p=Rr(),g=cf(),d=co(),l=Object.prototype.hasOwnProperty,c=1,e=2,o=3,t=4,a=1,i=2,r=3,n=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,f=/[\x85\u2028\u2029]/,m=/[,\[\]\{\}]/,v=/^(?:!|!!|![a-z\-]+!)$/i,h=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _(u){return Object.prototype.toString.call(u)}function A(u){return u===10||u===13}function C(u){return u===9||u===32}function O(u){return u===9||u===32||u===10||u===13}function T(u){return u===44||u===91||u===93||u===123||u===125}function D(u){var H;return 48<=u&&u<=57?u-48:(H=u|32,97<=H&&H<=102?H-97+10:-1)}function b(u){return u===120?2:u===117?4:u===85?8:0}function w(u){return 48<=u&&u<=57?u-48:-1}function y(u){return u===48?"\0":u===97?"\x07":u===98?"\b":u===116||u===9?"	":u===110?`
`:u===118?"\v":u===102?"\f":u===114?"\r":u===101?"\x1B":u===32?" ":u===34?'"':u===47?"/":u===92?"\\":u===78?"":u===95?"":u===76?"\u2028":u===80?"\u2029":""}function L(u){return u<=65535?String.fromCharCode(u):String.fromCharCode((u-65536>>10)+55296,(u-65536&1023)+56320)}for(var $=new Array(256),N=new Array(256),k=0;k<256;k++)$[k]=y(k)?1:0,N[k]=y(k);function F(u,H){this.input=u,this.filename=H.filename||null,this.schema=H.schema||d,this.onWarning=H.onWarning||null,this.legacy=H.legacy||!1,this.json=H.json||!1,this.listener=H.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=u.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function I(u,H){var Y={name:u.filename,buffer:u.input.slice(0,-1),position:u.position,line:u.line,column:u.position-u.lineStart};return Y.snippet=g(Y),new p(H,Y)}function U(u,H){throw I(u,H)}function B(u,H){u.onWarning&&u.onWarning.call(null,I(u,H))}var V={YAML:function(H,Y,ae){var X,oe,re;H.version!==null&&U(H,"duplication of %YAML directive"),ae.length!==1&&U(H,"YAML directive accepts exactly one argument"),X=/^([0-9]+)\.([0-9]+)$/.exec(ae[0]),X===null&&U(H,"ill-formed argument of the YAML directive"),oe=parseInt(X[1],10),re=parseInt(X[2],10),oe!==1&&U(H,"unacceptable YAML version of the document"),H.version=ae[0],H.checkLineBreaks=re<2,re!==1&&re!==2&&B(H,"unsupported YAML version of the document")},TAG:function(H,Y,ae){var X,oe;ae.length!==2&&U(H,"TAG directive accepts exactly two arguments"),X=ae[0],oe=ae[1],v.test(X)||U(H,"ill-formed tag handle (first argument) of the TAG directive"),l.call(H.tagMap,X)&&U(H,'there is a previously declared suffix for "'+X+'" tag handle'),h.test(oe)||U(H,"ill-formed tag prefix (second argument) of the TAG directive");try{oe=decodeURIComponent(oe)}catch{U(H,"tag prefix is malformed: "+oe)}H.tagMap[X]=oe}};function W(u,H,Y,ae){var X,oe,re,le;if(H<Y){if(le=u.input.slice(H,Y),ae)for(X=0,oe=le.length;X<oe;X+=1)re=le.charCodeAt(X),re===9||32<=re&&re<=1114111||U(u,"expected valid JSON character");else n.test(le)&&U(u,"the stream contains non-printable characters");u.result+=le}}function Z(u,H,Y,ae){var X,oe,re,le;for(s.isObject(Y)||U(u,"cannot merge mappings; the provided source object is unacceptable"),X=Object.keys(Y),re=0,le=X.length;re<le;re+=1)oe=X[re],l.call(H,oe)||(H[oe]=Y[oe],ae[oe]=!0)}function ue(u,H,Y,ae,X,oe,re,le,Ee){var we,Te;if(Array.isArray(X))for(X=Array.prototype.slice.call(X),we=0,Te=X.length;we<Te;we+=1)Array.isArray(X[we])&&U(u,"nested arrays are not supported inside keys"),typeof X=="object"&&_(X[we])==="[object Object]"&&(X[we]="[object Object]");if(typeof X=="object"&&_(X)==="[object Object]"&&(X="[object Object]"),X=String(X),H===null&&(H={}),ae==="tag:yaml.org,2002:merge")if(Array.isArray(oe))for(we=0,Te=oe.length;we<Te;we+=1)Z(u,H,oe[we],Y);else Z(u,H,oe,Y);else!u.json&&!l.call(Y,X)&&l.call(H,X)&&(u.line=re||u.line,u.lineStart=le||u.lineStart,u.position=Ee||u.position,U(u,"duplicated mapping key")),X==="__proto__"?Object.defineProperty(H,X,{configurable:!0,enumerable:!0,writable:!0,value:oe}):H[X]=oe,delete Y[X];return H}function ie(u){var H;H=u.input.charCodeAt(u.position),H===10?u.position++:H===13?(u.position++,u.input.charCodeAt(u.position)===10&&u.position++):U(u,"a line break is expected"),u.line+=1,u.lineStart=u.position,u.firstTabInLine=-1}function de(u,H,Y){for(var ae=0,X=u.input.charCodeAt(u.position);X!==0;){for(;C(X);)X===9&&u.firstTabInLine===-1&&(u.firstTabInLine=u.position),X=u.input.charCodeAt(++u.position);if(H&&X===35)do X=u.input.charCodeAt(++u.position);while(X!==10&&X!==13&&X!==0);if(A(X))for(ie(u),X=u.input.charCodeAt(u.position),ae++,u.lineIndent=0;X===32;)u.lineIndent++,X=u.input.charCodeAt(++u.position);else break}return Y!==-1&&ae!==0&&u.lineIndent<Y&&B(u,"deficient indentation"),ae}function z(u){var H=u.position,Y;return Y=u.input.charCodeAt(H),!!((Y===45||Y===46)&&Y===u.input.charCodeAt(H+1)&&Y===u.input.charCodeAt(H+2)&&(H+=3,Y=u.input.charCodeAt(H),Y===0||O(Y)))}function M(u,H){H===1?u.result+=" ":H>1&&(u.result+=s.repeat(`
`,H-1))}function te(u,H,Y){var ae,X,oe,re,le,Ee,we,Te,ge=u.kind,Le=u.result,S;if(S=u.input.charCodeAt(u.position),O(S)||T(S)||S===35||S===38||S===42||S===33||S===124||S===62||S===39||S===34||S===37||S===64||S===96||(S===63||S===45)&&(X=u.input.charCodeAt(u.position+1),O(X)||Y&&T(X)))return!1;for(u.kind="scalar",u.result="",oe=re=u.position,le=!1;S!==0;){if(S===58){if(X=u.input.charCodeAt(u.position+1),O(X)||Y&&T(X))break}else if(S===35){if(ae=u.input.charCodeAt(u.position-1),O(ae))break}else{if(u.position===u.lineStart&&z(u)||Y&&T(S))break;if(A(S))if(Ee=u.line,we=u.lineStart,Te=u.lineIndent,de(u,!1,-1),u.lineIndent>=H){le=!0,S=u.input.charCodeAt(u.position);continue}else{u.position=re,u.line=Ee,u.lineStart=we,u.lineIndent=Te;break}}le&&(W(u,oe,re,!1),M(u,u.line-Ee),oe=re=u.position,le=!1),C(S)||(re=u.position+1),S=u.input.charCodeAt(++u.position)}return W(u,oe,re,!1),u.result?!0:(u.kind=ge,u.result=Le,!1)}function R(u,H){var Y,ae,X;if(Y=u.input.charCodeAt(u.position),Y!==39)return!1;for(u.kind="scalar",u.result="",u.position++,ae=X=u.position;(Y=u.input.charCodeAt(u.position))!==0;)if(Y===39)if(W(u,ae,u.position,!0),Y=u.input.charCodeAt(++u.position),Y===39)ae=u.position,u.position++,X=u.position;else return!0;else A(Y)?(W(u,ae,X,!0),M(u,de(u,!1,H)),ae=X=u.position):u.position===u.lineStart&&z(u)?U(u,"unexpected end of the document within a single quoted scalar"):(u.position++,X=u.position);U(u,"unexpected end of the stream within a single quoted scalar")}function E(u,H){var Y,ae,X,oe,re,le;if(le=u.input.charCodeAt(u.position),le!==34)return!1;for(u.kind="scalar",u.result="",u.position++,Y=ae=u.position;(le=u.input.charCodeAt(u.position))!==0;){if(le===34)return W(u,Y,u.position,!0),u.position++,!0;if(le===92){if(W(u,Y,u.position,!0),le=u.input.charCodeAt(++u.position),A(le))de(u,!1,H);else if(le<256&&$[le])u.result+=N[le],u.position++;else if((re=b(le))>0){for(X=re,oe=0;X>0;X--)le=u.input.charCodeAt(++u.position),(re=D(le))>=0?oe=(oe<<4)+re:U(u,"expected hexadecimal character");u.result+=L(oe),u.position++}else U(u,"unknown escape sequence");Y=ae=u.position}else A(le)?(W(u,Y,ae,!0),M(u,de(u,!1,H)),Y=ae=u.position):u.position===u.lineStart&&z(u)?U(u,"unexpected end of the document within a double quoted scalar"):(u.position++,ae=u.position)}U(u,"unexpected end of the stream within a double quoted scalar")}function j(u,H){var Y=!0,ae,X,oe,re=u.tag,le,Ee=u.anchor,we,Te,ge,Le,S,G=Object.create(null),Q,K,ee,ne;if(ne=u.input.charCodeAt(u.position),ne===91)Te=93,S=!1,le=[];else if(ne===123)Te=125,S=!0,le={};else return!1;for(u.anchor!==null&&(u.anchorMap[u.anchor]=le),ne=u.input.charCodeAt(++u.position);ne!==0;){if(de(u,!0,H),ne=u.input.charCodeAt(u.position),ne===Te)return u.position++,u.tag=re,u.anchor=Ee,u.kind=S?"mapping":"sequence",u.result=le,!0;Y?ne===44&&U(u,"expected the node content, but found ','"):U(u,"missed comma between flow collection entries"),K=Q=ee=null,ge=Le=!1,ne===63&&(we=u.input.charCodeAt(u.position+1),O(we)&&(ge=Le=!0,u.position++,de(u,!0,H))),ae=u.line,X=u.lineStart,oe=u.position,Ce(u,H,c,!1,!0),K=u.tag,Q=u.result,de(u,!0,H),ne=u.input.charCodeAt(u.position),(Le||u.line===ae)&&ne===58&&(ge=!0,ne=u.input.charCodeAt(++u.position),de(u,!0,H),Ce(u,H,c,!1,!0),ee=u.result),S?ue(u,le,G,K,Q,ee,ae,X,oe):ge?le.push(ue(u,null,G,K,Q,ee,ae,X,oe)):le.push(Q),de(u,!0,H),ne=u.input.charCodeAt(u.position),ne===44?(Y=!0,ne=u.input.charCodeAt(++u.position)):Y=!1}U(u,"unexpected end of the stream within a flow collection")}function x(u,H){var Y,ae,X=a,oe=!1,re=!1,le=H,Ee=0,we=!1,Te,ge;if(ge=u.input.charCodeAt(u.position),ge===124)ae=!1;else if(ge===62)ae=!0;else return!1;for(u.kind="scalar",u.result="";ge!==0;)if(ge=u.input.charCodeAt(++u.position),ge===43||ge===45)a===X?X=ge===43?r:i:U(u,"repeat of a chomping mode identifier");else if((Te=w(ge))>=0)Te===0?U(u,"bad explicit indentation width of a block scalar; it cannot be less than one"):re?U(u,"repeat of an indentation width identifier"):(le=H+Te-1,re=!0);else break;if(C(ge)){do ge=u.input.charCodeAt(++u.position);while(C(ge));if(ge===35)do ge=u.input.charCodeAt(++u.position);while(!A(ge)&&ge!==0)}for(;ge!==0;){for(ie(u),u.lineIndent=0,ge=u.input.charCodeAt(u.position);(!re||u.lineIndent<le)&&ge===32;)u.lineIndent++,ge=u.input.charCodeAt(++u.position);if(!re&&u.lineIndent>le&&(le=u.lineIndent),A(ge)){Ee++;continue}if(u.lineIndent<le){X===r?u.result+=s.repeat(`
`,oe?1+Ee:Ee):X===a&&oe&&(u.result+=`
`);break}for(ae?C(ge)?(we=!0,u.result+=s.repeat(`
`,oe?1+Ee:Ee)):we?(we=!1,u.result+=s.repeat(`
`,Ee+1)):Ee===0?oe&&(u.result+=" "):u.result+=s.repeat(`
`,Ee):u.result+=s.repeat(`
`,oe?1+Ee:Ee),oe=!0,re=!0,Ee=0,Y=u.position;!A(ge)&&ge!==0;)ge=u.input.charCodeAt(++u.position);W(u,Y,u.position,!1)}return!0}function se(u,H){var Y,ae=u.tag,X=u.anchor,oe=[],re,le=!1,Ee;if(u.firstTabInLine!==-1)return!1;for(u.anchor!==null&&(u.anchorMap[u.anchor]=oe),Ee=u.input.charCodeAt(u.position);Ee!==0&&(u.firstTabInLine!==-1&&(u.position=u.firstTabInLine,U(u,"tab characters must not be used in indentation")),!(Ee!==45||(re=u.input.charCodeAt(u.position+1),!O(re))));){if(le=!0,u.position++,de(u,!0,-1)&&u.lineIndent<=H){oe.push(null),Ee=u.input.charCodeAt(u.position);continue}if(Y=u.line,Ce(u,H,o,!1,!0),oe.push(u.result),de(u,!0,-1),Ee=u.input.charCodeAt(u.position),(u.line===Y||u.lineIndent>H)&&Ee!==0)U(u,"bad indentation of a sequence entry");else if(u.lineIndent<H)break}return le?(u.tag=ae,u.anchor=X,u.kind="sequence",u.result=oe,!0):!1}function he(u,H,Y){var ae,X,oe,re,le,Ee,we=u.tag,Te=u.anchor,ge={},Le=Object.create(null),S=null,G=null,Q=null,K=!1,ee=!1,ne;if(u.firstTabInLine!==-1)return!1;for(u.anchor!==null&&(u.anchorMap[u.anchor]=ge),ne=u.input.charCodeAt(u.position);ne!==0;){if(!K&&u.firstTabInLine!==-1&&(u.position=u.firstTabInLine,U(u,"tab characters must not be used in indentation")),ae=u.input.charCodeAt(u.position+1),oe=u.line,(ne===63||ne===58)&&O(ae))ne===63?(K&&(ue(u,ge,Le,S,G,null,re,le,Ee),S=G=Q=null),ee=!0,K=!0,X=!0):K?(K=!1,X=!0):U(u,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),u.position+=1,ne=ae;else{if(re=u.line,le=u.lineStart,Ee=u.position,!Ce(u,Y,e,!1,!0))break;if(u.line===oe){for(ne=u.input.charCodeAt(u.position);C(ne);)ne=u.input.charCodeAt(++u.position);if(ne===58)ne=u.input.charCodeAt(++u.position),O(ne)||U(u,"a whitespace character is expected after the key-value separator within a block mapping"),K&&(ue(u,ge,Le,S,G,null,re,le,Ee),S=G=Q=null),ee=!0,K=!1,X=!1,S=u.tag,G=u.result;else if(ee)U(u,"can not read an implicit mapping pair; a colon is missed");else return u.tag=we,u.anchor=Te,!0}else if(ee)U(u,"can not read a block mapping entry; a multiline key may not be an implicit key");else return u.tag=we,u.anchor=Te,!0}if((u.line===oe||u.lineIndent>H)&&(K&&(re=u.line,le=u.lineStart,Ee=u.position),Ce(u,H,t,!0,X)&&(K?G=u.result:Q=u.result),K||(ue(u,ge,Le,S,G,Q,re,le,Ee),S=G=Q=null),de(u,!0,-1),ne=u.input.charCodeAt(u.position)),(u.line===oe||u.lineIndent>H)&&ne!==0)U(u,"bad indentation of a mapping entry");else if(u.lineIndent<H)break}return K&&ue(u,ge,Le,S,G,null,re,le,Ee),ee&&(u.tag=we,u.anchor=Te,u.kind="mapping",u.result=ge),ee}function pe(u){var H,Y=!1,ae=!1,X,oe,re;if(re=u.input.charCodeAt(u.position),re!==33)return!1;if(u.tag!==null&&U(u,"duplication of a tag property"),re=u.input.charCodeAt(++u.position),re===60?(Y=!0,re=u.input.charCodeAt(++u.position)):re===33?(ae=!0,X="!!",re=u.input.charCodeAt(++u.position)):X="!",H=u.position,Y){do re=u.input.charCodeAt(++u.position);while(re!==0&&re!==62);u.position<u.length?(oe=u.input.slice(H,u.position),re=u.input.charCodeAt(++u.position)):U(u,"unexpected end of the stream within a verbatim tag")}else{for(;re!==0&&!O(re);)re===33&&(ae?U(u,"tag suffix cannot contain exclamation marks"):(X=u.input.slice(H-1,u.position+1),v.test(X)||U(u,"named tag handle cannot contain such characters"),ae=!0,H=u.position+1)),re=u.input.charCodeAt(++u.position);oe=u.input.slice(H,u.position),m.test(oe)&&U(u,"tag suffix cannot contain flow indicator characters")}oe&&!h.test(oe)&&U(u,"tag name cannot contain such characters: "+oe);try{oe=decodeURIComponent(oe)}catch{U(u,"tag name is malformed: "+oe)}return Y?u.tag=oe:l.call(u.tagMap,X)?u.tag=u.tagMap[X]+oe:X==="!"?u.tag="!"+oe:X==="!!"?u.tag="tag:yaml.org,2002:"+oe:U(u,'undeclared tag handle "'+X+'"'),!0}function _e(u){var H,Y;if(Y=u.input.charCodeAt(u.position),Y!==38)return!1;for(u.anchor!==null&&U(u,"duplication of an anchor property"),Y=u.input.charCodeAt(++u.position),H=u.position;Y!==0&&!O(Y)&&!T(Y);)Y=u.input.charCodeAt(++u.position);return u.position===H&&U(u,"name of an anchor node must contain at least one character"),u.anchor=u.input.slice(H,u.position),!0}function ye(u){var H,Y,ae;if(ae=u.input.charCodeAt(u.position),ae!==42)return!1;for(ae=u.input.charCodeAt(++u.position),H=u.position;ae!==0&&!O(ae)&&!T(ae);)ae=u.input.charCodeAt(++u.position);return u.position===H&&U(u,"name of an alias node must contain at least one character"),Y=u.input.slice(H,u.position),l.call(u.anchorMap,Y)||U(u,'unidentified alias "'+Y+'"'),u.result=u.anchorMap[Y],de(u,!0,-1),!0}function Ce(u,H,Y,ae,X){var oe,re,le,Ee=1,we=!1,Te=!1,ge,Le,S,G,Q,K;if(u.listener!==null&&u.listener("open",u),u.tag=null,u.anchor=null,u.kind=null,u.result=null,oe=re=le=t===Y||o===Y,ae&&de(u,!0,-1)&&(we=!0,u.lineIndent>H?Ee=1:u.lineIndent===H?Ee=0:u.lineIndent<H&&(Ee=-1)),Ee===1)for(;pe(u)||_e(u);)de(u,!0,-1)?(we=!0,le=oe,u.lineIndent>H?Ee=1:u.lineIndent===H?Ee=0:u.lineIndent<H&&(Ee=-1)):le=!1;if(le&&(le=we||X),(Ee===1||t===Y)&&(c===Y||e===Y?Q=H:Q=H+1,K=u.position-u.lineStart,Ee===1?le&&(se(u,K)||he(u,K,Q))||j(u,Q)?Te=!0:(re&&x(u,Q)||R(u,Q)||E(u,Q)?Te=!0:ye(u)?(Te=!0,(u.tag!==null||u.anchor!==null)&&U(u,"alias node should not have any properties")):te(u,Q,c===Y)&&(Te=!0,u.tag===null&&(u.tag="?")),u.anchor!==null&&(u.anchorMap[u.anchor]=u.result)):Ee===0&&(Te=le&&se(u,K))),u.tag===null)u.anchor!==null&&(u.anchorMap[u.anchor]=u.result);else if(u.tag==="?"){for(u.result!==null&&u.kind!=="scalar"&&U(u,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+u.kind+'"'),ge=0,Le=u.implicitTypes.length;ge<Le;ge+=1)if(G=u.implicitTypes[ge],G.resolve(u.result)){u.result=G.construct(u.result),u.tag=G.tag,u.anchor!==null&&(u.anchorMap[u.anchor]=u.result);break}}else if(u.tag!=="!"){if(l.call(u.typeMap[u.kind||"fallback"],u.tag))G=u.typeMap[u.kind||"fallback"][u.tag];else for(G=null,S=u.typeMap.multi[u.kind||"fallback"],ge=0,Le=S.length;ge<Le;ge+=1)if(u.tag.slice(0,S[ge].tag.length)===S[ge].tag){G=S[ge];break}G||U(u,"unknown tag !<"+u.tag+">"),u.result!==null&&G.kind!==u.kind&&U(u,"unacceptable node kind for !<"+u.tag+'> tag; it should be "'+G.kind+'", not "'+u.kind+'"'),G.resolve(u.result,u.tag)?(u.result=G.construct(u.result,u.tag),u.anchor!==null&&(u.anchorMap[u.anchor]=u.result)):U(u,"cannot resolve a node with !<"+u.tag+"> explicit tag")}return u.listener!==null&&u.listener("close",u),u.tag!==null||u.anchor!==null||Te}function Ae(u){var H=u.position,Y,ae,X,oe=!1,re;for(u.version=null,u.checkLineBreaks=u.legacy,u.tagMap=Object.create(null),u.anchorMap=Object.create(null);(re=u.input.charCodeAt(u.position))!==0&&(de(u,!0,-1),re=u.input.charCodeAt(u.position),!(u.lineIndent>0||re!==37));){for(oe=!0,re=u.input.charCodeAt(++u.position),Y=u.position;re!==0&&!O(re);)re=u.input.charCodeAt(++u.position);for(ae=u.input.slice(Y,u.position),X=[],ae.length<1&&U(u,"directive name must not be less than one character in length");re!==0;){for(;C(re);)re=u.input.charCodeAt(++u.position);if(re===35){do re=u.input.charCodeAt(++u.position);while(re!==0&&!A(re));break}if(A(re))break;for(Y=u.position;re!==0&&!O(re);)re=u.input.charCodeAt(++u.position);X.push(u.input.slice(Y,u.position))}re!==0&&ie(u),l.call(V,ae)?V[ae](u,ae,X):B(u,'unknown document directive "'+ae+'"')}if(de(u,!0,-1),u.lineIndent===0&&u.input.charCodeAt(u.position)===45&&u.input.charCodeAt(u.position+1)===45&&u.input.charCodeAt(u.position+2)===45?(u.position+=3,de(u,!0,-1)):oe&&U(u,"directives end mark is expected"),Ce(u,u.lineIndent-1,t,!1,!0),de(u,!0,-1),u.checkLineBreaks&&f.test(u.input.slice(H,u.position))&&B(u,"non-ASCII line breaks are interpreted as content"),u.documents.push(u.result),u.position===u.lineStart&&z(u)){u.input.charCodeAt(u.position)===46&&(u.position+=3,de(u,!0,-1));return}if(u.position<u.length-1)U(u,"end of the stream or a document separator is expected");else return}function Ue(u,H){u=String(u),H=H||{},u.length!==0&&(u.charCodeAt(u.length-1)!==10&&u.charCodeAt(u.length-1)!==13&&(u+=`
`),u.charCodeAt(0)===65279&&(u=u.slice(1)));var Y=new F(u,H),ae=u.indexOf("\0");for(ae!==-1&&(Y.position=ae,U(Y,"null byte is not allowed in input")),Y.input+="\0";Y.input.charCodeAt(Y.position)===32;)Y.lineIndent+=1,Y.position+=1;for(;Y.position<Y.length-1;)Ae(Y);return Y.documents}function Rt(u,H,Y){H!==null&&typeof H=="object"&&typeof Y>"u"&&(Y=H,H=null);var ae=Ue(u,Y);if(typeof H!="function")return ae;for(var X=0,oe=ae.length;X<oe;X+=1)H(ae[X])}function lt(u,H){var Y=Ue(u,H);if(Y.length!==0){if(Y.length===1)return Y[0];throw new p("expected a single document in the stream, but found more")}}return qr.loadAll=Rt,qr.load=lt,qr}var ci={},os;function df(){if(os)return ci;os=1;var s=_r(),p=Rr(),g=co(),d=Object.prototype.toString,l=Object.prototype.hasOwnProperty,c=65279,e=9,o=10,t=13,a=32,i=33,r=34,n=35,f=37,m=38,v=39,h=42,_=44,A=45,C=58,O=61,T=62,D=63,b=64,w=91,y=93,L=96,$=123,N=124,k=125,F={};F[0]="\\0",F[7]="\\a",F[8]="\\b",F[9]="\\t",F[10]="\\n",F[11]="\\v",F[12]="\\f",F[13]="\\r",F[27]="\\e",F[34]='\\"',F[92]="\\\\",F[133]="\\N",F[160]="\\_",F[8232]="\\L",F[8233]="\\P";var I=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],U=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function B(S,G){var Q,K,ee,ne,me,ce,ve;if(G===null)return{};for(Q={},K=Object.keys(G),ee=0,ne=K.length;ee<ne;ee+=1)me=K[ee],ce=String(G[me]),me.slice(0,2)==="!!"&&(me="tag:yaml.org,2002:"+me.slice(2)),ve=S.compiledTypeMap.fallback[me],ve&&l.call(ve.styleAliases,ce)&&(ce=ve.styleAliases[ce]),Q[me]=ce;return Q}function V(S){var G,Q,K;if(G=S.toString(16).toUpperCase(),S<=255)Q="x",K=2;else if(S<=65535)Q="u",K=4;else if(S<=4294967295)Q="U",K=8;else throw new p("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+Q+s.repeat("0",K-G.length)+G}var W=1,Z=2;function ue(S){this.schema=S.schema||g,this.indent=Math.max(1,S.indent||2),this.noArrayIndent=S.noArrayIndent||!1,this.skipInvalid=S.skipInvalid||!1,this.flowLevel=s.isNothing(S.flowLevel)?-1:S.flowLevel,this.styleMap=B(this.schema,S.styles||null),this.sortKeys=S.sortKeys||!1,this.lineWidth=S.lineWidth||80,this.noRefs=S.noRefs||!1,this.noCompatMode=S.noCompatMode||!1,this.condenseFlow=S.condenseFlow||!1,this.quotingType=S.quotingType==='"'?Z:W,this.forceQuotes=S.forceQuotes||!1,this.replacer=typeof S.replacer=="function"?S.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ie(S,G){for(var Q=s.repeat(" ",G),K=0,ee=-1,ne="",me,ce=S.length;K<ce;)ee=S.indexOf(`
`,K),ee===-1?(me=S.slice(K),K=ce):(me=S.slice(K,ee+1),K=ee+1),me.length&&me!==`
`&&(ne+=Q),ne+=me;return ne}function de(S,G){return`
`+s.repeat(" ",S.indent*G)}function z(S,G){var Q,K,ee;for(Q=0,K=S.implicitTypes.length;Q<K;Q+=1)if(ee=S.implicitTypes[Q],ee.resolve(G))return!0;return!1}function M(S){return S===a||S===e}function te(S){return 32<=S&&S<=126||161<=S&&S<=55295&&S!==8232&&S!==8233||57344<=S&&S<=65533&&S!==c||65536<=S&&S<=1114111}function R(S){return te(S)&&S!==c&&S!==t&&S!==o}function E(S,G,Q){var K=R(S),ee=K&&!M(S);return(Q?K:K&&S!==_&&S!==w&&S!==y&&S!==$&&S!==k)&&S!==n&&!(G===C&&!ee)||R(G)&&!M(G)&&S===n||G===C&&ee}function j(S){return te(S)&&S!==c&&!M(S)&&S!==A&&S!==D&&S!==C&&S!==_&&S!==w&&S!==y&&S!==$&&S!==k&&S!==n&&S!==m&&S!==h&&S!==i&&S!==N&&S!==O&&S!==T&&S!==v&&S!==r&&S!==f&&S!==b&&S!==L}function x(S){return!M(S)&&S!==C}function se(S,G){var Q=S.charCodeAt(G),K;return Q>=55296&&Q<=56319&&G+1<S.length&&(K=S.charCodeAt(G+1),K>=56320&&K<=57343)?(Q-55296)*1024+K-56320+65536:Q}function he(S){var G=/^\n* /;return G.test(S)}var pe=1,_e=2,ye=3,Ce=4,Ae=5;function Ue(S,G,Q,K,ee,ne,me,ce){var ve,Re=0,Pe=null,xe=!1,be=!1,Ut=K!==-1,tt=-1,St=j(se(S,0))&&x(se(S,S.length-1));if(G||me)for(ve=0;ve<S.length;Re>=65536?ve+=2:ve++){if(Re=se(S,ve),!te(Re))return Ae;St=St&&E(Re,Pe,ce),Pe=Re}else{for(ve=0;ve<S.length;Re>=65536?ve+=2:ve++){if(Re=se(S,ve),Re===o)xe=!0,Ut&&(be=be||ve-tt-1>K&&S[tt+1]!==" ",tt=ve);else if(!te(Re))return Ae;St=St&&E(Re,Pe,ce),Pe=Re}be=be||Ut&&ve-tt-1>K&&S[tt+1]!==" "}return!xe&&!be?St&&!me&&!ee(S)?pe:ne===Z?Ae:_e:Q>9&&he(S)?Ae:me?ne===Z?Ae:_e:be?Ce:ye}function Rt(S,G,Q,K,ee){S.dump=(function(){if(G.length===0)return S.quotingType===Z?'""':"''";if(!S.noCompatMode&&(I.indexOf(G)!==-1||U.test(G)))return S.quotingType===Z?'"'+G+'"':"'"+G+"'";var ne=S.indent*Math.max(1,Q),me=S.lineWidth===-1?-1:Math.max(Math.min(S.lineWidth,40),S.lineWidth-ne),ce=K||S.flowLevel>-1&&Q>=S.flowLevel;function ve(Re){return z(S,Re)}switch(Ue(G,ce,S.indent,me,ve,S.quotingType,S.forceQuotes&&!K,ee)){case pe:return G;case _e:return"'"+G.replace(/'/g,"''")+"'";case ye:return"|"+lt(G,S.indent)+u(ie(G,ne));case Ce:return">"+lt(G,S.indent)+u(ie(H(G,me),ne));case Ae:return'"'+ae(G)+'"';default:throw new p("impossible error: invalid scalar style")}})()}function lt(S,G){var Q=he(S)?String(G):"",K=S[S.length-1]===`
`,ee=K&&(S[S.length-2]===`
`||S===`
`),ne=ee?"+":K?"":"-";return Q+ne+`
`}function u(S){return S[S.length-1]===`
`?S.slice(0,-1):S}function H(S,G){for(var Q=/(\n+)([^\n]*)/g,K=(function(){var Re=S.indexOf(`
`);return Re=Re!==-1?Re:S.length,Q.lastIndex=Re,Y(S.slice(0,Re),G)})(),ee=S[0]===`
`||S[0]===" ",ne,me;me=Q.exec(S);){var ce=me[1],ve=me[2];ne=ve[0]===" ",K+=ce+(!ee&&!ne&&ve!==""?`
`:"")+Y(ve,G),ee=ne}return K}function Y(S,G){if(S===""||S[0]===" ")return S;for(var Q=/ [^ ]/g,K,ee=0,ne,me=0,ce=0,ve="";K=Q.exec(S);)ce=K.index,ce-ee>G&&(ne=me>ee?me:ce,ve+=`
`+S.slice(ee,ne),ee=ne+1),me=ce;return ve+=`
`,S.length-ee>G&&me>ee?ve+=S.slice(ee,me)+`
`+S.slice(me+1):ve+=S.slice(ee),ve.slice(1)}function ae(S){for(var G="",Q=0,K,ee=0;ee<S.length;Q>=65536?ee+=2:ee++)Q=se(S,ee),K=F[Q],!K&&te(Q)?(G+=S[ee],Q>=65536&&(G+=S[ee+1])):G+=K||V(Q);return G}function X(S,G,Q){var K="",ee=S.tag,ne,me,ce;for(ne=0,me=Q.length;ne<me;ne+=1)ce=Q[ne],S.replacer&&(ce=S.replacer.call(Q,String(ne),ce)),(we(S,G,ce,!1,!1)||typeof ce>"u"&&we(S,G,null,!1,!1))&&(K!==""&&(K+=","+(S.condenseFlow?"":" ")),K+=S.dump);S.tag=ee,S.dump="["+K+"]"}function oe(S,G,Q,K){var ee="",ne=S.tag,me,ce,ve;for(me=0,ce=Q.length;me<ce;me+=1)ve=Q[me],S.replacer&&(ve=S.replacer.call(Q,String(me),ve)),(we(S,G+1,ve,!0,!0,!1,!0)||typeof ve>"u"&&we(S,G+1,null,!0,!0,!1,!0))&&((!K||ee!=="")&&(ee+=de(S,G)),S.dump&&o===S.dump.charCodeAt(0)?ee+="-":ee+="- ",ee+=S.dump);S.tag=ne,S.dump=ee||"[]"}function re(S,G,Q){var K="",ee=S.tag,ne=Object.keys(Q),me,ce,ve,Re,Pe;for(me=0,ce=ne.length;me<ce;me+=1)Pe="",K!==""&&(Pe+=", "),S.condenseFlow&&(Pe+='"'),ve=ne[me],Re=Q[ve],S.replacer&&(Re=S.replacer.call(Q,ve,Re)),we(S,G,ve,!1,!1)&&(S.dump.length>1024&&(Pe+="? "),Pe+=S.dump+(S.condenseFlow?'"':"")+":"+(S.condenseFlow?"":" "),we(S,G,Re,!1,!1)&&(Pe+=S.dump,K+=Pe));S.tag=ee,S.dump="{"+K+"}"}function le(S,G,Q,K){var ee="",ne=S.tag,me=Object.keys(Q),ce,ve,Re,Pe,xe,be;if(S.sortKeys===!0)me.sort();else if(typeof S.sortKeys=="function")me.sort(S.sortKeys);else if(S.sortKeys)throw new p("sortKeys must be a boolean or a function");for(ce=0,ve=me.length;ce<ve;ce+=1)be="",(!K||ee!=="")&&(be+=de(S,G)),Re=me[ce],Pe=Q[Re],S.replacer&&(Pe=S.replacer.call(Q,Re,Pe)),we(S,G+1,Re,!0,!0,!0)&&(xe=S.tag!==null&&S.tag!=="?"||S.dump&&S.dump.length>1024,xe&&(S.dump&&o===S.dump.charCodeAt(0)?be+="?":be+="? "),be+=S.dump,xe&&(be+=de(S,G)),we(S,G+1,Pe,!0,xe)&&(S.dump&&o===S.dump.charCodeAt(0)?be+=":":be+=": ",be+=S.dump,ee+=be));S.tag=ne,S.dump=ee||"{}"}function Ee(S,G,Q){var K,ee,ne,me,ce,ve;for(ee=Q?S.explicitTypes:S.implicitTypes,ne=0,me=ee.length;ne<me;ne+=1)if(ce=ee[ne],(ce.instanceOf||ce.predicate)&&(!ce.instanceOf||typeof G=="object"&&G instanceof ce.instanceOf)&&(!ce.predicate||ce.predicate(G))){if(Q?ce.multi&&ce.representName?S.tag=ce.representName(G):S.tag=ce.tag:S.tag="?",ce.represent){if(ve=S.styleMap[ce.tag]||ce.defaultStyle,d.call(ce.represent)==="[object Function]")K=ce.represent(G,ve);else if(l.call(ce.represent,ve))K=ce.represent[ve](G,ve);else throw new p("!<"+ce.tag+'> tag resolver accepts not "'+ve+'" style');S.dump=K}return!0}return!1}function we(S,G,Q,K,ee,ne,me){S.tag=null,S.dump=Q,Ee(S,Q,!1)||Ee(S,Q,!0);var ce=d.call(S.dump),ve=K,Re;K&&(K=S.flowLevel<0||S.flowLevel>G);var Pe=ce==="[object Object]"||ce==="[object Array]",xe,be;if(Pe&&(xe=S.duplicates.indexOf(Q),be=xe!==-1),(S.tag!==null&&S.tag!=="?"||be||S.indent!==2&&G>0)&&(ee=!1),be&&S.usedDuplicates[xe])S.dump="*ref_"+xe;else{if(Pe&&be&&!S.usedDuplicates[xe]&&(S.usedDuplicates[xe]=!0),ce==="[object Object]")K&&Object.keys(S.dump).length!==0?(le(S,G,S.dump,ee),be&&(S.dump="&ref_"+xe+S.dump)):(re(S,G,S.dump),be&&(S.dump="&ref_"+xe+" "+S.dump));else if(ce==="[object Array]")K&&S.dump.length!==0?(S.noArrayIndent&&!me&&G>0?oe(S,G-1,S.dump,ee):oe(S,G,S.dump,ee),be&&(S.dump="&ref_"+xe+S.dump)):(X(S,G,S.dump),be&&(S.dump="&ref_"+xe+" "+S.dump));else if(ce==="[object String]")S.tag!=="?"&&Rt(S,S.dump,G,ne,ve);else{if(ce==="[object Undefined]")return!1;if(S.skipInvalid)return!1;throw new p("unacceptable kind of an object to dump "+ce)}S.tag!==null&&S.tag!=="?"&&(Re=encodeURI(S.tag[0]==="!"?S.tag.slice(1):S.tag).replace(/!/g,"%21"),S.tag[0]==="!"?Re="!"+Re:Re.slice(0,18)==="tag:yaml.org,2002:"?Re="!!"+Re.slice(18):Re="!<"+Re+">",S.dump=Re+" "+S.dump)}return!0}function Te(S,G){var Q=[],K=[],ee,ne;for(ge(S,Q,K),ee=0,ne=K.length;ee<ne;ee+=1)G.duplicates.push(Q[K[ee]]);G.usedDuplicates=new Array(ne)}function ge(S,G,Q){var K,ee,ne;if(S!==null&&typeof S=="object")if(ee=G.indexOf(S),ee!==-1)Q.indexOf(ee)===-1&&Q.push(ee);else if(G.push(S),Array.isArray(S))for(ee=0,ne=S.length;ee<ne;ee+=1)ge(S[ee],G,Q);else for(K=Object.keys(S),ee=0,ne=K.length;ee<ne;ee+=1)ge(S[K[ee]],G,Q)}function Le(S,G){G=G||{};var Q=new ue(G);Q.noRefs||Te(S,Q);var K=S;return Q.replacer&&(K=Q.replacer.call({"":K},"",K)),we(Q,0,K,!0,!0)?Q.dump+`
`:""}return ci.dump=Le,ci}var as;function fo(){if(as)return Ge;as=1;var s=ff(),p=df();function g(d,l){return function(){throw new Error("Function yaml."+d+" is removed in js-yaml 4. Use yaml."+l+" instead, which is now safe by default.")}}return Ge.Type=We(),Ge.Schema=Yl(),Ge.FAILSAFE_SCHEMA=Jl(),Ge.JSON_SCHEMA=ru(),Ge.CORE_SCHEMA=nu(),Ge.DEFAULT_SCHEMA=co(),Ge.load=s.load,Ge.loadAll=s.loadAll,Ge.dump=p.dump,Ge.YAMLException=Rr(),Ge.types={binary:au(),float:tu(),map:Kl(),null:Ql(),pairs:lu(),set:uu(),timestamp:iu(),bool:Zl(),int:eu(),merge:ou(),omap:su(),seq:Xl(),str:zl()},Ge.safeLoad=g("safeLoad","load"),Ge.safeLoadAll=g("safeLoadAll","loadAll"),Ge.safeDump=g("safeDump","dump"),Ge}var Zt={},ss;function hf(){if(ss)return Zt;ss=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.Lazy=void 0;class s{constructor(g){this._value=null,this.creator=g}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const g=this.creator();return this.value=g,g}set value(g){this._value=g,this.creator=null}}return Zt.Lazy=s,Zt}var Mr={exports:{}},fi,ls;function Kr(){if(ls)return fi;ls=1;const s="2.0.0",p=256,g=Number.MAX_SAFE_INTEGER||9007199254740991,d=16,l=p-6;return fi={MAX_LENGTH:p,MAX_SAFE_COMPONENT_LENGTH:d,MAX_SAFE_BUILD_LENGTH:l,MAX_SAFE_INTEGER:g,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:s,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},fi}var di,us;function Jr(){return us||(us=1,di=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...p)=>console.error("SEMVER",...p):()=>{}),di}var cs;function Sr(){return cs||(cs=1,(function(s,p){const{MAX_SAFE_COMPONENT_LENGTH:g,MAX_SAFE_BUILD_LENGTH:d,MAX_LENGTH:l}=Kr(),c=Jr();p=s.exports={};const e=p.re=[],o=p.safeRe=[],t=p.src=[],a=p.safeSrc=[],i=p.t={};let r=0;const n="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",l],[n,d]],m=h=>{for(const[_,A]of f)h=h.split(`${_}*`).join(`${_}{0,${A}}`).split(`${_}+`).join(`${_}{1,${A}}`);return h},v=(h,_,A)=>{const C=m(_),O=r++;c(h,O,_),i[h]=O,t[O]=_,a[O]=C,e[O]=new RegExp(_,A?"g":void 0),o[O]=new RegExp(C,A?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${n}*`),v("MAINVERSION",`(${t[i.NUMERICIDENTIFIER]})\\.(${t[i.NUMERICIDENTIFIER]})\\.(${t[i.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${t[i.NUMERICIDENTIFIERLOOSE]})\\.(${t[i.NUMERICIDENTIFIERLOOSE]})\\.(${t[i.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${t[i.NONNUMERICIDENTIFIER]}|${t[i.NUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${t[i.NONNUMERICIDENTIFIER]}|${t[i.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASE",`(?:-(${t[i.PRERELEASEIDENTIFIER]}(?:\\.${t[i.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${t[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${t[i.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${n}+`),v("BUILD",`(?:\\+(${t[i.BUILDIDENTIFIER]}(?:\\.${t[i.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${t[i.MAINVERSION]}${t[i.PRERELEASE]}?${t[i.BUILD]}?`),v("FULL",`^${t[i.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${t[i.MAINVERSIONLOOSE]}${t[i.PRERELEASELOOSE]}?${t[i.BUILD]}?`),v("LOOSE",`^${t[i.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${t[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${t[i.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${t[i.XRANGEIDENTIFIER]})(?:\\.(${t[i.XRANGEIDENTIFIER]})(?:\\.(${t[i.XRANGEIDENTIFIER]})(?:${t[i.PRERELEASE]})?${t[i.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${t[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${t[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${t[i.XRANGEIDENTIFIERLOOSE]})(?:${t[i.PRERELEASELOOSE]})?${t[i.BUILD]}?)?)?`),v("XRANGE",`^${t[i.GTLT]}\\s*${t[i.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${t[i.GTLT]}\\s*${t[i.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${g}})(?:\\.(\\d{1,${g}}))?(?:\\.(\\d{1,${g}}))?`),v("COERCE",`${t[i.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",t[i.COERCEPLAIN]+`(?:${t[i.PRERELEASE]})?(?:${t[i.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",t[i.COERCE],!0),v("COERCERTLFULL",t[i.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${t[i.LONETILDE]}\\s+`,!0),p.tildeTrimReplace="$1~",v("TILDE",`^${t[i.LONETILDE]}${t[i.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${t[i.LONETILDE]}${t[i.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${t[i.LONECARET]}\\s+`,!0),p.caretTrimReplace="$1^",v("CARET",`^${t[i.LONECARET]}${t[i.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${t[i.LONECARET]}${t[i.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${t[i.GTLT]}\\s*(${t[i.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${t[i.GTLT]}\\s*(${t[i.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${t[i.GTLT]}\\s*(${t[i.LOOSEPLAIN]}|${t[i.XRANGEPLAIN]})`,!0),p.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${t[i.XRANGEPLAIN]})\\s+-\\s+(${t[i.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${t[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${t[i.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Mr,Mr.exports)),Mr.exports}var hi,fs;function ho(){if(fs)return hi;fs=1;const s=Object.freeze({loose:!0}),p=Object.freeze({});return hi=d=>d?typeof d!="object"?s:d:p,hi}var pi,ds;function cu(){if(ds)return pi;ds=1;const s=/^[0-9]+$/,p=(d,l)=>{if(typeof d=="number"&&typeof l=="number")return d===l?0:d<l?-1:1;const c=s.test(d),e=s.test(l);return c&&e&&(d=+d,l=+l),d===l?0:c&&!e?-1:e&&!c?1:d<l?-1:1};return pi={compareIdentifiers:p,rcompareIdentifiers:(d,l)=>p(l,d)},pi}var mi,hs;function Ve(){if(hs)return mi;hs=1;const s=Jr(),{MAX_LENGTH:p,MAX_SAFE_INTEGER:g}=Kr(),{safeRe:d,t:l}=Sr(),c=ho(),{compareIdentifiers:e}=cu();class o{constructor(a,i){if(i=c(i),a instanceof o){if(a.loose===!!i.loose&&a.includePrerelease===!!i.includePrerelease)return a;a=a.version}else if(typeof a!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>p)throw new TypeError(`version is longer than ${p} characters`);s("SemVer",a,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const r=a.trim().match(i.loose?d[l.LOOSE]:d[l.FULL]);if(!r)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>g||this.major<0)throw new TypeError("Invalid major version");if(this.minor>g||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>g||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const f=+n;if(f>=0&&f<g)return f}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(s("SemVer.compare",this.version,this.options,a),!(a instanceof o)){if(typeof a=="string"&&a===this.version)return 0;a=new o(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return a instanceof o||(a=new o(a,this.options)),this.major<a.major?-1:this.major>a.major?1:this.minor<a.minor?-1:this.minor>a.minor?1:this.patch<a.patch?-1:this.patch>a.patch?1:0}comparePre(a){if(a instanceof o||(a=new o(a,this.options)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let i=0;do{const r=this.prerelease[i],n=a.prerelease[i];if(s("prerelease compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return e(r,n)}while(++i)}compareBuild(a){a instanceof o||(a=new o(a,this.options));let i=0;do{const r=this.build[i],n=a.build[i];if(s("build compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return e(r,n)}while(++i)}inc(a,i,r){if(a.startsWith("pre")){if(!i&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(i){const n=`-${i}`.match(this.options.loose?d[l.PRERELEASELOOSE]:d[l.PRERELEASE]);if(!n||n[1]!==i)throw new Error(`invalid identifier: ${i}`)}}switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,r),this.inc("pre",i,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,r),this.inc("pre",i,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const n=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(i===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(i){let f=[i,n];r===!1&&(f=[i]),e(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return mi=o,mi}var gi,ps;function Yt(){if(ps)return gi;ps=1;const s=Ve();return gi=(g,d,l=!1)=>{if(g instanceof s)return g;try{return new s(g,d)}catch(c){if(!l)return null;throw c}},gi}var vi,ms;function pf(){if(ms)return vi;ms=1;const s=Yt();return vi=(g,d)=>{const l=s(g,d);return l?l.version:null},vi}var yi,gs;function mf(){if(gs)return yi;gs=1;const s=Yt();return yi=(g,d)=>{const l=s(g.trim().replace(/^[=v]+/,""),d);return l?l.version:null},yi}var Ei,vs;function gf(){if(vs)return Ei;vs=1;const s=Ve();return Ei=(g,d,l,c,e)=>{typeof l=="string"&&(e=c,c=l,l=void 0);try{return new s(g instanceof s?g.version:g,l).inc(d,c,e).version}catch{return null}},Ei}var wi,ys;function vf(){if(ys)return wi;ys=1;const s=Yt();return wi=(g,d)=>{const l=s(g,null,!0),c=s(d,null,!0),e=l.compare(c);if(e===0)return null;const o=e>0,t=o?l:c,a=o?c:l,i=!!t.prerelease.length;if(!!a.prerelease.length&&!i){if(!a.patch&&!a.minor)return"major";if(a.compareMain(t)===0)return a.minor&&!a.patch?"minor":"patch"}const n=i?"pre":"";return l.major!==c.major?n+"major":l.minor!==c.minor?n+"minor":l.patch!==c.patch?n+"patch":"prerelease"},wi}var _i,Es;function yf(){if(Es)return _i;Es=1;const s=Ve();return _i=(g,d)=>new s(g,d).major,_i}var Ri,ws;function Ef(){if(ws)return Ri;ws=1;const s=Ve();return Ri=(g,d)=>new s(g,d).minor,Ri}var Si,_s;function wf(){if(_s)return Si;_s=1;const s=Ve();return Si=(g,d)=>new s(g,d).patch,Si}var Ai,Rs;function _f(){if(Rs)return Ai;Rs=1;const s=Yt();return Ai=(g,d)=>{const l=s(g,d);return l&&l.prerelease.length?l.prerelease:null},Ai}var Ti,Ss;function it(){if(Ss)return Ti;Ss=1;const s=Ve();return Ti=(g,d,l)=>new s(g,l).compare(new s(d,l)),Ti}var bi,As;function Rf(){if(As)return bi;As=1;const s=it();return bi=(g,d,l)=>s(d,g,l),bi}var Ci,Ts;function Sf(){if(Ts)return Ci;Ts=1;const s=it();return Ci=(g,d)=>s(g,d,!0),Ci}var Pi,bs;function po(){if(bs)return Pi;bs=1;const s=Ve();return Pi=(g,d,l)=>{const c=new s(g,l),e=new s(d,l);return c.compare(e)||c.compareBuild(e)},Pi}var Oi,Cs;function Af(){if(Cs)return Oi;Cs=1;const s=po();return Oi=(g,d)=>g.sort((l,c)=>s(l,c,d)),Oi}var Di,Ps;function Tf(){if(Ps)return Di;Ps=1;const s=po();return Di=(g,d)=>g.sort((l,c)=>s(c,l,d)),Di}var Ii,Os;function Qr(){if(Os)return Ii;Os=1;const s=it();return Ii=(g,d,l)=>s(g,d,l)>0,Ii}var Ni,Ds;function mo(){if(Ds)return Ni;Ds=1;const s=it();return Ni=(g,d,l)=>s(g,d,l)<0,Ni}var xi,Is;function fu(){if(Is)return xi;Is=1;const s=it();return xi=(g,d,l)=>s(g,d,l)===0,xi}var Fi,Ns;function du(){if(Ns)return Fi;Ns=1;const s=it();return Fi=(g,d,l)=>s(g,d,l)!==0,Fi}var Li,xs;function go(){if(xs)return Li;xs=1;const s=it();return Li=(g,d,l)=>s(g,d,l)>=0,Li}var Ui,Fs;function vo(){if(Fs)return Ui;Fs=1;const s=it();return Ui=(g,d,l)=>s(g,d,l)<=0,Ui}var $i,Ls;function hu(){if(Ls)return $i;Ls=1;const s=fu(),p=du(),g=Qr(),d=go(),l=mo(),c=vo();return $i=(o,t,a,i)=>{switch(t){case"===":return typeof o=="object"&&(o=o.version),typeof a=="object"&&(a=a.version),o===a;case"!==":return typeof o=="object"&&(o=o.version),typeof a=="object"&&(a=a.version),o!==a;case"":case"=":case"==":return s(o,a,i);case"!=":return p(o,a,i);case">":return g(o,a,i);case">=":return d(o,a,i);case"<":return l(o,a,i);case"<=":return c(o,a,i);default:throw new TypeError(`Invalid operator: ${t}`)}},$i}var ki,Us;function bf(){if(Us)return ki;Us=1;const s=Ve(),p=Yt(),{safeRe:g,t:d}=Sr();return ki=(c,e)=>{if(c instanceof s)return c;if(typeof c=="number"&&(c=String(c)),typeof c!="string")return null;e=e||{};let o=null;if(!e.rtl)o=c.match(e.includePrerelease?g[d.COERCEFULL]:g[d.COERCE]);else{const f=e.includePrerelease?g[d.COERCERTLFULL]:g[d.COERCERTL];let m;for(;(m=f.exec(c))&&(!o||o.index+o[0].length!==c.length);)(!o||m.index+m[0].length!==o.index+o[0].length)&&(o=m),f.lastIndex=m.index+m[1].length+m[2].length;f.lastIndex=-1}if(o===null)return null;const t=o[2],a=o[3]||"0",i=o[4]||"0",r=e.includePrerelease&&o[5]?`-${o[5]}`:"",n=e.includePrerelease&&o[6]?`+${o[6]}`:"";return p(`${t}.${a}.${i}${r}${n}`,e)},ki}var qi,$s;function Cf(){if($s)return qi;$s=1;class s{constructor(){this.max=1e3,this.map=new Map}get(g){const d=this.map.get(g);if(d!==void 0)return this.map.delete(g),this.map.set(g,d),d}delete(g){return this.map.delete(g)}set(g,d){if(!this.delete(g)&&d!==void 0){if(this.map.size>=this.max){const c=this.map.keys().next().value;this.delete(c)}this.map.set(g,d)}return this}}return qi=s,qi}var Mi,ks;function ot(){if(ks)return Mi;ks=1;const s=/\s+/g;class p{constructor(I,U){if(U=l(U),I instanceof p)return I.loose===!!U.loose&&I.includePrerelease===!!U.includePrerelease?I:new p(I.raw,U);if(I instanceof c)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=I.trim().replace(s," "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(V=>!v(V[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&h(V[0])){this.set=[V];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const U=this.set[I];for(let B=0;B<U.length;B++)B>0&&(this.formatted+=" "),this.formatted+=U[B].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const B=((this.options.includePrerelease&&f)|(this.options.loose&&m))+":"+I,V=d.get(B);if(V)return V;const W=this.options.loose,Z=W?t[a.HYPHENRANGELOOSE]:t[a.HYPHENRANGE];I=I.replace(Z,N(this.options.includePrerelease)),e("hyphen replace",I),I=I.replace(t[a.COMPARATORTRIM],i),e("comparator trim",I),I=I.replace(t[a.TILDETRIM],r),e("tilde trim",I),I=I.replace(t[a.CARETTRIM],n),e("caret trim",I);let ue=I.split(" ").map(M=>A(M,this.options)).join(" ").split(/\s+/).map(M=>$(M,this.options));W&&(ue=ue.filter(M=>(e("loose invalid filter",M,this.options),!!M.match(t[a.COMPARATORLOOSE])))),e("range list",ue);const ie=new Map,de=ue.map(M=>new c(M,this.options));for(const M of de){if(v(M))return[M];ie.set(M.value,M)}ie.size>1&&ie.has("")&&ie.delete("");const z=[...ie.values()];return d.set(B,z),z}intersects(I,U){if(!(I instanceof p))throw new TypeError("a Range is required");return this.set.some(B=>_(B,U)&&I.set.some(V=>_(V,U)&&B.every(W=>V.every(Z=>W.intersects(Z,U)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new o(I,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(k(this.set[U],I,this.options))return!0;return!1}}Mi=p;const g=Cf(),d=new g,l=ho(),c=Zr(),e=Jr(),o=Ve(),{safeRe:t,t:a,comparatorTrimReplace:i,tildeTrimReplace:r,caretTrimReplace:n}=Sr(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:m}=Kr(),v=F=>F.value==="<0.0.0-0",h=F=>F.value==="",_=(F,I)=>{let U=!0;const B=F.slice();let V=B.pop();for(;U&&B.length;)U=B.every(W=>V.intersects(W,I)),V=B.pop();return U},A=(F,I)=>(F=F.replace(t[a.BUILD],""),e("comp",F,I),F=D(F,I),e("caret",F),F=O(F,I),e("tildes",F),F=w(F,I),e("xrange",F),F=L(F,I),e("stars",F),F),C=F=>!F||F.toLowerCase()==="x"||F==="*",O=(F,I)=>F.trim().split(/\s+/).map(U=>T(U,I)).join(" "),T=(F,I)=>{const U=I.loose?t[a.TILDELOOSE]:t[a.TILDE];return F.replace(U,(B,V,W,Z,ue)=>{e("tilde",F,B,V,W,Z,ue);let ie;return C(V)?ie="":C(W)?ie=`>=${V}.0.0 <${+V+1}.0.0-0`:C(Z)?ie=`>=${V}.${W}.0 <${V}.${+W+1}.0-0`:ue?(e("replaceTilde pr",ue),ie=`>=${V}.${W}.${Z}-${ue} <${V}.${+W+1}.0-0`):ie=`>=${V}.${W}.${Z} <${V}.${+W+1}.0-0`,e("tilde return",ie),ie})},D=(F,I)=>F.trim().split(/\s+/).map(U=>b(U,I)).join(" "),b=(F,I)=>{e("caret",F,I);const U=I.loose?t[a.CARETLOOSE]:t[a.CARET],B=I.includePrerelease?"-0":"";return F.replace(U,(V,W,Z,ue,ie)=>{e("caret",F,V,W,Z,ue,ie);let de;return C(W)?de="":C(Z)?de=`>=${W}.0.0${B} <${+W+1}.0.0-0`:C(ue)?W==="0"?de=`>=${W}.${Z}.0${B} <${W}.${+Z+1}.0-0`:de=`>=${W}.${Z}.0${B} <${+W+1}.0.0-0`:ie?(e("replaceCaret pr",ie),W==="0"?Z==="0"?de=`>=${W}.${Z}.${ue}-${ie} <${W}.${Z}.${+ue+1}-0`:de=`>=${W}.${Z}.${ue}-${ie} <${W}.${+Z+1}.0-0`:de=`>=${W}.${Z}.${ue}-${ie} <${+W+1}.0.0-0`):(e("no pr"),W==="0"?Z==="0"?de=`>=${W}.${Z}.${ue}${B} <${W}.${Z}.${+ue+1}-0`:de=`>=${W}.${Z}.${ue}${B} <${W}.${+Z+1}.0-0`:de=`>=${W}.${Z}.${ue} <${+W+1}.0.0-0`),e("caret return",de),de})},w=(F,I)=>(e("replaceXRanges",F,I),F.split(/\s+/).map(U=>y(U,I)).join(" ")),y=(F,I)=>{F=F.trim();const U=I.loose?t[a.XRANGELOOSE]:t[a.XRANGE];return F.replace(U,(B,V,W,Z,ue,ie)=>{e("xRange",F,B,V,W,Z,ue,ie);const de=C(W),z=de||C(Z),M=z||C(ue),te=M;return V==="="&&te&&(V=""),ie=I.includePrerelease?"-0":"",de?V===">"||V==="<"?B="<0.0.0-0":B="*":V&&te?(z&&(Z=0),ue=0,V===">"?(V=">=",z?(W=+W+1,Z=0,ue=0):(Z=+Z+1,ue=0)):V==="<="&&(V="<",z?W=+W+1:Z=+Z+1),V==="<"&&(ie="-0"),B=`${V+W}.${Z}.${ue}${ie}`):z?B=`>=${W}.0.0${ie} <${+W+1}.0.0-0`:M&&(B=`>=${W}.${Z}.0${ie} <${W}.${+Z+1}.0-0`),e("xRange return",B),B})},L=(F,I)=>(e("replaceStars",F,I),F.trim().replace(t[a.STAR],"")),$=(F,I)=>(e("replaceGTE0",F,I),F.trim().replace(t[I.includePrerelease?a.GTE0PRE:a.GTE0],"")),N=F=>(I,U,B,V,W,Z,ue,ie,de,z,M,te)=>(C(B)?U="":C(V)?U=`>=${B}.0.0${F?"-0":""}`:C(W)?U=`>=${B}.${V}.0${F?"-0":""}`:Z?U=`>=${U}`:U=`>=${U}${F?"-0":""}`,C(de)?ie="":C(z)?ie=`<${+de+1}.0.0-0`:C(M)?ie=`<${de}.${+z+1}.0-0`:te?ie=`<=${de}.${z}.${M}-${te}`:F?ie=`<${de}.${z}.${+M+1}-0`:ie=`<=${ie}`,`${U} ${ie}`.trim()),k=(F,I,U)=>{for(let B=0;B<F.length;B++)if(!F[B].test(I))return!1;if(I.prerelease.length&&!U.includePrerelease){for(let B=0;B<F.length;B++)if(e(F[B].semver),F[B].semver!==c.ANY&&F[B].semver.prerelease.length>0){const V=F[B].semver;if(V.major===I.major&&V.minor===I.minor&&V.patch===I.patch)return!0}return!1}return!0};return Mi}var Bi,qs;function Zr(){if(qs)return Bi;qs=1;const s=Symbol("SemVer ANY");class p{static get ANY(){return s}constructor(i,r){if(r=g(r),i instanceof p){if(i.loose===!!r.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),e("comparator",i,r),this.options=r,this.loose=!!r.loose,this.parse(i),this.semver===s?this.value="":this.value=this.operator+this.semver.version,e("comp",this)}parse(i){const r=this.options.loose?d[l.COMPARATORLOOSE]:d[l.COMPARATOR],n=i.match(r);if(!n)throw new TypeError(`Invalid comparator: ${i}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new o(n[2],this.options.loose):this.semver=s}toString(){return this.value}test(i){if(e("Comparator.test",i,this.options.loose),this.semver===s||i===s)return!0;if(typeof i=="string")try{i=new o(i,this.options)}catch{return!1}return c(i,this.operator,this.semver,this.options)}intersects(i,r){if(!(i instanceof p))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new t(i.value,r).test(this.value):i.operator===""?i.value===""?!0:new t(this.value,r).test(i.semver):(r=g(r),r.includePrerelease&&(this.value==="<0.0.0-0"||i.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||i.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&i.operator.startsWith(">")||this.operator.startsWith("<")&&i.operator.startsWith("<")||this.semver.version===i.semver.version&&this.operator.includes("=")&&i.operator.includes("=")||c(this.semver,"<",i.semver,r)&&this.operator.startsWith(">")&&i.operator.startsWith("<")||c(this.semver,">",i.semver,r)&&this.operator.startsWith("<")&&i.operator.startsWith(">")))}}Bi=p;const g=ho(),{safeRe:d,t:l}=Sr(),c=hu(),e=Jr(),o=Ve(),t=ot();return Bi}var ji,Ms;function en(){if(Ms)return ji;Ms=1;const s=ot();return ji=(g,d,l)=>{try{d=new s(d,l)}catch{return!1}return d.test(g)},ji}var Hi,Bs;function Pf(){if(Bs)return Hi;Bs=1;const s=ot();return Hi=(g,d)=>new s(g,d).set.map(l=>l.map(c=>c.value).join(" ").trim().split(" ")),Hi}var Gi,js;function Of(){if(js)return Gi;js=1;const s=Ve(),p=ot();return Gi=(d,l,c)=>{let e=null,o=null,t=null;try{t=new p(l,c)}catch{return null}return d.forEach(a=>{t.test(a)&&(!e||o.compare(a)===-1)&&(e=a,o=new s(e,c))}),e},Gi}var Wi,Hs;function Df(){if(Hs)return Wi;Hs=1;const s=Ve(),p=ot();return Wi=(d,l,c)=>{let e=null,o=null,t=null;try{t=new p(l,c)}catch{return null}return d.forEach(a=>{t.test(a)&&(!e||o.compare(a)===1)&&(e=a,o=new s(e,c))}),e},Wi}var Vi,Gs;function If(){if(Gs)return Vi;Gs=1;const s=Ve(),p=ot(),g=Qr();return Vi=(l,c)=>{l=new p(l,c);let e=new s("0.0.0");if(l.test(e)||(e=new s("0.0.0-0"),l.test(e)))return e;e=null;for(let o=0;o<l.set.length;++o){const t=l.set[o];let a=null;t.forEach(i=>{const r=new s(i.semver.version);switch(i.operator){case">":r.prerelease.length===0?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":(!a||g(r,a))&&(a=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),a&&(!e||g(e,a))&&(e=a)}return e&&l.test(e)?e:null},Vi}var Yi,Ws;function Nf(){if(Ws)return Yi;Ws=1;const s=ot();return Yi=(g,d)=>{try{return new s(g,d).range||"*"}catch{return null}},Yi}var zi,Vs;function yo(){if(Vs)return zi;Vs=1;const s=Ve(),p=Zr(),{ANY:g}=p,d=ot(),l=en(),c=Qr(),e=mo(),o=vo(),t=go();return zi=(i,r,n,f)=>{i=new s(i,f),r=new d(r,f);let m,v,h,_,A;switch(n){case">":m=c,v=o,h=e,_=">",A=">=";break;case"<":m=e,v=t,h=c,_="<",A="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(i,r,f))return!1;for(let C=0;C<r.set.length;++C){const O=r.set[C];let T=null,D=null;if(O.forEach(b=>{b.semver===g&&(b=new p(">=0.0.0")),T=T||b,D=D||b,m(b.semver,T.semver,f)?T=b:h(b.semver,D.semver,f)&&(D=b)}),T.operator===_||T.operator===A||(!D.operator||D.operator===_)&&v(i,D.semver))return!1;if(D.operator===A&&h(i,D.semver))return!1}return!0},zi}var Xi,Ys;function xf(){if(Ys)return Xi;Ys=1;const s=yo();return Xi=(g,d,l)=>s(g,d,">",l),Xi}var Ki,zs;function Ff(){if(zs)return Ki;zs=1;const s=yo();return Ki=(g,d,l)=>s(g,d,"<",l),Ki}var Ji,Xs;function Lf(){if(Xs)return Ji;Xs=1;const s=ot();return Ji=(g,d,l)=>(g=new s(g,l),d=new s(d,l),g.intersects(d,l)),Ji}var Qi,Ks;function Uf(){if(Ks)return Qi;Ks=1;const s=en(),p=it();return Qi=(g,d,l)=>{const c=[];let e=null,o=null;const t=g.sort((n,f)=>p(n,f,l));for(const n of t)s(n,d,l)?(o=n,e||(e=n)):(o&&c.push([e,o]),o=null,e=null);e&&c.push([e,null]);const a=[];for(const[n,f]of c)n===f?a.push(n):!f&&n===t[0]?a.push("*"):f?n===t[0]?a.push(`<=${f}`):a.push(`${n} - ${f}`):a.push(`>=${n}`);const i=a.join(" || "),r=typeof d.raw=="string"?d.raw:String(d);return i.length<r.length?i:d},Qi}var Zi,Js;function $f(){if(Js)return Zi;Js=1;const s=ot(),p=Zr(),{ANY:g}=p,d=en(),l=it(),c=(r,n,f={})=>{if(r===n)return!0;r=new s(r,f),n=new s(n,f);let m=!1;e:for(const v of r.set){for(const h of n.set){const _=t(v,h,f);if(m=m||_!==null,_)continue e}if(m)return!1}return!0},e=[new p(">=0.0.0-0")],o=[new p(">=0.0.0")],t=(r,n,f)=>{if(r===n)return!0;if(r.length===1&&r[0].semver===g){if(n.length===1&&n[0].semver===g)return!0;f.includePrerelease?r=e:r=o}if(n.length===1&&n[0].semver===g){if(f.includePrerelease)return!0;n=o}const m=new Set;let v,h;for(const w of r)w.operator===">"||w.operator===">="?v=a(v,w,f):w.operator==="<"||w.operator==="<="?h=i(h,w,f):m.add(w.semver);if(m.size>1)return null;let _;if(v&&h){if(_=l(v.semver,h.semver,f),_>0)return null;if(_===0&&(v.operator!==">="||h.operator!=="<="))return null}for(const w of m){if(v&&!d(w,String(v),f)||h&&!d(w,String(h),f))return null;for(const y of n)if(!d(w,String(y),f))return!1;return!0}let A,C,O,T,D=h&&!f.includePrerelease&&h.semver.prerelease.length?h.semver:!1,b=v&&!f.includePrerelease&&v.semver.prerelease.length?v.semver:!1;D&&D.prerelease.length===1&&h.operator==="<"&&D.prerelease[0]===0&&(D=!1);for(const w of n){if(T=T||w.operator===">"||w.operator===">=",O=O||w.operator==="<"||w.operator==="<=",v){if(b&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===b.major&&w.semver.minor===b.minor&&w.semver.patch===b.patch&&(b=!1),w.operator===">"||w.operator===">="){if(A=a(v,w,f),A===w&&A!==v)return!1}else if(v.operator===">="&&!d(v.semver,String(w),f))return!1}if(h){if(D&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===D.major&&w.semver.minor===D.minor&&w.semver.patch===D.patch&&(D=!1),w.operator==="<"||w.operator==="<="){if(C=i(h,w,f),C===w&&C!==h)return!1}else if(h.operator==="<="&&!d(h.semver,String(w),f))return!1}if(!w.operator&&(h||v)&&_!==0)return!1}return!(v&&O&&!h&&_!==0||h&&T&&!v&&_!==0||b||D)},a=(r,n,f)=>{if(!r)return n;const m=l(r.semver,n.semver,f);return m>0?r:m<0||n.operator===">"&&r.operator===">="?n:r},i=(r,n,f)=>{if(!r)return n;const m=l(r.semver,n.semver,f);return m<0?r:m>0||n.operator==="<"&&r.operator==="<="?n:r};return Zi=c,Zi}var eo,Qs;function pu(){if(Qs)return eo;Qs=1;const s=Sr(),p=Kr(),g=Ve(),d=cu(),l=Yt(),c=pf(),e=mf(),o=gf(),t=vf(),a=yf(),i=Ef(),r=wf(),n=_f(),f=it(),m=Rf(),v=Sf(),h=po(),_=Af(),A=Tf(),C=Qr(),O=mo(),T=fu(),D=du(),b=go(),w=vo(),y=hu(),L=bf(),$=Zr(),N=ot(),k=en(),F=Pf(),I=Of(),U=Df(),B=If(),V=Nf(),W=yo(),Z=xf(),ue=Ff(),ie=Lf(),de=Uf(),z=$f();return eo={parse:l,valid:c,clean:e,inc:o,diff:t,major:a,minor:i,patch:r,prerelease:n,compare:f,rcompare:m,compareLoose:v,compareBuild:h,sort:_,rsort:A,gt:C,lt:O,eq:T,neq:D,gte:b,lte:w,cmp:y,coerce:L,Comparator:$,Range:N,satisfies:k,toComparators:F,maxSatisfying:I,minSatisfying:U,minVersion:B,validRange:V,outside:W,gtr:Z,ltr:ue,intersects:ie,simplifyRange:de,subset:z,SemVer:g,re:s.re,src:s.src,tokens:s.t,SEMVER_SPEC_VERSION:p.SEMVER_SPEC_VERSION,RELEASE_TYPES:p.RELEASE_TYPES,compareIdentifiers:d.compareIdentifiers,rcompareIdentifiers:d.rcompareIdentifiers},eo}var Mt={},Er={exports:{}};Er.exports;var Zs;function kf(){return Zs||(Zs=1,(function(s,p){var g=200,d="__lodash_hash_undefined__",l=1,c=2,e=9007199254740991,o="[object Arguments]",t="[object Array]",a="[object AsyncFunction]",i="[object Boolean]",r="[object Date]",n="[object Error]",f="[object Function]",m="[object GeneratorFunction]",v="[object Map]",h="[object Number]",_="[object Null]",A="[object Object]",C="[object Promise]",O="[object Proxy]",T="[object RegExp]",D="[object Set]",b="[object String]",w="[object Symbol]",y="[object Undefined]",L="[object WeakMap]",$="[object ArrayBuffer]",N="[object DataView]",k="[object Float32Array]",F="[object Float64Array]",I="[object Int8Array]",U="[object Int16Array]",B="[object Int32Array]",V="[object Uint8Array]",W="[object Uint8ClampedArray]",Z="[object Uint16Array]",ue="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,M={};M[k]=M[F]=M[I]=M[U]=M[B]=M[V]=M[W]=M[Z]=M[ue]=!0,M[o]=M[t]=M[$]=M[i]=M[N]=M[r]=M[n]=M[f]=M[v]=M[h]=M[A]=M[T]=M[D]=M[b]=M[L]=!1;var te=typeof nt=="object"&&nt&&nt.Object===Object&&nt,R=typeof self=="object"&&self&&self.Object===Object&&self,E=te||R||Function("return this")(),j=p&&!p.nodeType&&p,x=j&&!0&&s&&!s.nodeType&&s,se=x&&x.exports===j,he=se&&te.process,pe=(function(){try{return he&&he.binding&&he.binding("util")}catch{}})(),_e=pe&&pe.isTypedArray;function ye(P,q){for(var J=-1,fe=P==null?0:P.length,Oe=0,Se=[];++J<fe;){var Fe=P[J];q(Fe,J,P)&&(Se[Oe++]=Fe)}return Se}function Ce(P,q){for(var J=-1,fe=q.length,Oe=P.length;++J<fe;)P[Oe+J]=q[J];return P}function Ae(P,q){for(var J=-1,fe=P==null?0:P.length;++J<fe;)if(q(P[J],J,P))return!0;return!1}function Ue(P,q){for(var J=-1,fe=Array(P);++J<P;)fe[J]=q(J);return fe}function Rt(P){return function(q){return P(q)}}function lt(P,q){return P.has(q)}function u(P,q){return P?.[q]}function H(P){var q=-1,J=Array(P.size);return P.forEach(function(fe,Oe){J[++q]=[Oe,fe]}),J}function Y(P,q){return function(J){return P(q(J))}}function ae(P){var q=-1,J=Array(P.size);return P.forEach(function(fe){J[++q]=fe}),J}var X=Array.prototype,oe=Function.prototype,re=Object.prototype,le=E["__core-js_shared__"],Ee=oe.toString,we=re.hasOwnProperty,Te=(function(){var P=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""})(),ge=re.toString,Le=RegExp("^"+Ee.call(we).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=se?E.Buffer:void 0,G=E.Symbol,Q=E.Uint8Array,K=re.propertyIsEnumerable,ee=X.splice,ne=G?G.toStringTag:void 0,me=Object.getOwnPropertySymbols,ce=S?S.isBuffer:void 0,ve=Y(Object.keys,Object),Re=$t(E,"DataView"),Pe=$t(E,"Map"),xe=$t(E,"Promise"),be=$t(E,"Set"),Ut=$t(E,"WeakMap"),tt=$t(Object,"create"),St=bt(Re),Cu=bt(Pe),Pu=bt(xe),Ou=bt(be),Du=bt(Ut),So=G?G.prototype:void 0,rn=So?So.valueOf:void 0;function At(P){var q=-1,J=P==null?0:P.length;for(this.clear();++q<J;){var fe=P[q];this.set(fe[0],fe[1])}}function Iu(){this.__data__=tt?tt(null):{},this.size=0}function Nu(P){var q=this.has(P)&&delete this.__data__[P];return this.size-=q?1:0,q}function xu(P){var q=this.__data__;if(tt){var J=q[P];return J===d?void 0:J}return we.call(q,P)?q[P]:void 0}function Fu(P){var q=this.__data__;return tt?q[P]!==void 0:we.call(q,P)}function Lu(P,q){var J=this.__data__;return this.size+=this.has(P)?0:1,J[P]=tt&&q===void 0?d:q,this}At.prototype.clear=Iu,At.prototype.delete=Nu,At.prototype.get=xu,At.prototype.has=Fu,At.prototype.set=Lu;function ut(P){var q=-1,J=P==null?0:P.length;for(this.clear();++q<J;){var fe=P[q];this.set(fe[0],fe[1])}}function Uu(){this.__data__=[],this.size=0}function $u(P){var q=this.__data__,J=Tr(q,P);if(J<0)return!1;var fe=q.length-1;return J==fe?q.pop():ee.call(q,J,1),--this.size,!0}function ku(P){var q=this.__data__,J=Tr(q,P);return J<0?void 0:q[J][1]}function qu(P){return Tr(this.__data__,P)>-1}function Mu(P,q){var J=this.__data__,fe=Tr(J,P);return fe<0?(++this.size,J.push([P,q])):J[fe][1]=q,this}ut.prototype.clear=Uu,ut.prototype.delete=$u,ut.prototype.get=ku,ut.prototype.has=qu,ut.prototype.set=Mu;function Tt(P){var q=-1,J=P==null?0:P.length;for(this.clear();++q<J;){var fe=P[q];this.set(fe[0],fe[1])}}function Bu(){this.size=0,this.__data__={hash:new At,map:new(Pe||ut),string:new At}}function ju(P){var q=br(this,P).delete(P);return this.size-=q?1:0,q}function Hu(P){return br(this,P).get(P)}function Gu(P){return br(this,P).has(P)}function Wu(P,q){var J=br(this,P),fe=J.size;return J.set(P,q),this.size+=J.size==fe?0:1,this}Tt.prototype.clear=Bu,Tt.prototype.delete=ju,Tt.prototype.get=Hu,Tt.prototype.has=Gu,Tt.prototype.set=Wu;function Ar(P){var q=-1,J=P==null?0:P.length;for(this.__data__=new Tt;++q<J;)this.add(P[q])}function Vu(P){return this.__data__.set(P,d),this}function Yu(P){return this.__data__.has(P)}Ar.prototype.add=Ar.prototype.push=Vu,Ar.prototype.has=Yu;function dt(P){var q=this.__data__=new ut(P);this.size=q.size}function zu(){this.__data__=new ut,this.size=0}function Xu(P){var q=this.__data__,J=q.delete(P);return this.size=q.size,J}function Ku(P){return this.__data__.get(P)}function Ju(P){return this.__data__.has(P)}function Qu(P,q){var J=this.__data__;if(J instanceof ut){var fe=J.__data__;if(!Pe||fe.length<g-1)return fe.push([P,q]),this.size=++J.size,this;J=this.__data__=new Tt(fe)}return J.set(P,q),this.size=J.size,this}dt.prototype.clear=zu,dt.prototype.delete=Xu,dt.prototype.get=Ku,dt.prototype.has=Ju,dt.prototype.set=Qu;function Zu(P,q){var J=Cr(P),fe=!J&&pc(P),Oe=!J&&!fe&&nn(P),Se=!J&&!fe&&!Oe&&No(P),Fe=J||fe||Oe||Se,$e=Fe?Ue(P.length,String):[],Be=$e.length;for(var Ie in P)we.call(P,Ie)&&!(Fe&&(Ie=="length"||Oe&&(Ie=="offset"||Ie=="parent")||Se&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||uc(Ie,Be)))&&$e.push(Ie);return $e}function Tr(P,q){for(var J=P.length;J--;)if(Po(P[J][0],q))return J;return-1}function ec(P,q,J){var fe=q(P);return Cr(P)?fe:Ce(fe,J(P))}function zt(P){return P==null?P===void 0?y:_:ne&&ne in Object(P)?sc(P):hc(P)}function Ao(P){return Xt(P)&&zt(P)==o}function To(P,q,J,fe,Oe){return P===q?!0:P==null||q==null||!Xt(P)&&!Xt(q)?P!==P&&q!==q:tc(P,q,J,fe,To,Oe)}function tc(P,q,J,fe,Oe,Se){var Fe=Cr(P),$e=Cr(q),Be=Fe?t:ht(P),Ie=$e?t:ht(q);Be=Be==o?A:Be,Ie=Ie==o?A:Ie;var ze=Be==A,rt=Ie==A,je=Be==Ie;if(je&&nn(P)){if(!nn(q))return!1;Fe=!0,ze=!1}if(je&&!ze)return Se||(Se=new dt),Fe||No(P)?bo(P,q,J,fe,Oe,Se):oc(P,q,Be,J,fe,Oe,Se);if(!(J&l)){var Je=ze&&we.call(P,"__wrapped__"),Qe=rt&&we.call(q,"__wrapped__");if(Je||Qe){var pt=Je?P.value():P,ct=Qe?q.value():q;return Se||(Se=new dt),Oe(pt,ct,J,fe,Se)}}return je?(Se||(Se=new dt),ac(P,q,J,fe,Oe,Se)):!1}function rc(P){if(!Io(P)||fc(P))return!1;var q=Oo(P)?Le:de;return q.test(bt(P))}function nc(P){return Xt(P)&&Do(P.length)&&!!M[zt(P)]}function ic(P){if(!dc(P))return ve(P);var q=[];for(var J in Object(P))we.call(P,J)&&J!="constructor"&&q.push(J);return q}function bo(P,q,J,fe,Oe,Se){var Fe=J&l,$e=P.length,Be=q.length;if($e!=Be&&!(Fe&&Be>$e))return!1;var Ie=Se.get(P);if(Ie&&Se.get(q))return Ie==q;var ze=-1,rt=!0,je=J&c?new Ar:void 0;for(Se.set(P,q),Se.set(q,P);++ze<$e;){var Je=P[ze],Qe=q[ze];if(fe)var pt=Fe?fe(Qe,Je,ze,q,P,Se):fe(Je,Qe,ze,P,q,Se);if(pt!==void 0){if(pt)continue;rt=!1;break}if(je){if(!Ae(q,function(ct,Ct){if(!lt(je,Ct)&&(Je===ct||Oe(Je,ct,J,fe,Se)))return je.push(Ct)})){rt=!1;break}}else if(!(Je===Qe||Oe(Je,Qe,J,fe,Se))){rt=!1;break}}return Se.delete(P),Se.delete(q),rt}function oc(P,q,J,fe,Oe,Se,Fe){switch(J){case N:if(P.byteLength!=q.byteLength||P.byteOffset!=q.byteOffset)return!1;P=P.buffer,q=q.buffer;case $:return!(P.byteLength!=q.byteLength||!Se(new Q(P),new Q(q)));case i:case r:case h:return Po(+P,+q);case n:return P.name==q.name&&P.message==q.message;case T:case b:return P==q+"";case v:var $e=H;case D:var Be=fe&l;if($e||($e=ae),P.size!=q.size&&!Be)return!1;var Ie=Fe.get(P);if(Ie)return Ie==q;fe|=c,Fe.set(P,q);var ze=bo($e(P),$e(q),fe,Oe,Se,Fe);return Fe.delete(P),ze;case w:if(rn)return rn.call(P)==rn.call(q)}return!1}function ac(P,q,J,fe,Oe,Se){var Fe=J&l,$e=Co(P),Be=$e.length,Ie=Co(q),ze=Ie.length;if(Be!=ze&&!Fe)return!1;for(var rt=Be;rt--;){var je=$e[rt];if(!(Fe?je in q:we.call(q,je)))return!1}var Je=Se.get(P);if(Je&&Se.get(q))return Je==q;var Qe=!0;Se.set(P,q),Se.set(q,P);for(var pt=Fe;++rt<Be;){je=$e[rt];var ct=P[je],Ct=q[je];if(fe)var xo=Fe?fe(Ct,ct,je,q,P,Se):fe(ct,Ct,je,P,q,Se);if(!(xo===void 0?ct===Ct||Oe(ct,Ct,J,fe,Se):xo)){Qe=!1;break}pt||(pt=je=="constructor")}if(Qe&&!pt){var Pr=P.constructor,Or=q.constructor;Pr!=Or&&"constructor"in P&&"constructor"in q&&!(typeof Pr=="function"&&Pr instanceof Pr&&typeof Or=="function"&&Or instanceof Or)&&(Qe=!1)}return Se.delete(P),Se.delete(q),Qe}function Co(P){return ec(P,vc,lc)}function br(P,q){var J=P.__data__;return cc(q)?J[typeof q=="string"?"string":"hash"]:J.map}function $t(P,q){var J=u(P,q);return rc(J)?J:void 0}function sc(P){var q=we.call(P,ne),J=P[ne];try{P[ne]=void 0;var fe=!0}catch{}var Oe=ge.call(P);return fe&&(q?P[ne]=J:delete P[ne]),Oe}var lc=me?function(P){return P==null?[]:(P=Object(P),ye(me(P),function(q){return K.call(P,q)}))}:yc,ht=zt;(Re&&ht(new Re(new ArrayBuffer(1)))!=N||Pe&&ht(new Pe)!=v||xe&&ht(xe.resolve())!=C||be&&ht(new be)!=D||Ut&&ht(new Ut)!=L)&&(ht=function(P){var q=zt(P),J=q==A?P.constructor:void 0,fe=J?bt(J):"";if(fe)switch(fe){case St:return N;case Cu:return v;case Pu:return C;case Ou:return D;case Du:return L}return q});function uc(P,q){return q=q??e,!!q&&(typeof P=="number"||z.test(P))&&P>-1&&P%1==0&&P<q}function cc(P){var q=typeof P;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?P!=="__proto__":P===null}function fc(P){return!!Te&&Te in P}function dc(P){var q=P&&P.constructor,J=typeof q=="function"&&q.prototype||re;return P===J}function hc(P){return ge.call(P)}function bt(P){if(P!=null){try{return Ee.call(P)}catch{}try{return P+""}catch{}}return""}function Po(P,q){return P===q||P!==P&&q!==q}var pc=Ao((function(){return arguments})())?Ao:function(P){return Xt(P)&&we.call(P,"callee")&&!K.call(P,"callee")},Cr=Array.isArray;function mc(P){return P!=null&&Do(P.length)&&!Oo(P)}var nn=ce||Ec;function gc(P,q){return To(P,q)}function Oo(P){if(!Io(P))return!1;var q=zt(P);return q==f||q==m||q==a||q==O}function Do(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=e}function Io(P){var q=typeof P;return P!=null&&(q=="object"||q=="function")}function Xt(P){return P!=null&&typeof P=="object"}var No=_e?Rt(_e):nc;function vc(P){return mc(P)?Zu(P):ic(P)}function yc(){return[]}function Ec(){return!1}s.exports=gc})(Er,Er.exports)),Er.exports}var el;function qf(){if(el)return Mt;el=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.DownloadedUpdateHelper=void 0,Mt.createTempUpdateFile=o;const s=Nt,p=Et,g=kf(),d=_t(),l=Ne;let c=class{constructor(a){this.cacheDir=a,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return l.join(this.cacheDir,"pending")}async validateDownloadedPath(a,i,r,n){if(this.versionInfo!=null&&this.file===a&&this.fileInfo!=null)return g(this.versionInfo,i)&&g(this.fileInfo.info,r.info)&&await(0,d.pathExists)(a)?a:null;const f=await this.getValidCachedUpdateFile(r,n);return f===null?null:(n.info(`Update has already been downloaded to ${a}).`),this._file=f,f)}async setDownloadedFile(a,i,r,n,f,m){this._file=a,this._packageFile=i,this.versionInfo=r,this.fileInfo=n,this._downloadedFileInfo={fileName:f,sha512:n.info.sha512,isAdminRightsRequired:n.info.isAdminRightsRequired===!0},m&&await(0,d.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,d.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(a,i){const r=this.getUpdateInfoFile();if(!await(0,d.pathExists)(r))return null;let f;try{f=await(0,d.readJson)(r)}catch(_){let A="No cached update info available";return _.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),A+=` (error on read: ${_.message})`),i.info(A),null}if(!(f?.fileName!==null))return i.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(a.info.sha512!==f.sha512)return i.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${f.sha512}, expected: ${a.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const v=l.join(this.cacheDirForPendingUpdate,f.fileName);if(!await(0,d.pathExists)(v))return i.info("Cached update file doesn't exist"),null;const h=await e(v);return a.info.sha512!==h?(i.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${h}, expected: ${a.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=f,v)}getUpdateInfoFile(){return l.join(this.cacheDirForPendingUpdate,"update-info.json")}};Mt.DownloadedUpdateHelper=c;function e(t,a="sha512",i="base64",r){return new Promise((n,f)=>{const m=(0,s.createHash)(a);m.on("error",f).setEncoding(i),(0,p.createReadStream)(t,{...r,highWaterMark:1024*1024}).on("error",f).on("end",()=>{m.end(),n(m.read())}).pipe(m,{end:!1})})}async function o(t,a,i){let r=0,n=l.join(a,t);for(let f=0;f<3;f++)try{return await(0,d.unlink)(n),n}catch(m){if(m.code==="ENOENT")return n;i.warn(`Error on remove temp update file: ${m}`),n=l.join(a,`${r++}-${t}`)}return n}return Mt}var er={},Br={},tl;function Mf(){if(tl)return Br;tl=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.getAppCacheDir=g;const s=Ne,p=Yr;function g(){const d=(0,p.homedir)();let l;return process.platform==="win32"?l=process.env.LOCALAPPDATA||s.join(d,"AppData","Local"):process.platform==="darwin"?l=s.join(d,"Library","Caches"):l=process.env.XDG_CACHE_HOME||s.join(d,".cache"),l}return Br}var rl;function Bf(){if(rl)return er;rl=1,Object.defineProperty(er,"__esModule",{value:!0}),er.ElectronAppAdapter=void 0;const s=Ne,p=Mf();let g=class{constructor(l=De.app){this.app=l}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?s.join(process.resourcesPath,"app-update.yml"):s.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,p.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(l){this.app.once("quit",(c,e)=>l(e))}};return er.ElectronAppAdapter=g,er}var to={},nl;function jf(){return nl||(nl=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.ElectronHttpExecutor=s.NET_SESSION_NAME=void 0,s.getNetSession=g;const p=Me();s.NET_SESSION_NAME="electron-updater";function g(){return De.session.fromPartition(s.NET_SESSION_NAME,{cache:!1})}class d extends p.HttpExecutor{constructor(c){super(),this.proxyLoginCallback=c,this.cachedSession=null}async download(c,e,o){return await o.cancellationToken.createPromise((t,a,i)=>{const r={headers:o.headers||void 0,redirect:"manual"};(0,p.configureRequestUrl)(c,r),(0,p.configureRequestOptions)(r),this.doDownload(r,{destination:e,options:o,onCancel:i,callback:n=>{n==null?t(e):a(n)},responseHandler:null},0)})}createRequest(c,e){c.headers&&c.headers.Host&&(c.host=c.headers.Host,delete c.headers.Host),this.cachedSession==null&&(this.cachedSession=g());const o=De.net.request({...c,session:this.cachedSession});return o.on("response",e),this.proxyLoginCallback!=null&&o.on("login",this.proxyLoginCallback),o}addRedirectHandlers(c,e,o,t,a){c.on("redirect",(i,r,n)=>{c.abort(),t>this.maxRedirects?o(this.createMaxRedirectError()):a(p.HttpExecutor.prepareRedirectUrlOptions(n,e))})}}s.ElectronHttpExecutor=d})(to)),to}var tr={},Bt={},il;function Ft(){if(il)return Bt;il=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.newBaseUrl=p,Bt.newUrlFromBase=g,Bt.getChannelFilename=d;const s=wt;function p(l){const c=new s.URL(l);return c.pathname.endsWith("/")||(c.pathname+="/"),c}function g(l,c,e=!1){const o=new s.URL(l,c),t=c.search;return t!=null&&t.length!==0?o.search=t:e&&(o.search=`noCache=${Date.now().toString(32)}`),o}function d(l){return`${l}.yml`}return Bt}var ft={},ro,ol;function mu(){if(ol)return ro;ol=1;var s="[object Symbol]",p=/[\\^$.*+?()[\]{}|]/g,g=RegExp(p.source),d=typeof nt=="object"&&nt&&nt.Object===Object&&nt,l=typeof self=="object"&&self&&self.Object===Object&&self,c=d||l||Function("return this")(),e=Object.prototype,o=e.toString,t=c.Symbol,a=t?t.prototype:void 0,i=a?a.toString:void 0;function r(h){if(typeof h=="string")return h;if(f(h))return i?i.call(h):"";var _=h+"";return _=="0"&&1/h==-1/0?"-0":_}function n(h){return!!h&&typeof h=="object"}function f(h){return typeof h=="symbol"||n(h)&&o.call(h)==s}function m(h){return h==null?"":r(h)}function v(h){return h=m(h),h&&g.test(h)?h.replace(p,"\\$&"):h}return ro=v,ro}var al;function Ke(){if(al)return ft;al=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.Provider=void 0,ft.findFile=e,ft.parseUpdateInfo=o,ft.getFileList=t,ft.resolveFiles=a;const s=Me(),p=fo(),g=wt,d=Ft(),l=mu();let c=class{constructor(r){this.runtimeOptions=r,this.requestHeaders=null,this.executor=r.executor}getBlockMapFiles(r,n,f,m=null){const v=(0,d.newUrlFromBase)(`${r.pathname}.blockmap`,r);return[(0,d.newUrlFromBase)(`${r.pathname.replace(new RegExp(l(f),"g"),n)}.blockmap`,m?new g.URL(m):r),v]}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const r=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(r==="x64"?"":`-${r}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(r){return`${r}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(r){this.requestHeaders=r}httpRequest(r,n,f){return this.executor.request(this.createRequestOptions(r,n),f)}createRequestOptions(r,n){const f={};return this.requestHeaders==null?n!=null&&(f.headers=n):f.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,s.configureRequestUrl)(r,f),f}};ft.Provider=c;function e(i,r,n){var f;if(i.length===0)throw(0,s.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const m=i.filter(h=>h.url.pathname.toLowerCase().endsWith(`.${r.toLowerCase()}`)),v=(f=m.find(h=>[h.url.pathname,h.info.url].some(_=>_.includes(process.arch))))!==null&&f!==void 0?f:m.shift();return v||(n==null?i[0]:i.find(h=>!n.some(_=>h.url.pathname.toLowerCase().endsWith(`.${_.toLowerCase()}`))))}function o(i,r,n){if(i==null)throw(0,s.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let f;try{f=(0,p.load)(i)}catch(m){throw(0,s.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${n}): ${m.stack||m.message}, rawData: ${i}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return f}function t(i){const r=i.files;if(r!=null&&r.length>0)return r;if(i.path!=null)return[{url:i.path,sha2:i.sha2,sha512:i.sha512}];throw(0,s.newError)(`No files provided: ${(0,s.safeStringifyJson)(i)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function a(i,r,n=f=>f){const m=t(i).map(_=>{if(_.sha2==null&&_.sha512==null)throw(0,s.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,s.safeStringifyJson)(_)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,d.newUrlFromBase)(n(_.url),r),info:_}}),v=i.packages,h=v==null?null:v[process.arch]||v.ia32;return h!=null&&(m[0].packageInfo={...h,path:(0,d.newUrlFromBase)(n(h.path),r).href}),m}return ft}var sl;function gu(){if(sl)return tr;sl=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.GenericProvider=void 0;const s=Me(),p=Ft(),g=Ke();let d=class extends g.Provider{constructor(c,e,o){super(o),this.configuration=c,this.updater=e,this.baseUrl=(0,p.newBaseUrl)(this.configuration.url)}get channel(){const c=this.updater.channel||this.configuration.channel;return c==null?this.getDefaultChannelName():this.getCustomChannelName(c)}async getLatestVersion(){const c=(0,p.getChannelFilename)(this.channel),e=(0,p.newUrlFromBase)(c,this.baseUrl,this.updater.isAddNoCacheQuery);for(let o=0;;o++)try{return(0,g.parseUpdateInfo)(await this.httpRequest(e),c,e)}catch(t){if(t instanceof s.HttpError&&t.statusCode===404)throw(0,s.newError)(`Cannot find channel "${c}" update info: ${t.stack||t.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(t.code==="ECONNREFUSED"&&o<3){await new Promise((a,i)=>{try{setTimeout(a,1e3*o)}catch(r){i(r)}});continue}throw t}}resolveFiles(c){return(0,g.resolveFiles)(c,this.baseUrl)}};return tr.GenericProvider=d,tr}var rr={},nr={},ll;function Hf(){if(ll)return nr;ll=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.BitbucketProvider=void 0;const s=Me(),p=Ft(),g=Ke();let d=class extends g.Provider{constructor(c,e,o){super({...o,isUseMultipleRangeRequest:!1}),this.configuration=c,this.updater=e;const{owner:t,slug:a}=c;this.baseUrl=(0,p.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${t}/${a}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const c=new s.CancellationToken,e=(0,p.getChannelFilename)(this.getCustomChannelName(this.channel)),o=(0,p.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);try{const t=await this.httpRequest(o,void 0,c);return(0,g.parseUpdateInfo)(t,e,o)}catch(t){throw(0,s.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${t.stack||t.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(c){return(0,g.resolveFiles)(c,this.baseUrl)}toString(){const{owner:c,slug:e}=this.configuration;return`Bitbucket (owner: ${c}, slug: ${e}, channel: ${this.channel})`}};return nr.BitbucketProvider=d,nr}var gt={},ul;function vu(){if(ul)return gt;ul=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.GitHubProvider=gt.BaseGitHubProvider=void 0,gt.computeReleaseNotes=a;const s=Me(),p=pu(),g=wt,d=Ft(),l=Ke(),c=/\/tag\/([^/]+)$/;class e extends l.Provider{constructor(r,n,f){super({...f,isUseMultipleRangeRequest:!1}),this.options=r,this.baseUrl=(0,d.newBaseUrl)((0,s.githubUrl)(r,n));const m=n==="github.com"?"api.github.com":n;this.baseApiUrl=(0,d.newBaseUrl)((0,s.githubUrl)(r,m))}computeGithubBasePath(r){const n=this.options.host;return n&&!["github.com","api.github.com"].includes(n)?`/api/v3${r}`:r}}gt.BaseGitHubProvider=e;let o=class extends e{constructor(r,n,f){super(r,"github.com",f),this.options=r,this.updater=n}get channel(){const r=this.updater.channel||this.options.channel;return r==null?this.getDefaultChannelName():this.getCustomChannelName(r)}async getLatestVersion(){var r,n,f,m,v;const h=new s.CancellationToken,_=await this.httpRequest((0,d.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},h),A=(0,s.parseXml)(_);let C=A.element("entry",!1,"No published versions on GitHub"),O=null;try{if(this.updater.allowPrerelease){const L=((r=this.updater)===null||r===void 0?void 0:r.channel)||((n=p.prerelease(this.updater.currentVersion))===null||n===void 0?void 0:n[0])||null;if(L===null)O=c.exec(C.element("link").attribute("href"))[1];else for(const $ of A.getElements("entry")){const N=c.exec($.element("link").attribute("href"));if(N===null)continue;const k=N[1],F=((f=p.prerelease(k))===null||f===void 0?void 0:f[0])||null,I=!L||["alpha","beta"].includes(L),U=F!==null&&!["alpha","beta"].includes(String(F));if(I&&!U&&!(L==="beta"&&F==="alpha")){O=k;break}if(F&&F===L){O=k;break}}}else{O=await this.getLatestTagName(h);for(const L of A.getElements("entry"))if(c.exec(L.element("link").attribute("href"))[1]===O){C=L;break}}}catch(L){throw(0,s.newError)(`Cannot parse releases feed: ${L.stack||L.message},
XML:
${_}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(O==null)throw(0,s.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let T,D="",b="";const w=async L=>{D=(0,d.getChannelFilename)(L),b=(0,d.newUrlFromBase)(this.getBaseDownloadPath(String(O),D),this.baseUrl);const $=this.createRequestOptions(b);try{return await this.executor.request($,h)}catch(N){throw N instanceof s.HttpError&&N.statusCode===404?(0,s.newError)(`Cannot find ${D} in the latest release artifacts (${b}): ${N.stack||N.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):N}};try{let L=this.channel;this.updater.allowPrerelease&&(!((m=p.prerelease(O))===null||m===void 0)&&m[0])&&(L=this.getCustomChannelName(String((v=p.prerelease(O))===null||v===void 0?void 0:v[0]))),T=await w(L)}catch(L){if(this.updater.allowPrerelease)T=await w(this.getDefaultChannelName());else throw L}const y=(0,l.parseUpdateInfo)(T,D,b);return y.releaseName==null&&(y.releaseName=C.elementValueOrEmpty("title")),y.releaseNotes==null&&(y.releaseNotes=a(this.updater.currentVersion,this.updater.fullChangelog,A,C)),{tag:O,...y}}async getLatestTagName(r){const n=this.options,f=n.host==null||n.host==="github.com"?(0,d.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new g.URL(`${this.computeGithubBasePath(`/repos/${n.owner}/${n.repo}/releases`)}/latest`,this.baseApiUrl);try{const m=await this.httpRequest(f,{Accept:"application/json"},r);return m==null?null:JSON.parse(m).tag_name}catch(m){throw(0,s.newError)(`Unable to find latest version on GitHub (${f}), please ensure a production release exists: ${m.stack||m.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(r){return(0,l.resolveFiles)(r,this.baseUrl,n=>this.getBaseDownloadPath(r.tag,n.replace(/ /g,"-")))}getBaseDownloadPath(r,n){return`${this.basePath}/download/${r}/${n}`}};gt.GitHubProvider=o;function t(i){const r=i.elementValueOrEmpty("content");return r==="No content."?"":r}function a(i,r,n,f){if(!r)return t(f);const m=[];for(const v of n.getElements("entry")){const h=/\/tag\/v?([^/]+)$/.exec(v.element("link").attribute("href"))[1];p.valid(h)&&p.lt(i,h)&&m.push({version:h,note:t(v)})}return m.sort((v,h)=>p.rcompare(v.version,h.version))}return gt}var ir={},cl;function Gf(){if(cl)return ir;cl=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.GitLabProvider=void 0;const s=Me(),p=wt,g=mu(),d=Ft(),l=Ke();let c=class extends l.Provider{normalizeFilename(o){return o.replace(/ |_/g,"-")}constructor(o,t,a){super({...a,isUseMultipleRangeRequest:!1}),this.options=o,this.updater=t,this.cachedLatestVersion=null;const r=o.host||"gitlab.com";this.baseApiUrl=(0,d.newBaseUrl)(`https://${r}/api/v4`)}get channel(){const o=this.updater.channel||this.options.channel;return o==null?this.getDefaultChannelName():this.getCustomChannelName(o)}async getLatestVersion(){const o=new s.CancellationToken,t=(0,d.newUrlFromBase)(`projects/${this.options.projectId}/releases/permalink/latest`,this.baseApiUrl);let a;try{const A={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},C=await this.httpRequest(t,A,o);if(!C)throw(0,s.newError)("No latest release found","ERR_UPDATER_NO_PUBLISHED_VERSIONS");a=JSON.parse(C)}catch(A){throw(0,s.newError)(`Unable to find latest release on GitLab (${t}): ${A.stack||A.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}const i=a.tag_name;let r=null,n="",f=null;const m=async A=>{n=(0,d.getChannelFilename)(A);const C=a.assets.links.find(T=>T.name===n);if(!C)throw(0,s.newError)(`Cannot find ${n} in the latest release assets`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");f=new p.URL(C.direct_asset_url);const O=this.options.token?{"PRIVATE-TOKEN":this.options.token}:void 0;try{const T=await this.httpRequest(f,O,o);if(!T)throw(0,s.newError)(`Empty response from ${f}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");return T}catch(T){throw T instanceof s.HttpError&&T.statusCode===404?(0,s.newError)(`Cannot find ${n} in the latest release artifacts (${f}): ${T.stack||T.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):T}};try{r=await m(this.channel)}catch(A){if(this.channel!==this.getDefaultChannelName())r=await m(this.getDefaultChannelName());else throw A}if(!r)throw(0,s.newError)(`Unable to parse channel data from ${n}`,"ERR_UPDATER_INVALID_UPDATE_INFO");const v=(0,l.parseUpdateInfo)(r,n,f);v.releaseName==null&&(v.releaseName=a.name),v.releaseNotes==null&&(v.releaseNotes=a.description||null);const h=new Map;for(const A of a.assets.links)h.set(this.normalizeFilename(A.name),A.direct_asset_url);const _={tag:i,assets:h,...v};return this.cachedLatestVersion=_,_}convertAssetsToMap(o){const t=new Map;for(const a of o.links)t.set(this.normalizeFilename(a.name),a.direct_asset_url);return t}findBlockMapInAssets(o,t){const a=[`${t}.blockmap`,`${this.normalizeFilename(t)}.blockmap`];for(const i of a){const r=o.get(i);if(r)return new p.URL(r)}return null}async fetchReleaseInfoByVersion(o){const t=new s.CancellationToken,a=[`v${o}`,o];for(const i of a){const r=(0,d.newUrlFromBase)(`projects/${this.options.projectId}/releases/${encodeURIComponent(i)}`,this.baseApiUrl);try{const n={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},f=await this.httpRequest(r,n,t);if(f)return JSON.parse(f)}catch(n){if(n instanceof s.HttpError&&n.statusCode===404)continue;throw(0,s.newError)(`Unable to find release ${i} on GitLab (${r}): ${n.stack||n.message}`,"ERR_UPDATER_RELEASE_NOT_FOUND")}}throw(0,s.newError)(`Unable to find release with version ${o} (tried: ${a.join(", ")}) on GitLab`,"ERR_UPDATER_RELEASE_NOT_FOUND")}setAuthHeaderForToken(o){const t={};return o!=null&&(o.startsWith("Bearer")?t.authorization=o:t["PRIVATE-TOKEN"]=o),t}async getVersionInfoForBlockMap(o){if(this.cachedLatestVersion&&this.cachedLatestVersion.version===o)return this.cachedLatestVersion.assets;const t=await this.fetchReleaseInfoByVersion(o);return t&&t.assets?this.convertAssetsToMap(t.assets):null}async findBlockMapUrlsFromAssets(o,t,a){let i=null,r=null;const n=await this.getVersionInfoForBlockMap(t);n&&(i=this.findBlockMapInAssets(n,a));const f=await this.getVersionInfoForBlockMap(o);if(f){const m=a.replace(new RegExp(g(t),"g"),o);r=this.findBlockMapInAssets(f,m)}return[r,i]}async getBlockMapFiles(o,t,a,i=null){if(this.options.uploadTarget==="project_upload"){const r=o.pathname.split("/").pop()||"",[n,f]=await this.findBlockMapUrlsFromAssets(t,a,r);if(!f)throw(0,s.newError)(`Cannot find blockmap file for ${a} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");if(!n)throw(0,s.newError)(`Cannot find blockmap file for ${t} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");return[n,f]}else return super.getBlockMapFiles(o,t,a,i)}resolveFiles(o){return(0,l.getFileList)(o).map(t=>{const i=[t.url,this.normalizeFilename(t.url)].find(n=>o.assets.has(n)),r=i?o.assets.get(i):void 0;if(!r)throw(0,s.newError)(`Cannot find asset "${t.url}" in GitLab release assets. Available assets: ${Array.from(o.assets.keys()).join(", ")}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new p.URL(r),info:t}})}toString(){return`GitLab (projectId: ${this.options.projectId}, channel: ${this.channel})`}};return ir.GitLabProvider=c,ir}var or={},fl;function Wf(){if(fl)return or;fl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.KeygenProvider=void 0;const s=Me(),p=Ft(),g=Ke();let d=class extends g.Provider{constructor(c,e,o){super({...o,isUseMultipleRangeRequest:!1}),this.configuration=c,this.updater=e,this.defaultHostname="api.keygen.sh";const t=this.configuration.host||this.defaultHostname;this.baseUrl=(0,p.newBaseUrl)(`https://${t}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const c=new s.CancellationToken,e=(0,p.getChannelFilename)(this.getCustomChannelName(this.channel)),o=(0,p.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);try{const t=await this.httpRequest(o,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},c);return(0,g.parseUpdateInfo)(t,e,o)}catch(t){throw(0,s.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${t.stack||t.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(c){return(0,g.resolveFiles)(c,this.baseUrl)}toString(){const{account:c,product:e,platform:o}=this.configuration;return`Keygen (account: ${c}, product: ${e}, platform: ${o}, channel: ${this.channel})`}};return or.KeygenProvider=d,or}var ar={},dl;function Vf(){if(dl)return ar;dl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.PrivateGitHubProvider=void 0;const s=Me(),p=fo(),g=Ne,d=wt,l=Ft(),c=vu(),e=Ke();let o=class extends c.BaseGitHubProvider{constructor(a,i,r,n){super(a,"api.github.com",n),this.updater=i,this.token=r}createRequestOptions(a,i){const r=super.createRequestOptions(a,i);return r.redirect="manual",r}async getLatestVersion(){const a=new s.CancellationToken,i=(0,l.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(a),n=r.assets.find(v=>v.name===i);if(n==null)throw(0,s.newError)(`Cannot find ${i} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const f=new d.URL(n.url);let m;try{m=(0,p.load)(await this.httpRequest(f,this.configureHeaders("application/octet-stream"),a))}catch(v){throw v instanceof s.HttpError&&v.statusCode===404?(0,s.newError)(`Cannot find ${i} in the latest release artifacts (${f}): ${v.stack||v.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):v}return m.assets=r.assets,m}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(a){return{accept:a,authorization:`token ${this.token}`}}async getLatestVersionInfo(a){const i=this.updater.allowPrerelease;let r=this.basePath;i||(r=`${r}/latest`);const n=(0,l.newUrlFromBase)(r,this.baseUrl);try{const f=JSON.parse(await this.httpRequest(n,this.configureHeaders("application/vnd.github.v3+json"),a));return i?f.find(m=>m.prerelease)||f[0]:f}catch(f){throw(0,s.newError)(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${f.stack||f.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(a){return(0,e.getFileList)(a).map(i=>{const r=g.posix.basename(i.url).replace(/ /g,"-"),n=a.assets.find(f=>f!=null&&f.name===r);if(n==null)throw(0,s.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(a.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new d.URL(n.url),info:i}})}};return ar.PrivateGitHubProvider=o,ar}var hl;function Yf(){if(hl)return rr;hl=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.isUrlProbablySupportMultiRangeRequests=o,rr.createClient=t;const s=Me(),p=Hf(),g=gu(),d=vu(),l=Gf(),c=Wf(),e=Vf();function o(a){return!a.includes("s3.amazonaws.com")}function t(a,i,r){if(typeof a=="string")throw(0,s.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=a.provider;switch(n){case"github":{const f=a,m=(f.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||f.token;return m==null?new d.GitHubProvider(f,i,r):new e.PrivateGitHubProvider(f,i,m,r)}case"bitbucket":return new p.BitbucketProvider(a,i,r);case"gitlab":return new l.GitLabProvider(a,i,r);case"keygen":return new c.KeygenProvider(a,i,r);case"s3":case"spaces":return new g.GenericProvider({provider:"generic",url:(0,s.getS3LikeProviderBaseUrl)(a),channel:a.channel||null},i,{...r,isUseMultipleRangeRequest:!1});case"generic":{const f=a;return new g.GenericProvider(f,i,{...r,isUseMultipleRangeRequest:f.useMultipleRangeRequest!==!1&&o(f.url)})}case"custom":{const f=a,m=f.updateProvider;if(!m)throw(0,s.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new m(f,i,r)}default:throw(0,s.newError)(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return rr}var sr={},lr={},jt={},Ht={},pl;function Eo(){if(pl)return Ht;pl=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.OperationKind=void 0,Ht.computeOperations=p;var s;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(s||(Ht.OperationKind=s={}));function p(e,o,t){const a=c(e.files),i=c(o.files);let r=null;const n=o.files[0],f=[],m=n.name,v=a.get(m);if(v==null)throw new Error(`no file ${m} in old blockmap`);const h=i.get(m);let _=0;const{checksumToOffset:A,checksumToOldSize:C}=l(a.get(m),v.offset,t);let O=n.offset;for(let T=0;T<h.checksums.length;O+=h.sizes[T],T++){const D=h.sizes[T],b=h.checksums[T];let w=A.get(b);w!=null&&C.get(b)!==D&&(t.warn(`Checksum ("${b}") matches, but size differs (old: ${C.get(b)}, new: ${D})`),w=void 0),w===void 0?(_++,r!=null&&r.kind===s.DOWNLOAD&&r.end===O?r.end+=D:(r={kind:s.DOWNLOAD,start:O,end:O+D},d(r,f,b,T))):r!=null&&r.kind===s.COPY&&r.end===w?r.end+=D:(r={kind:s.COPY,start:w,end:w+D},d(r,f,b,T))}return _>0&&t.info(`File${n.name==="file"?"":" "+n.name} has ${_} changed blocks`),f}const g=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function d(e,o,t,a){if(g&&o.length!==0){const i=o[o.length-1];if(i.kind===e.kind&&e.start<i.end&&e.start>i.start){const r=[i.start,i.end,e.start,e.end].reduce((n,f)=>n<f?n:f);throw new Error(`operation (block index: ${a}, checksum: ${t}, kind: ${s[e.kind]}) overlaps previous operation (checksum: ${t}):
abs: ${i.start} until ${i.end} and ${e.start} until ${e.end}
rel: ${i.start-r} until ${i.end-r} and ${e.start-r} until ${e.end-r}`)}}o.push(e)}function l(e,o,t){const a=new Map,i=new Map;let r=o;for(let n=0;n<e.checksums.length;n++){const f=e.checksums[n],m=e.sizes[n],v=i.get(f);if(v===void 0)a.set(f,r),i.set(f,m);else if(t.debug!=null){const h=v===m?"(same size)":`(size: ${v}, this size: ${m})`;t.debug(`${f} duplicated in blockmap ${h}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}r+=m}return{checksumToOffset:a,checksumToOldSize:i}}function c(e){const o=new Map;for(const t of e)o.set(t.name,t);return o}return Ht}var ml;function yu(){if(ml)return jt;ml=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.DataSplitter=void 0,jt.copyData=e;const s=Me(),p=Et,g=wr,d=Eo(),l=Buffer.from(`\r
\r
`);var c;(function(t){t[t.INIT=0]="INIT",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY"})(c||(c={}));function e(t,a,i,r,n){const f=(0,p.createReadStream)("",{fd:i,autoClose:!1,start:t.start,end:t.end-1});f.on("error",r),f.once("end",n),f.pipe(a,{end:!1})}let o=class extends g.Writable{constructor(a,i,r,n,f,m,v,h){super(),this.out=a,this.options=i,this.partIndexToTaskIndex=r,this.partIndexToLength=f,this.finishHandler=m,this.grandTotalBytes=v,this.onProgress=h,this.start=Date.now(),this.nextUpdate=this.start+1e3,this.transferred=0,this.delta=0,this.partIndex=-1,this.headerListBuffer=null,this.readState=c.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=n.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(a,i,r){if(this.isFinished){console.error(`Trailing ignored data: ${a.length} bytes`);return}this.handleData(a).then(()=>{if(this.onProgress){const n=Date.now();(n>=this.nextUpdate||this.transferred===this.grandTotalBytes)&&this.grandTotalBytes&&(n-this.start)/1e3&&(this.nextUpdate=n+1e3,this.onProgress({total:this.grandTotalBytes,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.grandTotalBytes*100,bytesPerSecond:Math.round(this.transferred/((n-this.start)/1e3))}),this.delta=0)}r()}).catch(r)}async handleData(a){let i=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,s.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,a.length);this.ignoreByteCount-=r,i=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,a.length);this.remainingPartDataCount-=r,await this.processPartData(a,0,r),i=r}if(i!==a.length){if(this.readState===c.HEADER){const r=this.searchHeaderListEnd(a,i);if(r===-1)return;i=r,this.readState=c.BODY,this.headerListBuffer=null}for(;;){if(this.readState===c.BODY)this.readState=c.INIT;else{this.partIndex++;let m=this.partIndexToTaskIndex.get(this.partIndex);if(m==null)if(this.isFinished)m=this.options.end;else throw(0,s.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const v=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(v<m)await this.copyExistingData(v,m);else if(v>m)throw(0,s.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(i=this.searchHeaderListEnd(a,i),i===-1){this.readState=c.HEADER;return}}const r=this.partIndexToLength[this.partIndex],n=i+r,f=Math.min(n,a.length);if(await this.processPartStarted(a,i,f),this.remainingPartDataCount=r-(f-i),this.remainingPartDataCount>0)return;if(i=n+this.boundaryLength,i>=a.length){this.ignoreByteCount=this.boundaryLength-(a.length-n);return}}}}copyExistingData(a,i){return new Promise((r,n)=>{const f=()=>{if(a===i){r();return}const m=this.options.tasks[a];if(m.kind!==d.OperationKind.COPY){n(new Error("Task kind must be COPY"));return}e(m,this.out,this.options.oldFileFd,n,()=>{a++,f()})};f()})}searchHeaderListEnd(a,i){const r=a.indexOf(l,i);if(r!==-1)return r+l.length;const n=i===0?a:a.slice(i);return this.headerListBuffer==null?this.headerListBuffer=n:this.headerListBuffer=Buffer.concat([this.headerListBuffer,n]),-1}onPartEnd(){const a=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==a)throw(0,s.newError)(`Expected length: ${a} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(a,i,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(a,i,r)}processPartData(a,i,r){this.actualPartLength+=r-i,this.transferred+=r-i,this.delta+=r-i;const n=this.out;return n.write(i===0&&a.length===r?a:a.slice(i,r))?Promise.resolve():new Promise((f,m)=>{n.on("error",m),n.once("drain",()=>{n.removeListener("error",m),f()})})}};return jt.DataSplitter=o,jt}var ur={},gl;function zf(){if(gl)return ur;gl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.executeTasksUsingMultipleRangeRequests=d,ur.checkIsRangesSupported=c;const s=Me(),p=yu(),g=Eo();function d(e,o,t,a,i){const r=n=>{if(n>=o.length){e.fileMetadataBuffer!=null&&t.write(e.fileMetadataBuffer),t.end();return}const f=n+1e3;l(e,{tasks:o,start:n,end:Math.min(o.length,f),oldFileFd:a},t,()=>r(f),i)};return r}function l(e,o,t,a,i){let r="bytes=",n=0,f=0;const m=new Map,v=[];for(let A=o.start;A<o.end;A++){const C=o.tasks[A];C.kind===g.OperationKind.DOWNLOAD&&(r+=`${C.start}-${C.end-1}, `,m.set(n,A),n++,v.push(C.end-C.start),f+=C.end-C.start)}if(n<=1){const A=C=>{if(C>=o.end){a();return}const O=o.tasks[C++];if(O.kind===g.OperationKind.COPY)(0,p.copyData)(O,t,o.oldFileFd,i,()=>A(C));else{const T=e.createRequestOptions();T.headers.Range=`bytes=${O.start}-${O.end-1}`;const D=e.httpExecutor.createRequest(T,b=>{b.on("error",i),c(b,i)&&(b.pipe(t,{end:!1}),b.once("end",()=>A(C)))});e.httpExecutor.addErrorAndTimeoutHandlers(D,i),D.end()}};A(o.start);return}const h=e.createRequestOptions();h.headers.Range=r.substring(0,r.length-2);const _=e.httpExecutor.createRequest(h,A=>{if(!c(A,i))return;const C=(0,s.safeGetHeader)(A,"content-type"),O=/^multipart\/.+?\s*;\s*boundary=(?:"([^"]+)"|([^\s";]+))\s*$/i.exec(C);if(O==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${C}"`));return}const T=new p.DataSplitter(t,o,m,O[1]||O[2],v,a,f,e.options.onProgress);T.on("error",i),A.pipe(T),A.on("end",()=>{setTimeout(()=>{_.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(_,i),_.end()}function c(e,o){if(e.statusCode>=400)return o((0,s.createHttpError)(e)),!1;if(e.statusCode!==206){const t=(0,s.safeGetHeader)(e,"accept-ranges");if(t==null||t==="none")return o(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}return ur}var cr={},vl;function Xf(){if(vl)return cr;vl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.ProgressDifferentialDownloadCallbackTransform=void 0;const s=wr;var p;(function(d){d[d.COPY=0]="COPY",d[d.DOWNLOAD=1]="DOWNLOAD"})(p||(p={}));let g=class extends s.Transform{constructor(l,c,e){super(),this.progressDifferentialDownloadInfo=l,this.cancellationToken=c,this.onProgress=e,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=p.COPY,this.nextUpdate=this.start+1e3}_transform(l,c,e){if(this.cancellationToken.cancelled){e(new Error("cancelled"),null);return}if(this.operationType==p.COPY){e(null,l);return}this.transferred+=l.length,this.delta+=l.length;const o=Date.now();o>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=o+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((o-this.start)/1e3))}),this.delta=0),e(null,l)}beginFileCopy(){this.operationType=p.COPY}beginRangeDownload(){this.operationType=p.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(l){if(this.cancellationToken.cancelled){l(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,l(null)}};return cr.ProgressDifferentialDownloadCallbackTransform=g,cr}var yl;function Eu(){if(yl)return lr;yl=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.DifferentialDownloader=void 0;const s=Me(),p=_t(),g=Et,d=yu(),l=wt,c=Eo(),e=zf(),o=Xf();let t=class{constructor(n,f,m){this.blockAwareFileInfo=n,this.httpExecutor=f,this.options=m,this.fileMetadataBuffer=null,this.logger=m.logger}createRequestOptions(){const n={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,s.configureRequestUrl)(this.options.newUrl,n),(0,s.configureRequestOptions)(n),n}doDownload(n,f){if(n.version!==f.version)throw new Error(`version is different (${n.version} - ${f.version}), full download is required`);const m=this.logger,v=(0,c.computeOperations)(n,f,m);m.debug!=null&&m.debug(JSON.stringify(v,null,2));let h=0,_=0;for(const C of v){const O=C.end-C.start;C.kind===c.OperationKind.DOWNLOAD?h+=O:_+=O}const A=this.blockAwareFileInfo.size;if(h+_+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==A)throw new Error(`Internal error, size mismatch: downloadSize: ${h}, copySize: ${_}, newSize: ${A}`);return m.info(`Full: ${a(A)}, To download: ${a(h)} (${Math.round(h/(A/100))}%)`),this.downloadFile(v)}downloadFile(n){const f=[],m=()=>Promise.all(f.map(v=>(0,p.close)(v.descriptor).catch(h=>{this.logger.error(`cannot close file "${v.path}": ${h}`)})));return this.doDownloadFile(n,f).then(m).catch(v=>m().catch(h=>{try{this.logger.error(`cannot close files: ${h}`)}catch(_){try{console.error(_)}catch{}}throw v}).then(()=>{throw v}))}async doDownloadFile(n,f){const m=await(0,p.open)(this.options.oldFile,"r");f.push({descriptor:m,path:this.options.oldFile});const v=await(0,p.open)(this.options.newFile,"w");f.push({descriptor:v,path:this.options.newFile});const h=(0,g.createWriteStream)(this.options.newFile,{fd:v});await new Promise((_,A)=>{const C=[];let O;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const N=[];let k=0;for(const I of n)I.kind===c.OperationKind.DOWNLOAD&&(N.push(I.end-I.start),k+=I.end-I.start);const F={expectedByteCounts:N,grandTotal:k};O=new o.ProgressDifferentialDownloadCallbackTransform(F,this.options.cancellationToken,this.options.onProgress),C.push(O)}const T=new s.DigestTransform(this.blockAwareFileInfo.sha512);T.isValidateOnEnd=!1,C.push(T),h.on("finish",()=>{h.close(()=>{f.splice(1,1);try{T.validate()}catch(N){A(N);return}_(void 0)})}),C.push(h);let D=null;for(const N of C)N.on("error",A),D==null?D=N:D=D.pipe(N);const b=C[0];let w;if(this.options.isUseMultipleRangeRequest){w=(0,e.executeTasksUsingMultipleRangeRequests)(this,n,b,m,A),w(0);return}let y=0,L=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const $=this.createRequestOptions();$.redirect="manual",w=N=>{var k,F;if(N>=n.length){this.fileMetadataBuffer!=null&&b.write(this.fileMetadataBuffer),b.end();return}const I=n[N++];if(I.kind===c.OperationKind.COPY){O&&O.beginFileCopy(),(0,d.copyData)(I,b,m,A,()=>w(N));return}const U=`bytes=${I.start}-${I.end-1}`;$.headers.range=U,(F=(k=this.logger)===null||k===void 0?void 0:k.debug)===null||F===void 0||F.call(k,`download range: ${U}`),O&&O.beginRangeDownload();const B=this.httpExecutor.createRequest($,V=>{V.on("error",A),V.on("aborted",()=>{A(new Error("response has been aborted by the server"))}),V.statusCode>=400&&A((0,s.createHttpError)(V)),V.pipe(b,{end:!1}),V.once("end",()=>{O&&O.endRangeDownload(),++y===100?(y=0,setTimeout(()=>w(N),1e3)):w(N)})});B.on("redirect",(V,W,Z)=>{this.logger.info(`Redirect to ${i(Z)}`),L=Z,(0,s.configureRequestUrl)(new l.URL(L),$),B.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(B,A),B.end()},w(0)})}async readRemoteBytes(n,f){const m=Buffer.allocUnsafe(f+1-n),v=this.createRequestOptions();v.headers.range=`bytes=${n}-${f}`;let h=0;if(await this.request(v,_=>{_.copy(m,h),h+=_.length}),h!==m.length)throw new Error(`Received data length ${h} is not equal to expected ${m.length}`);return m}request(n,f){return new Promise((m,v)=>{const h=this.httpExecutor.createRequest(n,_=>{(0,e.checkIsRangesSupported)(_,v)&&(_.on("error",v),_.on("aborted",()=>{v(new Error("response has been aborted by the server"))}),_.on("data",f),_.on("end",()=>m()))});this.httpExecutor.addErrorAndTimeoutHandlers(h,v),h.end()})}};lr.DifferentialDownloader=t;function a(r,n=" KB"){return new Intl.NumberFormat("en").format((r/1024).toFixed(2))+n}function i(r){const n=r.indexOf("?");return n<0?r:r.substring(0,n)}return lr}var El;function Kf(){if(El)return sr;El=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.GenericDifferentialDownloader=void 0;const s=Eu();let p=class extends s.DifferentialDownloader{download(d,l){return this.doDownload(d,l)}};return sr.GenericDifferentialDownloader=p,sr}var no={},wl;function Lt(){return wl||(wl=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.UpdaterSignal=s.UPDATE_DOWNLOADED=s.DOWNLOAD_PROGRESS=s.CancellationToken=void 0,s.addHandler=d;const p=Me();Object.defineProperty(s,"CancellationToken",{enumerable:!0,get:function(){return p.CancellationToken}}),s.DOWNLOAD_PROGRESS="download-progress",s.UPDATE_DOWNLOADED="update-downloaded";class g{constructor(c){this.emitter=c}login(c){d(this.emitter,"login",c)}progress(c){d(this.emitter,s.DOWNLOAD_PROGRESS,c)}updateDownloaded(c){d(this.emitter,s.UPDATE_DOWNLOADED,c)}updateCancelled(c){d(this.emitter,"update-cancelled",c)}}s.UpdaterSignal=g;function d(l,c,e){l.on(c,e)}})(no)),no}var _l;function wo(){if(_l)return Ot;_l=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.NoOpLogger=Ot.AppUpdater=void 0;const s=Me(),p=Nt,g=Yr,d=Bl,l=_t(),c=fo(),e=hf(),o=Ne,t=pu(),a=qf(),i=Bf(),r=jf(),n=gu(),f=Yf(),m=Hl,v=Kf(),h=Lt();let _=class wu extends d.EventEmitter{get channel(){return this._channel}set channel(T){if(this._channel!=null){if(typeof T!="string")throw(0,s.newError)(`Channel must be a string, but got: ${T}`,"ERR_UPDATER_INVALID_CHANNEL");if(T.length===0)throw(0,s.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=T,this.allowDowngrade=!0}addAuthHeader(T){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:T})}get netSession(){return(0,r.getNetSession)()}get logger(){return this._logger}set logger(T){this._logger=T??new C}set updateConfigPath(T){this.clientPromise=null,this._appUpdateConfigPath=T,this.configOnDisk=new e.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(T){T&&(this._isUpdateSupported=T)}get isUserWithinRollout(){return this._isUserWithinRollout}set isUserWithinRollout(T){T&&(this._isUserWithinRollout=T)}constructor(T,D){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this.previousBlockmapBaseUrlOverride=null,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new h.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=y=>this.checkIfUpdateSupported(y),this._isUserWithinRollout=y=>this.isStagingMatch(y),this.clientPromise=null,this.stagingUserIdPromise=new e.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new e.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",y=>{this._logger.error(`Error: ${y.stack||y.message}`)}),D==null?(this.app=new i.ElectronAppAdapter,this.httpExecutor=new r.ElectronHttpExecutor((y,L)=>this.emit("login",y,L))):(this.app=D,this.httpExecutor=null);const b=this.app.version,w=(0,t.parse)(b);if(w==null)throw(0,s.newError)(`App version is not a valid semver version: "${b}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=w,this.allowPrerelease=A(w),T!=null&&(this.setFeedURL(T),typeof T!="string"&&T.requestHeaders&&(this.requestHeaders=T.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(T){const D=this.createProviderRuntimeOptions();let b;typeof T=="string"?b=new n.GenericProvider({provider:"generic",url:T},this,{...D,isUseMultipleRangeRequest:(0,f.isUrlProbablySupportMultiRangeRequests)(T)}):b=(0,f.createClient)(T,this,D),this.clientPromise=Promise.resolve(b)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let T=this.checkForUpdatesPromise;if(T!=null)return this._logger.info("Checking for update (already in progress)"),T;const D=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),T=this.doCheckForUpdates().then(b=>(D(),b)).catch(b=>{throw D(),this.emit("error",b,`Cannot check for updates: ${(b.stack||b).toString()}`),b}),this.checkForUpdatesPromise=T,T}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(T){return this.checkForUpdates().then(D=>D?.downloadPromise?(D.downloadPromise.then(()=>{const b=wu.formatDownloadNotification(D.updateInfo.version,this.app.name,T);new De.Notification(b).show()}),D):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),D))}static formatDownloadNotification(T,D,b){return b==null&&(b={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),b={title:b.title.replace("{appName}",D).replace("{version}",T),body:b.body.replace("{appName}",D).replace("{version}",T)},b}async isStagingMatch(T){const D=T.stagingPercentage;let b=D;if(b==null)return!0;if(b=parseInt(b,10),isNaN(b))return this._logger.warn(`Staging percentage is NaN: ${D}`),!0;b=b/100;const w=await this.stagingUserIdPromise.value,L=s.UUID.parse(w).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${b}, percentage: ${L}, user id: ${w}`),L<b}computeFinalHeaders(T){return this.requestHeaders!=null&&Object.assign(T,this.requestHeaders),T}async isUpdateAvailable(T){const D=(0,t.parse)(T.version);if(D==null)throw(0,s.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${T.version}"`,"ERR_UPDATER_INVALID_VERSION");const b=this.currentVersion;if((0,t.eq)(D,b)||!await Promise.resolve(this.isUpdateSupported(T))||!await Promise.resolve(this.isUserWithinRollout(T)))return!1;const y=(0,t.gt)(D,b),L=(0,t.lt)(D,b);return y?!0:this.allowDowngrade&&L}checkIfUpdateSupported(T){const D=T?.minimumSystemVersion,b=(0,g.release)();if(D)try{if((0,t.lt)(b,D))return this._logger.info(`Current OS version ${b} is less than the minimum OS version required ${D} for version ${b}`),!1}catch(w){this._logger.warn(`Failed to compare current OS version(${b}) with minimum OS version(${D}): ${(w.message||w).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(b=>(0,f.createClient)(b,this,this.createProviderRuntimeOptions())));const T=await this.clientPromise,D=await this.stagingUserIdPromise.value;return T.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":D})),{info:await T.getLatestVersion(),provider:T}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const T=await this.getUpdateInfoAndProvider(),D=T.info;if(!await this.isUpdateAvailable(D))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${D.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",D),{isUpdateAvailable:!1,versionInfo:D,updateInfo:D};this.updateInfoAndProvider=T,this.onUpdateAvailable(D);const b=new s.CancellationToken;return{isUpdateAvailable:!0,versionInfo:D,updateInfo:D,cancellationToken:b,downloadPromise:this.autoDownload?this.downloadUpdate(b):null}}onUpdateAvailable(T){this._logger.info(`Found version ${T.version} (url: ${(0,s.asArray)(T.files).map(D=>D.url).join(", ")})`),this.emit("update-available",T)}downloadUpdate(T=new s.CancellationToken){const D=this.updateInfoAndProvider;if(D==null){const w=new Error("Please check update first");return this.dispatchError(w),Promise.reject(w)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,s.asArray)(D.info.files).map(w=>w.url).join(", ")}`);const b=w=>{if(!(w instanceof s.CancellationError))try{this.dispatchError(w)}catch(y){this._logger.warn(`Cannot dispatch error event: ${y.stack||y}`)}return w};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:D,requestHeaders:this.computeRequestHeaders(D.provider),cancellationToken:T,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(w=>{throw b(w)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(T){this.emit("error",T,(T.stack||T).toString())}dispatchUpdateDownloaded(T){this.emit(h.UPDATE_DOWNLOADED,T)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,c.load)(await(0,l.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(T){const D=T.fileExtraDownloadHeaders;if(D!=null){const b=this.requestHeaders;return b==null?D:{...D,...b}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const T=o.join(this.app.userDataPath,".updaterId");try{const b=await(0,l.readFile)(T,"utf-8");if(s.UUID.check(b))return b;this._logger.warn(`Staging user id file exists, but content was invalid: ${b}`)}catch(b){b.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${b}`)}const D=s.UUID.v5((0,p.randomBytes)(4096),s.UUID.OID);this._logger.info(`Generated new staging user ID: ${D}`);try{await(0,l.outputFile)(T,D)}catch(b){this._logger.warn(`Couldn't write out staging user ID: ${b}`)}return D}get isAddNoCacheQuery(){const T=this.requestHeaders;if(T==null)return!0;for(const D of Object.keys(T)){const b=D.toLowerCase();if(b==="authorization"||b==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let T=this.downloadedUpdateHelper;if(T==null){const D=(await this.configOnDisk.value).updaterCacheDirName,b=this._logger;D==null&&b.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const w=o.join(this.app.baseCachePath,D||this.app.name);b.debug!=null&&b.debug(`updater cache dir: ${w}`),T=new a.DownloadedUpdateHelper(w),this.downloadedUpdateHelper=T}return T}async executeDownload(T){const D=T.fileInfo,b={headers:T.downloadUpdateOptions.requestHeaders,cancellationToken:T.downloadUpdateOptions.cancellationToken,sha2:D.info.sha2,sha512:D.info.sha512};this.listenerCount(h.DOWNLOAD_PROGRESS)>0&&(b.onProgress=ie=>this.emit(h.DOWNLOAD_PROGRESS,ie));const w=T.downloadUpdateOptions.updateInfoAndProvider.info,y=w.version,L=D.packageInfo;function $(){const ie=decodeURIComponent(T.fileInfo.url.pathname);return ie.toLowerCase().endsWith(`.${T.fileExtension.toLowerCase()}`)?o.basename(ie):T.fileInfo.info.url}const N=await this.getOrCreateDownloadHelper(),k=N.cacheDirForPendingUpdate;await(0,l.mkdir)(k,{recursive:!0});const F=$();let I=o.join(k,F);const U=L==null?null:o.join(k,`package-${y}${o.extname(L.path)||".7z"}`),B=async ie=>{await N.setDownloadedFile(I,U,w,D,F,ie),await T.done({...w,downloadedFile:I});const de=o.join(k,"current.blockmap");return await(0,l.pathExists)(de)&&await(0,l.copyFile)(de,o.join(N.cacheDir,"current.blockmap")),U==null?[I]:[I,U]},V=this._logger,W=await N.validateDownloadedPath(I,w,D,V);if(W!=null)return I=W,await B(!1);const Z=async()=>(await N.clear().catch(()=>{}),await(0,l.unlink)(I).catch(()=>{})),ue=await(0,a.createTempUpdateFile)(`temp-${F}`,k,V);try{await T.task(ue,b,U,Z),await(0,s.retry)(()=>(0,l.rename)(ue,I),{retries:60,interval:500,shouldRetry:ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message)?!0:(V.warn(`Cannot rename temp file to final file: ${ie.message||ie.stack}`),!1)})}catch(ie){throw await Z(),ie instanceof s.CancellationError&&(V.info("cancelled"),this.emit("update-cancelled",w)),ie}return V.info(`New version ${y} has been downloaded to ${I}`),await B(!0)}async differentialDownloadInstaller(T,D,b,w,y){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const L=D.updateInfoAndProvider.provider,$=await L.getBlockMapFiles(T.url,this.app.version,D.updateInfoAndProvider.info.version,this.previousBlockmapBaseUrlOverride);this._logger.info(`Download block maps (old: "${$[0]}", new: ${$[1]})`);const N=async V=>{const W=await this.httpExecutor.downloadToBuffer(V,{headers:D.requestHeaders,cancellationToken:D.cancellationToken});if(W==null||W.length===0)throw new Error(`Blockmap "${V.href}" is empty`);try{return JSON.parse((0,m.gunzipSync)(W).toString())}catch(Z){throw new Error(`Cannot parse blockmap "${V.href}", error: ${Z}`)}},k={newUrl:T.url,oldFile:o.join(this.downloadedUpdateHelper.cacheDir,y),logger:this._logger,newFile:b,isUseMultipleRangeRequest:L.isUseMultipleRangeRequest,requestHeaders:D.requestHeaders,cancellationToken:D.cancellationToken};this.listenerCount(h.DOWNLOAD_PROGRESS)>0&&(k.onProgress=V=>this.emit(h.DOWNLOAD_PROGRESS,V));const F=async(V,W)=>{const Z=o.join(W,"current.blockmap");await(0,l.outputFile)(Z,(0,m.gzipSync)(JSON.stringify(V)))},I=async V=>{const W=o.join(V,"current.blockmap");try{if(await(0,l.pathExists)(W))return JSON.parse((0,m.gunzipSync)(await(0,l.readFile)(W)).toString())}catch(Z){this._logger.warn(`Cannot parse blockmap "${W}", error: ${Z}`)}return null},U=await N($[1]);await F(U,this.downloadedUpdateHelper.cacheDirForPendingUpdate);let B=await I(this.downloadedUpdateHelper.cacheDir);return B==null&&(B=await N($[0])),await new v.GenericDifferentialDownloader(T.info,this.httpExecutor,k).download(B,U),!1}catch(L){if(this._logger.error(`Cannot download differentially, fallback to full download: ${L.stack||L}`),this._testOnlyOptions!=null)throw L;return!0}}};Ot.AppUpdater=_;function A(O){const T=(0,t.prerelease)(O);return T!=null&&T.length>0}class C{info(T){}warn(T){}error(T){}}return Ot.NoOpLogger=C,Ot}var Rl;function tn(){if(Rl)return Kt;Rl=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.BaseUpdater=void 0;const s=Gt,p=wo();let g=class extends p.AppUpdater{constructor(l,c){super(l,c),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(l=!1,c=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(l,l?c:this.autoRunAppAfterInstall)?setImmediate(()=>{De.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(l){return super.executeDownload({...l,done:c=>(this.dispatchUpdateDownloaded(c),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(l=!1,c=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const e=this.downloadedUpdateHelper,o=this.installerPath,t=e==null?null:e.downloadedFileInfo;if(o==null||t==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${l}, isForceRunAfter: ${c}`),this.doInstall({isSilent:l,isForceRunAfter:c,isAdminRightsRequired:t.isAdminRightsRequired})}catch(a){return this.dispatchError(a),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(l=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(l!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${l}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}spawnSyncLog(l,c=[],e={}){this._logger.info(`Executing: ${l} with args: ${c}`);const o=(0,s.spawnSync)(l,c,{env:{...process.env,...e},encoding:"utf-8",shell:!0}),{error:t,status:a,stdout:i,stderr:r}=o;if(t!=null)throw this._logger.error(r),t;if(a!=null&&a!==0)throw this._logger.error(r),new Error(`Command ${l} exited with code ${a}`);return i.trim()}async spawnLog(l,c=[],e=void 0,o="ignore"){return this._logger.info(`Executing: ${l} with args: ${c}`),new Promise((t,a)=>{try{const i={stdio:o,env:e,detached:!0},r=(0,s.spawn)(l,c,i);r.on("error",n=>{a(n)}),r.unref(),r.pid!==void 0&&t(!0)}catch(i){a(i)}})}};return Kt.BaseUpdater=g,Kt}var fr={},dr={},Sl;function _u(){if(Sl)return dr;Sl=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const s=_t(),p=Eu(),g=Hl;let d=class extends p.DifferentialDownloader{async download(){const o=this.blockAwareFileInfo,t=o.size,a=t-(o.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(a,t-1);const i=l(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await c(this.options.oldFile),i)}};dr.FileWithEmbeddedBlockMapDifferentialDownloader=d;function l(e){return JSON.parse((0,g.inflateRawSync)(e).toString())}async function c(e){const o=await(0,s.open)(e,"r");try{const t=(await(0,s.fstat)(o)).size,a=Buffer.allocUnsafe(4);await(0,s.read)(o,a,0,a.length,t-a.length);const i=Buffer.allocUnsafe(a.readUInt32BE(0));return await(0,s.read)(o,i,0,i.length,t-a.length-i.length),await(0,s.close)(o),l(i)}catch(t){throw await(0,s.close)(o),t}}return dr}var Al;function Tl(){if(Al)return fr;Al=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.AppImageUpdater=void 0;const s=Me(),p=Gt,g=_t(),d=Et,l=Ne,c=tn(),e=_u(),o=Ke(),t=Lt();let a=class extends c.BaseUpdater{constructor(r,n){super(r,n)}isUpdaterActive(){return process.env.APPIMAGE==null&&!this.forceDevUpdateConfig?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(r){const n=r.updateInfoAndProvider.provider,f=(0,o.findFile)(n.resolveFiles(r.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:f,downloadUpdateOptions:r,task:async(m,v)=>{const h=process.env.APPIMAGE;if(h==null)throw(0,s.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(r.disableDifferentialDownload||await this.downloadDifferential(f,h,m,n,r))&&await this.httpExecutor.download(f.url,m,v),await(0,g.chmod)(m,493)}})}async downloadDifferential(r,n,f,m,v){try{const h={newUrl:r.url,oldFile:n,logger:this._logger,newFile:f,isUseMultipleRangeRequest:m.isUseMultipleRangeRequest,requestHeaders:v.requestHeaders,cancellationToken:v.cancellationToken};return this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(h.onProgress=_=>this.emit(t.DOWNLOAD_PROGRESS,_)),await new e.FileWithEmbeddedBlockMapDifferentialDownloader(r.info,this.httpExecutor,h).download(),!1}catch(h){return this._logger.error(`Cannot download differentially, fallback to full download: ${h.stack||h}`),process.platform==="linux"}}doInstall(r){const n=process.env.APPIMAGE;if(n==null)throw(0,s.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,d.unlinkSync)(n);let f;const m=l.basename(n),v=this.installerPath;if(v==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;l.basename(v)===m||!/\d+\.\d+\.\d+/.test(m)?f=n:f=l.join(l.dirname(n),l.basename(v)),(0,p.execFileSync)("mv",["-f",v,f]),f!==n&&this.emit("appimage-filename-updated",f);const h={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return r.isForceRunAfter?this.spawnLog(f,[],h):(h.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,p.execFileSync)(f,[],{env:h})),!0}};return fr.AppImageUpdater=a,fr}var hr={},pr={},bl;function _o(){if(bl)return pr;bl=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.LinuxUpdater=void 0;const s=tn();let p=class extends s.BaseUpdater{constructor(d,l){super(d,l)}isRunningAsRoot(){var d;return((d=process.getuid)===null||d===void 0?void 0:d.call(process))===0}get installerPath(){var d,l;return(l=(d=super.installerPath)===null||d===void 0?void 0:d.replace(/\\/g,"\\\\").replace(/ /g,"\\ "))!==null&&l!==void 0?l:null}runCommandWithSudoIfNeeded(d){if(this.isRunningAsRoot())return this._logger.info("Running as root, no need to use sudo"),this.spawnSyncLog(d[0],d.slice(1));const{name:l}=this.app,c=`"${l} would like to update"`,e=this.sudoWithArgs(c);this._logger.info(`Running as non-root user, using sudo to install: ${e}`);let o='"';return(/pkexec/i.test(e[0])||e[0]==="sudo")&&(o=""),this.spawnSyncLog(e[0],[...e.length>1?e.slice(1):[],`${o}/bin/bash`,"-c",`'${d.join(" ")}'${o}`])}sudoWithArgs(d){const l=this.determineSudoCommand(),c=[l];return/kdesudo/i.test(l)?(c.push("--comment",d),c.push("-c")):/gksudo/i.test(l)?c.push("--message",d):/pkexec/i.test(l)&&c.push("--disable-internal-agent"),c}hasCommand(d){try{return this.spawnSyncLog("command",["-v",d]),!0}catch{return!1}}determineSudoCommand(){const d=["gksudo","kdesudo","pkexec","beesu"];for(const l of d)if(this.hasCommand(l))return l;return"sudo"}detectPackageManager(d){var l;const c=(l=process.env.ELECTRON_BUILDER_LINUX_PACKAGE_MANAGER)===null||l===void 0?void 0:l.trim();if(c)return c;for(const e of d)if(this.hasCommand(e))return e;return this._logger.warn(`No package manager found in the list: ${d.join(", ")}. Defaulting to the first one: ${d[0]}`),d[0]}};return pr.LinuxUpdater=p,pr}var Cl;function Pl(){if(Cl)return hr;Cl=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.DebUpdater=void 0;const s=Ke(),p=Lt(),g=_o();let d=class Ru extends g.LinuxUpdater{constructor(c,e){super(c,e)}doDownloadUpdate(c){const e=c.updateInfoAndProvider.provider,o=(0,s.findFile)(e.resolveFiles(c.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:o,downloadUpdateOptions:c,task:async(t,a)=>{this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(a.onProgress=i=>this.emit(p.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(o.url,t,a)}})}doInstall(c){const e=this.installerPath;if(e==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;if(!this.hasCommand("dpkg")&&!this.hasCommand("apt"))return this.dispatchError(new Error("Neither dpkg nor apt command found. Cannot install .deb package.")),!1;const o=["dpkg","apt"],t=this.detectPackageManager(o);try{Ru.installWithCommandRunner(t,e,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(a){return this.dispatchError(a),!1}return c.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(c,e,o,t){var a;if(c==="dpkg")try{o(["dpkg","-i",e])}catch(i){t.warn((a=i.message)!==null&&a!==void 0?a:i),t.warn("dpkg installation failed, trying to fix broken dependencies with apt-get"),o(["apt-get","install","-f","-y"])}else if(c==="apt")t.warn("Using apt to install a local .deb. This may fail for unsigned packages unless properly configured."),o(["apt","install","-y","--allow-unauthenticated","--allow-downgrades","--allow-change-held-packages",e]);else throw new Error(`Package manager ${c} not supported`)}};return hr.DebUpdater=d,hr}var mr={},Ol;function Dl(){if(Ol)return mr;Ol=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.PacmanUpdater=void 0;const s=Lt(),p=Ke(),g=_o();let d=class Su extends g.LinuxUpdater{constructor(c,e){super(c,e)}doDownloadUpdate(c){const e=c.updateInfoAndProvider.provider,o=(0,p.findFile)(e.resolveFiles(c.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:o,downloadUpdateOptions:c,task:async(t,a)=>{this.listenerCount(s.DOWNLOAD_PROGRESS)>0&&(a.onProgress=i=>this.emit(s.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(o.url,t,a)}})}doInstall(c){const e=this.installerPath;if(e==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;try{Su.installWithCommandRunner(e,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(o){return this.dispatchError(o),!1}return c.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(c,e,o){var t;try{e(["pacman","-U","--noconfirm",c])}catch(a){o.warn((t=a.message)!==null&&t!==void 0?t:a),o.warn("pacman installation failed, attempting to update package database and retry");try{e(["pacman","-Sy","--noconfirm"]),e(["pacman","-U","--noconfirm",c])}catch(i){throw o.error("Retry after pacman -Sy failed"),i}}}};return mr.PacmanUpdater=d,mr}var gr={},Il;function Nl(){if(Il)return gr;Il=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.RpmUpdater=void 0;const s=Lt(),p=Ke(),g=_o();let d=class Au extends g.LinuxUpdater{constructor(c,e){super(c,e)}doDownloadUpdate(c){const e=c.updateInfoAndProvider.provider,o=(0,p.findFile)(e.resolveFiles(c.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:o,downloadUpdateOptions:c,task:async(t,a)=>{this.listenerCount(s.DOWNLOAD_PROGRESS)>0&&(a.onProgress=i=>this.emit(s.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(o.url,t,a)}})}doInstall(c){const e=this.installerPath;if(e==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const o=["zypper","dnf","yum","rpm"],t=this.detectPackageManager(o);try{Au.installWithCommandRunner(t,e,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(a){return this.dispatchError(a),!1}return c.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(c,e,o,t){if(c==="zypper")return o(["zypper","--non-interactive","--no-refresh","install","--allow-unsigned-rpm","-f",e]);if(c==="dnf")return o(["dnf","install","--nogpgcheck","-y",e]);if(c==="yum")return o(["yum","install","--nogpgcheck","-y",e]);if(c==="rpm")return t.warn("Installing with rpm only (no dependency resolution)."),o(["rpm","-Uvh","--replacepkgs","--replacefiles","--nodeps",e]);throw new Error(`Package manager ${c} not supported`)}};return gr.RpmUpdater=d,gr}var vr={},xl;function Fl(){if(xl)return vr;xl=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.MacUpdater=void 0;const s=Me(),p=_t(),g=Et,d=Ne,l=Rc,c=wo(),e=Ke(),o=Gt,t=Nt;let a=class extends c.AppUpdater{constructor(r,n){super(r,n),this.nativeUpdater=De.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",f=>{this._logger.warn(f),this.emit("error",f)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(r){this._logger.debug!=null&&this._logger.debug(r)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(r=>{r&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(r){let n=r.updateInfoAndProvider.provider.resolveFiles(r.updateInfoAndProvider.info);const f=this._logger,m="sysctl.proc_translated";let v=!1;try{this.debug("Checking for macOS Rosetta environment"),v=(0,o.execFileSync)("sysctl",[m],{encoding:"utf8"}).includes(`${m}: 1`),f.info(`Checked for macOS Rosetta environment (isRosetta=${v})`)}catch(T){f.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${T}`)}let h=!1;try{this.debug("Checking for arm64 in uname");const D=(0,o.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");f.info(`Checked 'uname -a': arm64=${D}`),h=h||D}catch(T){f.warn(`uname shell command to check for arm64 failed: ${T}`)}h=h||process.arch==="arm64"||v;const _=T=>{var D;return T.url.pathname.includes("arm64")||((D=T.info.url)===null||D===void 0?void 0:D.includes("arm64"))};h&&n.some(_)?n=n.filter(T=>h===_(T)):n=n.filter(T=>!_(T));const A=(0,e.findFile)(n,"zip",["pkg","dmg"]);if(A==null)throw(0,s.newError)(`ZIP file not provided: ${(0,s.safeStringifyJson)(n)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const C=r.updateInfoAndProvider.provider,O="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:A,downloadUpdateOptions:r,task:async(T,D)=>{const b=d.join(this.downloadedUpdateHelper.cacheDir,O),w=()=>(0,p.pathExistsSync)(b)?!r.disableDifferentialDownload:(f.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let y=!0;w()&&(y=await this.differentialDownloadInstaller(A,r,T,C,O)),y&&await this.httpExecutor.download(A.url,T,D)},done:async T=>{if(!r.disableDifferentialDownload)try{const D=d.join(this.downloadedUpdateHelper.cacheDir,O);await(0,p.copyFile)(T.downloadedFile,D)}catch(D){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${D.message}`)}return this.updateDownloaded(A,T)}})}async updateDownloaded(r,n){var f;const m=n.downloadedFile,v=(f=r.info.size)!==null&&f!==void 0?f:(await(0,p.stat)(m)).size,h=this._logger,_=`fileToProxy=${r.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${_})`),this.server=(0,l.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${_})`),this.server.on("close",()=>{h.info(`Proxy server for native Squirrel.Mac is closed (${_})`)});const A=C=>{const O=C.address();return typeof O=="string"?O:`http://127.0.0.1:${O?.port}`};return await new Promise((C,O)=>{const T=(0,t.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),D=Buffer.from(`autoupdater:${T}`,"ascii"),b=`/${(0,t.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(w,y)=>{const L=w.url;if(h.info(`${L} requested`),L==="/"){if(!w.headers.authorization||w.headers.authorization.indexOf("Basic ")===-1){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),h.warn("No authenthication info");return}const k=w.headers.authorization.split(" ")[1],F=Buffer.from(k,"base64").toString("ascii"),[I,U]=F.split(":");if(I!=="autoupdater"||U!==T){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),h.warn("Invalid authenthication credentials");return}const B=Buffer.from(`{ "url": "${A(this.server)}${b}" }`);y.writeHead(200,{"Content-Type":"application/json","Content-Length":B.length}),y.end(B);return}if(!L.startsWith(b)){h.warn(`${L} requested, but not supported`),y.writeHead(404),y.end();return}h.info(`${b} requested by Squirrel.Mac, pipe ${m}`);let $=!1;y.on("finish",()=>{$||(this.nativeUpdater.removeListener("error",O),C([]))});const N=(0,g.createReadStream)(m);N.on("error",k=>{try{y.end()}catch(F){h.warn(`cannot end response: ${F}`)}$=!0,this.nativeUpdater.removeListener("error",O),O(new Error(`Cannot pipe "${m}": ${k}`))}),y.writeHead(200,{"Content-Type":"application/zip","Content-Length":v}),N.pipe(y)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${_})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${A(this.server)}, ${_})`),this.nativeUpdater.setFeedURL({url:A(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${D.toString("base64")}`}}),this.dispatchUpdateDownloaded(n),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",O),this.nativeUpdater.checkForUpdates()):C([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return vr.MacUpdater=a,vr}var yr={},jr={},Ll;function Jf(){if(Ll)return jr;Ll=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.verifySignature=c;const s=Me(),p=Gt,g=Yr,d=Ne;function l(a,i){return['set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",a],{shell:!0,timeout:i}]}function c(a,i,r){return new Promise((n,f)=>{const m=i.replace(/'/g,"''");r.info(`Verifying signature ${m}`),(0,p.execFile)(...l(`"Get-AuthenticodeSignature -LiteralPath '${m}' | ConvertTo-Json -Compress"`,20*1e3),(v,h,_)=>{var A;try{if(v!=null||_){o(r,v,_,f),n(null);return}const C=e(h);if(C.Status===0){try{const b=d.normalize(C.Path),w=d.normalize(i);if(r.info(`LiteralPath: ${b}. Update Path: ${w}`),b!==w){o(r,new Error(`LiteralPath of ${b} is different than ${w}`),_,f),n(null);return}}catch(b){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(A=b.message)!==null&&A!==void 0?A:b.stack}`)}const T=(0,s.parseDn)(C.SignerCertificate.Subject);let D=!1;for(const b of a){const w=(0,s.parseDn)(b);if(w.size?D=Array.from(w.keys()).every(L=>w.get(L)===T.get(L)):b===T.get("CN")&&(r.warn(`Signature validated using only CN ${b}. Please add your full Distinguished Name (DN) to publisherNames configuration`),D=!0),D){n(null);return}}}const O=`publisherNames: ${a.join(" | ")}, raw info: `+JSON.stringify(C,(T,D)=>T==="RawData"?void 0:D,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${O}`),n(O)}catch(C){o(r,C,null,f),n(null);return}})})}function e(a){const i=JSON.parse(a);delete i.PrivateKey,delete i.IsOSBinary,delete i.SignatureType;const r=i.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),i}function o(a,i,r,n){if(t()){a.warn(`Cannot execute Get-AuthenticodeSignature: ${i||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,p.execFileSync)(...l("ConvertTo-Json test",10*1e3))}catch(f){a.warn(`Cannot execute ConvertTo-Json: ${f.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}i!=null&&n(i),r&&n(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function t(){const a=g.release();return a.startsWith("6.")&&!a.startsWith("6.3")}return jr}var Ul;function $l(){if(Ul)return yr;Ul=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.NsisUpdater=void 0;const s=Me(),p=Ne,g=tn(),d=_u(),l=Lt(),c=Ke(),e=_t(),o=Jf(),t=wt;let a=class extends g.BaseUpdater{constructor(r,n){super(r,n),this._verifyUpdateCodeSignature=(f,m)=>(0,o.verifySignature)(f,m,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(r){r&&(this._verifyUpdateCodeSignature=r)}doDownloadUpdate(r){const n=r.updateInfoAndProvider.provider,f=(0,c.findFile)(n.resolveFiles(r.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:r,fileInfo:f,task:async(m,v,h,_)=>{const A=f.packageInfo,C=A!=null&&h!=null;if(C&&r.disableWebInstaller)throw(0,s.newError)(`Unable to download new version ${r.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!C&&!r.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(C||r.disableDifferentialDownload||await this.differentialDownloadInstaller(f,r,m,n,s.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(f.url,m,v);const O=await this.verifySignature(m);if(O!=null)throw await _(),(0,s.newError)(`New version ${r.updateInfoAndProvider.info.version} is not signed by the application owner: ${O}`,"ERR_UPDATER_INVALID_SIGNATURE");if(C&&await this.differentialDownloadWebPackage(r,A,h,n))try{await this.httpExecutor.download(new t.URL(A.path),h,{headers:r.requestHeaders,cancellationToken:r.cancellationToken,sha512:A.sha512})}catch(T){try{await(0,e.unlink)(h)}catch{}throw T}}})}async verifySignature(r){let n;try{if(n=(await this.configOnDisk.value).publisherName,n==null)return null}catch(f){if(f.code==="ENOENT")return null;throw f}return await this._verifyUpdateCodeSignature(Array.isArray(n)?n:[n],r)}doInstall(r){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const f=["--updated"];r.isSilent&&f.push("/S"),r.isForceRunAfter&&f.push("--force-run"),this.installDirectory&&f.push(`/D=${this.installDirectory}`);const m=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;m!=null&&f.push(`--package-file=${m}`);const v=()=>{this.spawnLog(p.join(process.resourcesPath,"elevate.exe"),[n].concat(f)).catch(h=>this.dispatchError(h))};return r.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),v(),!0):(this.spawnLog(n,f).catch(h=>{const _=h.code;this._logger.info(`Cannot run installer: error code: ${_}, error message: "${h.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),_==="UNKNOWN"||_==="EACCES"?v():_==="ENOENT"?De.shell.openPath(n).catch(A=>this.dispatchError(A)):this.dispatchError(h)}),!0)}async differentialDownloadWebPackage(r,n,f,m){if(n.blockMapSize==null)return!0;try{const v={newUrl:new t.URL(n.path),oldFile:p.join(this.downloadedUpdateHelper.cacheDir,s.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:f,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:m.isUseMultipleRangeRequest,cancellationToken:r.cancellationToken};this.listenerCount(l.DOWNLOAD_PROGRESS)>0&&(v.onProgress=h=>this.emit(l.DOWNLOAD_PROGRESS,h)),await new d.FileWithEmbeddedBlockMapDifferentialDownloader(n,this.httpExecutor,v).download()}catch(v){return this._logger.error(`Cannot download differentially, fallback to full download: ${v.stack||v}`),process.platform==="win32"}return!1}};return yr.NsisUpdater=a,yr}var kl;function Qf(){return kl||(kl=1,(function(s){var p=Pt&&Pt.__createBinding||(Object.create?(function(h,_,A,C){C===void 0&&(C=A);var O=Object.getOwnPropertyDescriptor(_,A);(!O||("get"in O?!_.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return _[A]}}),Object.defineProperty(h,C,O)}):(function(h,_,A,C){C===void 0&&(C=A),h[C]=_[A]})),g=Pt&&Pt.__exportStar||function(h,_){for(var A in h)A!=="default"&&!Object.prototype.hasOwnProperty.call(_,A)&&p(_,h,A)};Object.defineProperty(s,"__esModule",{value:!0}),s.NsisUpdater=s.MacUpdater=s.RpmUpdater=s.PacmanUpdater=s.DebUpdater=s.AppImageUpdater=s.Provider=s.NoOpLogger=s.AppUpdater=s.BaseUpdater=void 0;const d=_t(),l=Ne;var c=tn();Object.defineProperty(s,"BaseUpdater",{enumerable:!0,get:function(){return c.BaseUpdater}});var e=wo();Object.defineProperty(s,"AppUpdater",{enumerable:!0,get:function(){return e.AppUpdater}}),Object.defineProperty(s,"NoOpLogger",{enumerable:!0,get:function(){return e.NoOpLogger}});var o=Ke();Object.defineProperty(s,"Provider",{enumerable:!0,get:function(){return o.Provider}});var t=Tl();Object.defineProperty(s,"AppImageUpdater",{enumerable:!0,get:function(){return t.AppImageUpdater}});var a=Pl();Object.defineProperty(s,"DebUpdater",{enumerable:!0,get:function(){return a.DebUpdater}});var i=Dl();Object.defineProperty(s,"PacmanUpdater",{enumerable:!0,get:function(){return i.PacmanUpdater}});var r=Nl();Object.defineProperty(s,"RpmUpdater",{enumerable:!0,get:function(){return r.RpmUpdater}});var n=Fl();Object.defineProperty(s,"MacUpdater",{enumerable:!0,get:function(){return n.MacUpdater}});var f=$l();Object.defineProperty(s,"NsisUpdater",{enumerable:!0,get:function(){return f.NsisUpdater}}),g(Lt(),s);let m;function v(){if(process.platform==="win32")m=new($l()).NsisUpdater;else if(process.platform==="darwin")m=new(Fl()).MacUpdater;else{m=new(Tl()).AppImageUpdater;try{const h=l.join(process.resourcesPath,"package-type");if(!(0,d.existsSync)(h))return m;switch((0,d.readFileSync)(h).toString().trim()){case"deb":m=new(Pl()).DebUpdater;break;case"rpm":m=new(Nl()).RpmUpdater;break;case"pacman":m=new(Dl()).PacmanUpdater;break;default:break}}catch(h){console.warn("Unable to detect 'package-type' for autoUpdater (rpm/deb/pacman support). If you'd like to expand support, please consider contributing to electron-builder",h.message)}}return m}Object.defineProperty(s,"autoUpdater",{enumerable:!0,get:()=>m||v()})})(Pt)),Pt}var Ze=Qf();const Zf="https://updates.jumpersystem.com.br";let Vr=null;function at(s){const p=require("node:fs"),g=require("node:path"),d=g.join(De.app.getPath("userData"),"logs"),l=g.join(d,"jump-updater.log"),c=`[${new Date().toISOString()}] ${s}
`;try{p.existsSync(d)||p.mkdirSync(d,{recursive:!0}),p.appendFileSync(l,c)}catch{}console.log(`[AutoUpdater] ${s}`)}function vt(s,p){Vr&&!Vr.isDestroyed()&&Vr.webContents.send("update-status",{status:s,...p})}function ed(s){Vr=s,Ze.autoUpdater.setFeedURL({provider:"generic",url:Zf}),Ze.autoUpdater.autoDownload=!1,Ze.autoUpdater.autoInstallOnAppQuit=!0,Ze.autoUpdater.on("checking-for-update",()=>{at("Verificando atualizacoes..."),vt("checking")}),Ze.autoUpdater.on("update-available",p=>{at(`Atualizacao disponivel: ${p.version}`),vt("available",{version:p.version}),De.dialog.showMessageBox({type:"info",title:"Atualizacao disponivel",message:`Uma nova versao (${p.version}) esta disponivel. Deseja baixar agora?`,buttons:["Baixar","Depois"],defaultId:0,cancelId:1}).then(g=>{g.response===0&&Ze.autoUpdater.downloadUpdate()})}),Ze.autoUpdater.on("update-not-available",()=>{at("Nenhuma atualizacao disponivel"),vt("not-available")}),Ze.autoUpdater.on("download-progress",p=>{const g=Math.round(p.percent);at(`Progresso do download: ${g}%`),vt("downloading",{percent:g,bytesPerSecond:p.bytesPerSecond,transferred:p.transferred,total:p.total})}),Ze.autoUpdater.on("update-downloaded",p=>{at(`Atualizacao baixada: ${p.version}`),vt("downloaded",{version:p.version}),De.dialog.showMessageBox({type:"info",title:"Atualizacao pronta",message:`A versao ${p.version} foi baixada. O aplicativo sera reiniciado para aplicar a atualizacao.`,buttons:["Reiniciar agora","Depois"],defaultId:0,cancelId:1}).then(g=>{g.response===0&&Ze.autoUpdater.quitAndInstall(!1,!0)})}),Ze.autoUpdater.on("error",p=>{at(`Erro ao verificar atualizacoes: ${p.message}`),vt("error",{message:p.message})})}function Tu(){if(De.app.isPackaged){at("Iniciando verificacao de atualizacoes");try{Ze.autoUpdater.checkForUpdates().catch(s=>{at(`Falha ao verificar atualizacoes: ${s.message}`),vt("error",{message:s.message})})}catch(s){const p=s instanceof Error?s.message:String(s);at(`Erro inesperado ao iniciar verificacao: ${p}`),vt("error",{message:p})}}else at("Modo desenvolvimento - verificacao de atualizacoes ignorada")}const Ro=!De.app.isPackaged;let ke=null,yt=null;const io=et.join(De.app.getPath("userData"),"logs"),td=et.join(io,"jump.log");function qe(s){const p=`[${new Date().toISOString()}] ${s}
`;try{Gr.existsSync(io)||Gr.mkdirSync(io,{recursive:!0}),Gr.appendFileSync(td,p)}catch{}console.log(s)}function rd(){const s=process.platform==="win32"?"backend.exe":"backend";return De.app.isPackaged?et.join(process.resourcesPath,"backend",s):et.join(__dirname,"resources","backend",s)}function nd(s,p=120,g=500){return new Promise((d,l)=>{let c=0;const e=()=>{fetch(s).then(o=>{if(qe(`Health check tentativa ${c+1}: status ${o.status}`),o.ok)d();else throw new Error(`HTTP ${o.status}`)}).catch(o=>{c++,c%10===0&&qe(`Ainda aguardando Django... tentativa ${c}  ${o.message}`),c<p?setTimeout(e,g):l(new Error(`Django no respondeu aps ${c} tentativas. ltimo erro: ${o.message}`))})};e()})}function Hr(s){ke&&!ke.isDestroyed()&&ke.webContents.send("loading-step",s)}function id(){const s=rd(),p=et.dirname(s);qe(`Django bin: ${s}`),qe(`Django dir: ${p}`),qe(`Bin exists: ${Gr.existsSync(s)}`);const g=et.join(De.app.getPath("userData"),"jump.db"),d={...process.env,PYTHONUNBUFFERED:"1",DB_PATH:g};return new Promise((l,c)=>{Hr("Iniciando backend...");const e=Fo.spawn(s,["migrate","--run-syncdb"],{cwd:p,env:d});Hr("Carregando banco de dados..."),e.stdout?.on("data",o=>{qe(`Migrate stdout: ${o}`)}),e.stderr?.on("data",o=>{qe(`Migrate stderr: ${o}`)}),e.on("error",o=>{qe(`Migrate error: ${o}`),c(o)}),e.on("exit",o=>{if(qe(`Migrate exited with code: ${o}`),o!==0){c(new Error(`Migrate falhou com cdigo ${o}`));return}Hr("Iniciando servidor..."),yt=Fo.spawn(s,["runserver","127.0.0.1:8000","--noreload"],{cwd:p,env:d}),yt.stdout?.on("data",t=>{qe(`Django stdout: ${t}`)}),yt.stderr?.on("data",t=>{qe(`Django stderr: ${t}`)}),yt.on("error",t=>{qe(`Django spawn error: ${t}`),c(t)}),yt.on("exit",(t,a)=>{qe(`Django exited  code: ${t}, signal: ${a}`)}),qe("Django process setup complete"),Hr("Aguardando servidor..."),nd("http://127.0.0.1:8000/api/health/").then(l).catch(c)})})}De.ipcMain.handle("get-machine-id",()=>{try{return Tc.machineIdSync()}catch{return`fallback-${ql.hostname()}-${Date.now()}`}});De.ipcMain.handle("get-machine-name",()=>ql.hostname());De.ipcMain.handle("check-for-updates",()=>{Tu()});function od(){return Ro&&process.env.VITE_DEV_SERVER_URL?`${process.env.VITE_DEV_SERVER_URL.replace(/\/$/,"")}/loading.html`:et.join(__dirname,"../dist/loading.html")}function ad(){return Ro&&process.env.VITE_DEV_SERVER_URL?process.env.VITE_DEV_SERVER_URL:et.join(__dirname,"../dist/index.html")}async function bu(){const s=Ro?et.join(__dirname,"../public/logo.ico"):et.join(process.resourcesPath,"logo.ico");ke=new De.BrowserWindow({width:1024,height:768,icon:s,webPreferences:{preload:et.join(__dirname,"preload.js")}});const p=od();p.startsWith("http")?ke.loadURL(p):ke.loadFile(p),ke.webContents.once("did-finish-load",()=>{id().then(()=>{if(!ke||ke.isDestroyed())return;const g=ad();g.startsWith("http")?ke.loadURL(g):ke.loadFile(g);try{ed(ke),Tu()}catch(d){qe(`Erro ao inicializar auto-updater: ${d}`)}ke.webContents.openDevTools()}).catch(g=>{qe(`Backend no iniciou: ${g}`),ke&&!ke.isDestroyed()&&ke.loadFile(et.join(__dirname,"../dist/error.html"))})}),ke.on("closed",()=>{ke=null})}De.app.on("ready",()=>{bu()});De.app.on("will-quit",()=>{if(yt&&(yt.kill(),yt=null),process.platform==="win32")try{require("child_process").execSync("taskkill /F /IM backend.exe /T",{stdio:"ignore"})}catch(s){qe(`Erro ao finalizar backend.exe: ${s}`)}else try{require("child_process").execSync("pkill -f backend",{stdio:"ignore"})}catch(s){qe(`Erro ao finalizar processo backend: ${s}`)}});De.app.on("window-all-closed",()=>{process.platform!=="darwin"&&De.app.quit()});De.app.on("activate",()=>{De.BrowserWindow.getAllWindows().length===0&&bu()});
